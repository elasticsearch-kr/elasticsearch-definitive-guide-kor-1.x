
<!DOCTYPE HTML>
<html lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Handling Relationships</title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearch: The Definitive Guide" /><link rel="up" href="modeling-your-data.html" title="Modeling Your Data" /><link rel="prev" href="modeling-your-data.html" title="Modeling Your Data" /><link rel="next" href="nested-objects.html" title="Nested Objects" />
  
 	<meta http-equiv="content-type" content="text/html; charset=utf-8" />

 	<!-- RTP tag --> 
	<script type='text/javascript' async>
	(function(c,h,a,f,i,e){c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
	 c[a].a=i;c[a].e=e;var g=h.createElement("script");g.async=true;g.type="text/javascript";
	 g.src=f+'?aid='+i;var b=h.getElementsByTagName("script")[0];b.parentNode.insertBefore(g,b);
	 })(window,document,"rtp","//sjrtp2-cdn.marketo.com/rtp-api/v1/rtp.js","elasticco");
	 
	rtp('send','view');
	rtp('get', 'campaign',true);
	</script>
	<!-- End of RTP tag -->
	
	
 	<link rel="apple-touch-icon" sizes="57x57"  href="https://www.elastic.co/apple-icon-57x57.png?change=123">
<link rel="apple-touch-icon" sizes="60x60"  href="https://www.elastic.co/apple-icon-60x60.png?change=123">
<link rel="apple-touch-icon" sizes="72x72"  href="https://www.elastic.co/apple-icon-72x72.png?change=123">
<link rel="apple-touch-icon" sizes="76x76"  href="https://www.elastic.co/apple-icon-76x76.png?change=123">
<link rel="apple-touch-icon" sizes="114x114"  href="https://www.elastic.co/apple-icon-114x114.png?change=123">
<link rel="apple-touch-icon" sizes="120x120"  href="https://www.elastic.co/apple-icon-120x120.png?change=123">
<link rel="apple-touch-icon" sizes="144x144"  href="https://www.elastic.co/apple-icon-144x144.png?change=123">
<link rel="apple-touch-icon" sizes="152x152"  href="https://www.elastic.co/apple-icon-152x152.png?change=123">
<link rel="apple-touch-icon" sizes="180x180"  href="https://www.elastic.co/apple-icon-180x180.png?change=123">
<link rel="icon" type="image/png" sizes="192x192"   href="https://www.elastic.co/android-icon-192x192.png?change=123">
<link rel="icon" type="image/png" sizes="32x32"  href="https://www.elastic.co/favicon-32x32.png?change=123">
<link rel="icon" type="image/png" sizes="96x96"  href="https://www.elastic.co/favicon-96x96.png?change=123">
<link rel="icon" type="image/png" sizes="16x16"  href="https://www.elastic.co/favicon-16x16.png?change=123">
<link rel="manifest"  href="https://www.elastic.co/manifest.json">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">

<!-- DC tags section -->
<link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" >
<link rel="schema.DCTERMS" href="http://purl.org/dc/terms/" >
<meta name="DC.title" content="Guide template" >

<!-- end DC tags -->

	<meta name="description" content="" />

	<link rel="canonical" href="" />

	<meta property="og:image" content="https://www.elastic.co/static/img/elastic-logo-200.png" />
	


	
	<link type="text/css" rel="stylesheet" href="https://static-www.elastic.co/static/css/skel.css?q=100" />
	<link type="text/css" rel="stylesheet" href="https://static-www.elastic.co/static/css/style.css?q=100" />	
	<script src="https://static-www.elastic.co/static/js/skel.min.js?q=100"></script>
	
		<script type="text/javascript">form_name = "" ; cdn_url="https://static-www.elastic.co";cdn_slug = "100"</script>
	
	<script src="https://static-www.elastic.co/static/js/init.js?q=100"></script>
	<script src="https://static-www.elastic.co/static/js/jquery.min.js?q=100"></script>
	<script src="https://static-www.elastic.co/static/js/jquery.cookie.js?q=100"></script>
	<!--<script type="text/javascript">
	    (function() {
	        var path = '//easy.myfonts.net/v2/js?sid=10336(font-family=Avenir+35+Light)&sid=10338(font-family=Avenir+55+Roman)&sid=10340(font-family=Avenir+85+Heavy)&sid=10344(font-family=Avenir+65+Medium)&key=nAD6PCOPrX',
	            protocol = ('https:' == document.location.protocol ? 'https:' : 'http:'),
	            trial = document.createElement('script');
	        trial.type = 'text/javascript';
	        trial.async = true;
	        trial.src = protocol + path;
	        var head = document.getElementsByTagName("head")[0];
	        head.appendChild(trial);
	    })();
	</script>-->

	
	<link type="text/css" rel="stylesheet"  href="https://www.elastic.co/static/css/prettify.css" />
	<script type="text/javascript"  src="https://www.elastic.co/static/js/prettify.js"></script>



<link rel="stylesheet" type="text/css" href="styles.css" />

</head>
<body >
	<!-- Google Tag Manager -->
	<script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5"
													  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
	<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
			new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
			j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
			'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-58RLH5');</script>
	<!-- End Google Tag Manager -->
	
	<div class="header-cont">
		<div id="header-wrapper">
			


	<script  src="https://www.elastic.co/static/js/jquery.tokeninput.js?change=123"></script>
	<link rel="stylesheet" type="text/css"  href="https://www.elastic.co/static/css/token-input.css">

<div class="shortcuts-wrapper">
	<div class="container">
		<!-- Shortcuts -->
		<nav id="shortcuts">
			<ul class="links">
				
					<li class="shortcut-1">
						<a href="/downloads" id="header_downloads" >
							<span class="txt">downloads</span>	
						</a>
					</li>
				
					<li class="shortcut-2">
						<a href="/guide" id="header_guide" >
							<span class="txt">docs</span>	
						</a>
					</li>
				
					<li class="shortcut-3">
						<a href="/subscriptions" id="header_subscriptions" >
							<span class="txt">support</span>	
						</a>
					</li>
				
					<li class="shortcut-4">
						<a href="https://discuss.elastic.co" id="header_discuss" target="_blank">
							<span class="txt">discuss</span>	
						</a>
					</li>
				
					<li class="shortcut-5">
						<a href="/contact" id="header_contact" >
							<span class="txt">contact</span>	
						</a>
					</li>
				
			</ul>
		</nav>
		<div class="languages-wrapper">
			<div class="global-language">
				<ul class="language">
					<!-- <li class="active-language"><a class="active" href="#">EN</a></li> -->
					
						<li><a href="#">EN</a></li>
					
				</ul>
				<ul class="all-languages">
					
						
						<li><a href="/guide_template">English</a></li>
					
						
						<li><a href="/fr/guide_template">French</a></li>
					
						
						<li><a href="/de/guide_template">German</a></li>
					
						
						<li><a href="/jp/guide_template">Japanese</a></li>
					
						
						<li><a href="/kr/guide_template">Korean</a></li>
					
				</ul>
			</div>
		</div>
	</div>
</div>
<div class="container w100">
	<div class="row 0%">
		<div class="12u">
			

<section class="first-container desktop-main-nav">
	<div class="row 0%">
		<div class="11u 6u(small) 6u(xsmall)">
			<div id="elastic">
				<h1>
					<a href="/">
						<div id="elastic-logo">
						<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 400 130" preserveAspectRatio="xMinYMin meet" enable-background="new 0 0 400 130" xml:space="preserve">
    <g>
    	<g>
    		<path fill="#FFFFFF" d="M122.5,67.8c0-10.3-6.4-19.2-15.9-22.7c0.4-2.2,0.6-4.3,0.6-6.6c0-19.1-15.5-34.6-34.6-34.6
    			c-11.1,0-21.5,5.3-28,14.4c-3.2-2.5-7.1-3.8-11.2-3.8c-10.1,0-18.4,8.2-18.4,18.4c0,2.2,0.4,4.4,1.1,6.4C6.5,42.6,0,51.8,0,62
    			c0,10.3,6.4,19.3,16,22.8c-0.4,2.1-0.6,4.3-0.6,6.6c0,19,15.5,34.5,34.5,34.5c11.2,0,21.5-5.4,28-14.4c3.2,2.5,7.2,3.9,11.3,3.9
    			c10.1,0,18.4-8.2,18.4-18.4c0-2.2-0.4-4.4-1.1-6.4C115.9,87.2,122.5,78,122.5,67.8z"/>
    		<g>
    			<path fill="#F4BD19" d="M47.9,56.3l27.3,12.5l27.6-24.2c0.4-2,0.6-4,0.6-6.1c0-17-13.8-30.8-30.8-30.8c-10.2,0-19.7,5-25.4,13.4
    				l-4.6,23.8L47.9,56.3z"/>
    		</g>
    		<g>
    			<path fill="#3CBEB1" d="M19.6,85.2c-0.4,2-0.6,4.1-0.6,6.2c0,17,13.9,30.9,30.9,30.9c10.3,0,19.8-5.1,25.6-13.5L80,85l-6.1-11.6
    				L46.5,60.9L19.6,85.2z"/>
    		</g>
    		<g>
    			<path fill="#E9478C" d="M19.4,37.9l18.7,4.4L42.3,21c-2.6-2-5.7-3-9-3c-8.1,0-14.8,6.6-14.8,14.8C18.5,34.5,18.8,36.3,19.4,37.9z
    				"/>
    		</g>
    		<g>
    			<path fill="#2C458F" d="M17.8,42.4C9.4,45.1,3.6,53.2,3.6,62c0,8.6,5.3,16.3,13.3,19.3l26.3-23.8l-4.8-10.3L17.8,42.4z"/>
    		</g>
    		<g>
    			<path fill="#95C63D" d="M80.3,108.7c2.6,2,5.7,3.1,8.9,3.1c8.1,0,14.8-6.6,14.8-14.8c0-1.8-0.3-3.5-0.9-5.1l-18.7-4.4L80.3,108.7
    				z"/>
    		</g>
    		<g>
    			<path fill="#176655" d="M84.1,82.6l20.6,4.8c8.4-2.8,14.2-10.8,14.2-19.6c0-8.6-5.3-16.2-13.3-19.3l-27,23.6L84.1,82.6z"/>
    		</g>
    	</g>
    	<path d="M162.8,76.3c0,0.1,0,0.6,0.1,1.4c0.1,0.8,0.3,1.8,0.6,3c0.3,1.1,0.8,2.4,1.4,3.7c0.6,1.3,1.4,2.5,2.5,3.6
    		c1,1.1,2.3,2,3.8,2.7c1.5,0.7,3.4,1.1,5.6,1.1c1.8,0,3.3-0.1,4.6-0.4c1.3-0.3,2.4-0.7,3.4-1.3c1-0.6,1.9-1.3,2.7-2.2
    		c0.8-0.9,1.6-1.9,2.4-3.1c0.5-0.7,1-1.2,1.6-1.5c0.6-0.3,1.2-0.4,1.8-0.4c1,0,2,0.4,2.8,1.1c0.9,0.7,1.3,1.7,1.3,2.8
    		c0,0.7-0.4,1.7-1.1,3.1c-0.7,1.4-1.9,2.8-3.6,4.1c-1.6,1.4-3.7,2.6-6.3,3.6c-2.6,1-5.7,1.5-9.5,1.5c-3.8,0-7.2-0.7-10.2-2.1
    		c-3-1.4-5.5-3.2-7.5-5.6c-2-2.3-3.6-5-4.7-8.1c-1.1-3.1-1.6-6.3-1.6-9.7c0-3.5,0.5-6.8,1.6-9.9c1.1-3.1,2.7-5.8,4.7-8.1
    		c2-2.3,4.5-4.1,7.4-5.5c2.9-1.3,6.1-2,9.6-2c3.3,0,6.3,0.5,9.2,1.5c2.8,1,5.3,2.4,7.4,4.3c2.1,1.9,3.7,4.1,5,6.8
    		c1.2,2.7,1.8,5.8,1.8,9.2c0,2.1-0.5,3.7-1.6,4.8c-1,1.1-2.2,1.6-3.6,1.6H162.8z M170.9,56.4c-1.5,0.6-2.7,1.4-3.7,2.4
    		c-1,0.9-1.8,2-2.4,3.1c-0.6,1.1-1,2.2-1.3,3.2c-0.3,1-0.5,1.8-0.5,2.5c-0.1,0.7-0.1,1.1-0.1,1.2h27.9c0-1.8-0.3-3.5-0.9-5.1
    		c-0.6-1.6-1.5-3-2.6-4.3c-1.2-1.2-2.7-2.2-4.5-3c-1.8-0.7-4-1.1-6.5-1.1C174.2,55.5,172.4,55.8,170.9,56.4z"/>
    	<path d="M214.3,94.6c0,1.3-0.4,2.3-1.3,3.2c-0.9,0.9-1.9,1.3-3.2,1.3c-1.3,0-2.3-0.4-3.2-1.3c-0.9-0.9-1.3-2-1.3-3.2V35.1
    		c0-1.3,0.4-2.3,1.3-3.2c0.9-0.9,2-1.3,3.2-1.3c1.3,0,2.3,0.4,3.2,1.3c0.9,0.9,1.3,1.9,1.3,3.2V94.6z"/>
    	<path d="M229.8,63.5c-0.6,0.3-1.2,0.5-1.9,0.5c-1.2,0-2.2-0.4-3.2-1.1c-1-0.7-1.5-1.8-1.5-3.1c0-0.5,0.1-1.1,0.4-1.9
    		c0.5-1.2,1.2-2.4,2.1-3.6c0.9-1.2,2-2.2,3.5-3.1s3.3-1.7,5.4-2.2c2.2-0.5,4.8-0.8,7.9-0.8c5.9,0,10.5,1.2,14,3.5
    		c3.5,2.3,5.2,5.8,5.2,10.3v32.8c0,1.3-0.4,2.3-1.3,3.2c-0.9,0.9-1.9,1.3-3.2,1.3c-1.3,0-2.3-0.4-3.2-1.3c-0.9-0.9-1.3-2-1.3-3.2v-2
    		c-1.2,2-4.7,4.5-7.5,5.3c-2.8,0.8-5.7,1.2-8.8,1.2c-2,0-3.9-0.3-5.9-0.8c-2-0.5-3.8-1.4-5.3-2.5c-1.6-1.1-2.9-2.6-3.8-4.3
    		c-1-1.7-1.5-3.8-1.5-6.2c0-2.8,0.5-5.7,1.6-7.5c1.1-1.9,2.6-3.4,4.4-4.6c1.8-1.2,3.9-2.1,6.3-2.8c2.4-0.6,4.9-1.1,7.5-1.4
    		c3-0.3,5.4-0.7,7.2-1.2c1.7-0.4,3-0.9,3.9-1.5c0.9-0.6,1.4-1.2,1.6-2c0.2-0.7,0.3-1.6,0.3-2.5c0-1.1-0.3-2-0.9-2.8
    		c-0.6-0.8-1.4-1.5-2.4-2c-1-0.5-2.1-0.9-3.3-1.2s-2.4-0.4-3.5-0.4c-2.1,0-3.7,0.2-5,0.5c-1.3,0.3-2.3,0.8-3.1,1.4
    		c-0.8,0.6-1.5,1.3-1.9,2.1c-0.5,0.8-0.9,1.6-1.3,2.5C230.9,62.6,230.4,63.1,229.8,63.5z M250.6,74.4c-1.1,0.3-2.4,0.6-3.8,0.8
    		c-1.5,0.2-3,0.4-4.6,0.6c-1.6,0.2-3.1,0.5-4.6,0.9c-1.5,0.3-2.8,0.8-4,1.5c-1.2,0.7-2.2,1.5-2.9,2.5c-0.7,1-1.1,3-1.1,4.6
    		c0,1.3,0.3,2.3,0.8,3.1c0.5,0.8,1.2,1.5,2.1,2c0.9,0.5,1.8,0.8,2.9,1c1.1,0.2,2.2,0.3,3.3,0.3c1.7,0,3.3-0.2,5-0.6
    		c1.7-0.4,3.2-1,4.5-1.9s2.4-2,3.3-3.5c0.8-1.4,1.2-3.8,1.2-5.9v-6.1L250.6,74.4z"/>
    	<path d="M307.6,90.9c-1.1,2-2.7,3.6-4.6,4.8s-4.1,2.1-6.6,2.7c-2.5,0.5-5.2,0.8-7.9,0.8c-3.9,0-7.2-0.6-9.9-1.8
    		c-2.7-1.2-4.9-2.6-6.5-4.1c-1.7-1.6-2.9-3.1-3.7-4.7c-0.7-1.6-1.1-2.7-1.1-3.5c0-1.3,0.5-2.4,1.4-3.2c0.9-0.8,2-1.2,3.1-1.2
    		c0.7,0,1.3,0.2,2,0.6c0.6,0.4,1.1,1,1.5,1.9c1,2.5,2.5,4.5,4.7,6.2c2.2,1.7,5.2,2.5,9.3,2.5c1.8,0,3.4-0.2,4.7-0.6
    		c1.3-0.4,2.4-1,3.2-1.7c0.8-0.7,1.4-1.5,1.9-2.4c0.4-0.9,0.6-1.8,0.6-2.8c0-2-0.8-3.4-2.3-4.4c-1.5-1-3.5-1.7-5.8-2.3
    		c-2.3-0.6-4.8-1.1-7.5-1.6c-2.7-0.5-5.2-1.2-7.5-2.2c-2.3-0.9-4.2-2.3-5.8-4c-1.6-1.8-2.3-4.2-2.3-7.3c0-4.5,1.6-8,4.9-10.5
    		c3.3-2.5,7.8-3.8,13.7-3.8c3.3,0,6,0.3,8.3,1c2.2,0.7,4.1,1.6,5.5,2.7c0.6,0.5,1.2,1,1.8,1.7c0.6,0.7,1.2,1.4,1.8,2.2
    		c0.6,0.8,1,1.5,1.4,2.3c0.4,0.7,0.6,1.4,0.6,2c0,1.3-0.5,2.4-1.6,3.1c-1,0.8-2.2,1.2-3.4,1.2c-0.7,0-1.5-0.1-2.1-0.6
    		c-0.6-0.6-1-1.3-1.3-1.8c-0.5-1.1-1.1-2-1.7-2.8c-0.5-0.8-1.2-1.5-2-2c-0.8-0.5-1.8-0.9-3-1.2c-1.2-0.3-2.7-0.4-4.4-0.4
    		c-3.5,0-6,0.6-7.6,1.7c-1.6,1.1-2.4,2.5-2.4,4.2c0,1.3,0.5,2.3,1.4,3.1c0.9,0.8,2.1,1.4,3.7,2c1.5,0.5,3.3,1,5.2,1.4
    		c2,0.4,3.9,0.8,5.9,1.3c2,0.5,4,1.1,5.9,1.7c1.9,0.7,3.7,1.6,5.2,2.7c1.5,1.1,2.7,2.5,3.7,4.1c0.9,1.6,1.4,3.6,1.4,6
    		C309.4,86.4,308.8,88.9,307.6,90.9z"/>
    	<path d="M327.4,48.8h4.7c1.1,0,2,0.4,2.8,1.2c0.8,0.8,1.2,1.7,1.2,2.8c0,1.1-0.4,2.1-1.2,2.8s-1.7,1.1-2.8,1.1h-4.7v37.9
    		c0,1.3-0.4,2.3-1.3,3.2c-0.9,0.9-2,1.3-3.2,1.3c-1.3,0-2.3-0.4-3.2-1.3c-0.9-0.9-1.3-2-1.3-3.2V56.7h-4.6c-1.1,0-2-0.4-2.8-1.1
    		c-0.8-0.7-1.2-1.7-1.2-2.8c0-1.1,0.4-2,1.2-2.8c0.8-0.8,1.7-1.2,2.8-1.2h4.6V39c0-1.3,0.4-2.3,1.3-3.2s1.9-1.3,3.2-1.3
    		c1.3,0,2.3,0.4,3.2,1.3s1.3,1.9,1.3,3.2V48.8z"/>
    	<path d="M341.5,32.1c1-1,2.2-1.5,3.7-1.5c1.4,0,2.6,0.5,3.6,1.5c1,1,1.5,2.2,1.5,3.6c0,1.4-0.5,2.6-1.5,3.6c-1,1-2.2,1.5-3.6,1.5
    		c-1.4,0-2.7-0.5-3.7-1.5c-1-1-1.5-2.2-1.5-3.6C340,34.2,340.5,33,341.5,32.1z M349.6,94.6c0,1.3-0.4,2.3-1.3,3.2
    		c-0.9,0.9-1.9,1.3-3.2,1.3c-1.3,0-2.3-0.4-3.2-1.3c-0.9-0.9-1.3-2-1.3-3.2V53.3c0-1.3,0.4-2.3,1.3-3.2c0.9-0.9,2-1.3,3.2-1.3
    		c1.3,0,2.3,0.4,3.2,1.3c0.9,0.9,1.3,2,1.3,3.2V94.6z"/>
    	<path d="M369.1,97.3c-2.9-1.2-5.4-3-7.5-5.2c-2.1-2.2-3.8-4.9-5-8.1c-1.2-3.1-1.8-6.6-1.8-10.4c0-3.8,0.6-7.3,1.8-10.5
    		c1.2-3.1,2.9-5.8,5-8.1c2.1-2.2,4.6-4,7.5-5.2c2.9-1.2,6-1.9,9.4-1.9c3.4,0,6.4,0.5,9,1.5c2.5,1,4.6,2.2,6.2,3.6
    		c1.6,1.4,3.2,2.9,4,4.4c0.5,0.9,0.9,1.5,0.9,2.6c0,1.3-0.5,2.3-1.4,3.1c-0.9,0.7-2,1.1-3.1,1.1c-0.8,0-1.6-0.2-2.2-0.6
    		c-0.7-0.4-1.2-1.3-1.8-2.1c-1-1.4-0.5-0.6-1.1-1.5c-0.7-0.9-1.5-1.6-2.5-2.3c-1-0.7-2.2-1.2-3.5-1.6c-1.4-0.4-2.8-0.6-4.4-0.6
    		c-1.8,0-3.5,0.3-5.3,1c-1.8,0.7-3.3,1.7-4.7,3.1c-1.4,1.4-2.5,3.3-3.4,5.6s-1.3,5.1-1.3,8.4c0,3.3,0.4,6.1,1.3,8.4s2,4.2,3.4,5.6
    		c1.4,1.4,3,2.5,4.7,3.1c1.8,0.7,3.5,1,5.3,1c1.6,0,3.1-0.2,4.4-0.6c1.3-0.4,2.5-0.9,3.5-1.6c1-0.7,1.8-1.5,2.5-2.3
    		c0.7-0.9,1.1-1.8,1.4-2.7c0.3-1,0.8-1.7,1.5-2.1c0.7-0.4,1.4-0.6,2.2-0.6c1.1,0,2.2,0.4,3.1,1.1c0.9,0.7,1.4,1.7,1.4,3
    		c0,0.6-0.3,1.7-0.9,3.1c-0.6,1.5-1.6,2.9-3.1,4.4c-1.5,1.5-3.5,2.8-6.2,4c-2.6,1.1-6,1.7-10,1.7C375.1,99.2,372,98.5,369.1,97.3z"
    		/>
    </g>
</svg>
						</div>
					</a>
				</h1>
			</div>
			<nav id="nav">
				<ul>
					
					<li>
						
							
						
						<a href="/products" id="nav_products"   >Products</a>
						
						<ul class="dropdown">
							
								<li><a href="/products/elasticsearch" id="nav_elasticsearch" >elasticsearch</a></li>								
							
								<li><a href="/found" id="nav_hosted-elasticsearch" >elasticsearch as a service</a></li>								
							
								<li><a href="/products/logstash" id="nav_logstash" >logstash</a></li>								
							
								<li><a href="/products/kibana" id="nav_kibana" >kibana</a></li>								
							
								<li><a href="/products/beats" id="nav_beats" >beats</a></li>								
							
								<li><a href="/products/watcher" id="nav_watcher" >watcher</a></li>								
							
								<li><a href="/products/shield" id="nav_shield" >shield</a></li>								
							
								<li><a href="/products/marvel" id="nav_marvel" >marvel</a></li>								
							
								<li><a href="/products/hadoop" id="nav_hadoop" >hadoop</a></li>								
							
								<li><a href="/downloads" id="nav_downloads" >downloads</a></li>								
								
						</ul>							
					</li>
					
					<li>
						
							
						
						<a href="/subscriptions" id="nav_subscriptions"   >Subscriptions</a>
						
						<ul class="dropdown">
								
						</ul>							
					</li>
					
					<li>
						
							
						
						<a href="/learn" id="nav_learn"   >Learn</a>
						
						<ul class="dropdown">
							
								<li><a href="/guide" id="nav_guide" >docs</a></li>								
							
								<li><a href="/videos" id="nav_videos" >videos</a></li>								
							
								<li><a href="/training" id="nav_training" >training</a></li>								
							
								<li><a href="/services" id="nav_services" >services</a></li>								
							
								<li><a href="/blog" id="nav_learn_blog" >blog</a></li>								
							
								<li><a href="/elasticon" id="nav_learn_elasticon" >elastic{ON}</a></li>								
								
						</ul>							
					</li>
					
					<li>
						
							
						
						<a href="/community" id="nav_community"   >Community</a>
						
						<ul class="dropdown">
							
								<li><a href="/community/meetups" id="nav_meetups" >meetups</a></li>								
							
								<li><a href="https://discuss.elastic.co" id="nav_discuss" target="_blank">discuss</a></li>								
							
								<li><a href="/community/codeofconduct" id="nav_codeofconduct" >code of conduct</a></li>								
								
						</ul>							
					</li>
					
					<li>
						
							
						
						<a href="/use-cases" id="nav_usecases"   >Use Cases</a>
						
						<ul class="dropdown">
								
						</ul>							
					</li>
					
					<li>
						
							
						
						<a href="/blog" id="nav_blog"   >Blog</a>
						
						<ul class="dropdown">
							
								<li><a href="/blog/category/news" id="blog_news" >News</a></li>								
							
								<li><a href="/blog/category/engineering" id="blog_engineering" >Engineering</a></li>								
							
								<li><a href="/blog/category/user-stories" id="blog_user-stories" >User Stories</a></li>								
							
								<li><a href="/blog/category/releases" id="blog_releases" >Releases</a></li>								
							
								<li><a href="/blog/archive" id="blog_archive" >Archive</a></li>								
								
						</ul>							
					</li>
					
					<li>
						
							
						
						<a href="/about" id="nav_about"   >About</a>
						
						<ul class="dropdown">
							
								<li><a href="/about/leadership" id="nav_leadership" >leadership</a></li>								
							
								<li><a href="/about/board" id="nav_board" >board of directors</a></li>								
							
								<li><a href="/about/careers" id="nav_careers" >careers</a></li>								
							
								<li><a href="/about/partners" id="nav_partners" >partners</a></li>								
							
								<li><a href="/about/press" id="nav_press" >press</a></li>								
								
						</ul>							
					</li>
					
				</ul>
			</nav>			
			<!-- Searchbar Input box -->
			 <!-- <form method="get" action="/search" name="searchForm" class="header-search-form" id="searchMobileFrm">
			   <input type="text" id="search-header-autocomplete" name="q" class="form-control global-input" placeholder="elastic{search}">
			</form>
			<div class="mobile-auto-complete"></div> -->  
		</div>
		<div class="1u 6u(small) 6u(xsmall)">
			<div id="searchbar">
				<a href="#" class="button icon"></a>
			</div>
			<!-- <div class="nav-auto-complete"></div> -->
		</div>
	</div>
</section>
<div class="mobile-menu-wrapper">
	<div class="row 0%">
		<div class="8u 6u(small) 6u(xsmall)">
			<div id="elastic">
				<h1>
					<a href="/">
						<div id="elastic-logo">
						<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 400 130" preserveAspectRatio="xMinYMin meet" enable-background="new 0 0 400 130" xml:space="preserve">
    <g>
    	<g>
    		<path fill="#FFFFFF" d="M122.5,67.8c0-10.3-6.4-19.2-15.9-22.7c0.4-2.2,0.6-4.3,0.6-6.6c0-19.1-15.5-34.6-34.6-34.6
    			c-11.1,0-21.5,5.3-28,14.4c-3.2-2.5-7.1-3.8-11.2-3.8c-10.1,0-18.4,8.2-18.4,18.4c0,2.2,0.4,4.4,1.1,6.4C6.5,42.6,0,51.8,0,62
    			c0,10.3,6.4,19.3,16,22.8c-0.4,2.1-0.6,4.3-0.6,6.6c0,19,15.5,34.5,34.5,34.5c11.2,0,21.5-5.4,28-14.4c3.2,2.5,7.2,3.9,11.3,3.9
    			c10.1,0,18.4-8.2,18.4-18.4c0-2.2-0.4-4.4-1.1-6.4C115.9,87.2,122.5,78,122.5,67.8z"/>
    		<g>
    			<path fill="#F4BD19" d="M47.9,56.3l27.3,12.5l27.6-24.2c0.4-2,0.6-4,0.6-6.1c0-17-13.8-30.8-30.8-30.8c-10.2,0-19.7,5-25.4,13.4
    				l-4.6,23.8L47.9,56.3z"/>
    		</g>
    		<g>
    			<path fill="#3CBEB1" d="M19.6,85.2c-0.4,2-0.6,4.1-0.6,6.2c0,17,13.9,30.9,30.9,30.9c10.3,0,19.8-5.1,25.6-13.5L80,85l-6.1-11.6
    				L46.5,60.9L19.6,85.2z"/>
    		</g>
    		<g>
    			<path fill="#E9478C" d="M19.4,37.9l18.7,4.4L42.3,21c-2.6-2-5.7-3-9-3c-8.1,0-14.8,6.6-14.8,14.8C18.5,34.5,18.8,36.3,19.4,37.9z
    				"/>
    		</g>
    		<g>
    			<path fill="#2C458F" d="M17.8,42.4C9.4,45.1,3.6,53.2,3.6,62c0,8.6,5.3,16.3,13.3,19.3l26.3-23.8l-4.8-10.3L17.8,42.4z"/>
    		</g>
    		<g>
    			<path fill="#95C63D" d="M80.3,108.7c2.6,2,5.7,3.1,8.9,3.1c8.1,0,14.8-6.6,14.8-14.8c0-1.8-0.3-3.5-0.9-5.1l-18.7-4.4L80.3,108.7
    				z"/>
    		</g>
    		<g>
    			<path fill="#176655" d="M84.1,82.6l20.6,4.8c8.4-2.8,14.2-10.8,14.2-19.6c0-8.6-5.3-16.2-13.3-19.3l-27,23.6L84.1,82.6z"/>
    		</g>
    	</g>
    	<path d="M162.8,76.3c0,0.1,0,0.6,0.1,1.4c0.1,0.8,0.3,1.8,0.6,3c0.3,1.1,0.8,2.4,1.4,3.7c0.6,1.3,1.4,2.5,2.5,3.6
    		c1,1.1,2.3,2,3.8,2.7c1.5,0.7,3.4,1.1,5.6,1.1c1.8,0,3.3-0.1,4.6-0.4c1.3-0.3,2.4-0.7,3.4-1.3c1-0.6,1.9-1.3,2.7-2.2
    		c0.8-0.9,1.6-1.9,2.4-3.1c0.5-0.7,1-1.2,1.6-1.5c0.6-0.3,1.2-0.4,1.8-0.4c1,0,2,0.4,2.8,1.1c0.9,0.7,1.3,1.7,1.3,2.8
    		c0,0.7-0.4,1.7-1.1,3.1c-0.7,1.4-1.9,2.8-3.6,4.1c-1.6,1.4-3.7,2.6-6.3,3.6c-2.6,1-5.7,1.5-9.5,1.5c-3.8,0-7.2-0.7-10.2-2.1
    		c-3-1.4-5.5-3.2-7.5-5.6c-2-2.3-3.6-5-4.7-8.1c-1.1-3.1-1.6-6.3-1.6-9.7c0-3.5,0.5-6.8,1.6-9.9c1.1-3.1,2.7-5.8,4.7-8.1
    		c2-2.3,4.5-4.1,7.4-5.5c2.9-1.3,6.1-2,9.6-2c3.3,0,6.3,0.5,9.2,1.5c2.8,1,5.3,2.4,7.4,4.3c2.1,1.9,3.7,4.1,5,6.8
    		c1.2,2.7,1.8,5.8,1.8,9.2c0,2.1-0.5,3.7-1.6,4.8c-1,1.1-2.2,1.6-3.6,1.6H162.8z M170.9,56.4c-1.5,0.6-2.7,1.4-3.7,2.4
    		c-1,0.9-1.8,2-2.4,3.1c-0.6,1.1-1,2.2-1.3,3.2c-0.3,1-0.5,1.8-0.5,2.5c-0.1,0.7-0.1,1.1-0.1,1.2h27.9c0-1.8-0.3-3.5-0.9-5.1
    		c-0.6-1.6-1.5-3-2.6-4.3c-1.2-1.2-2.7-2.2-4.5-3c-1.8-0.7-4-1.1-6.5-1.1C174.2,55.5,172.4,55.8,170.9,56.4z"/>
    	<path d="M214.3,94.6c0,1.3-0.4,2.3-1.3,3.2c-0.9,0.9-1.9,1.3-3.2,1.3c-1.3,0-2.3-0.4-3.2-1.3c-0.9-0.9-1.3-2-1.3-3.2V35.1
    		c0-1.3,0.4-2.3,1.3-3.2c0.9-0.9,2-1.3,3.2-1.3c1.3,0,2.3,0.4,3.2,1.3c0.9,0.9,1.3,1.9,1.3,3.2V94.6z"/>
    	<path d="M229.8,63.5c-0.6,0.3-1.2,0.5-1.9,0.5c-1.2,0-2.2-0.4-3.2-1.1c-1-0.7-1.5-1.8-1.5-3.1c0-0.5,0.1-1.1,0.4-1.9
    		c0.5-1.2,1.2-2.4,2.1-3.6c0.9-1.2,2-2.2,3.5-3.1s3.3-1.7,5.4-2.2c2.2-0.5,4.8-0.8,7.9-0.8c5.9,0,10.5,1.2,14,3.5
    		c3.5,2.3,5.2,5.8,5.2,10.3v32.8c0,1.3-0.4,2.3-1.3,3.2c-0.9,0.9-1.9,1.3-3.2,1.3c-1.3,0-2.3-0.4-3.2-1.3c-0.9-0.9-1.3-2-1.3-3.2v-2
    		c-1.2,2-4.7,4.5-7.5,5.3c-2.8,0.8-5.7,1.2-8.8,1.2c-2,0-3.9-0.3-5.9-0.8c-2-0.5-3.8-1.4-5.3-2.5c-1.6-1.1-2.9-2.6-3.8-4.3
    		c-1-1.7-1.5-3.8-1.5-6.2c0-2.8,0.5-5.7,1.6-7.5c1.1-1.9,2.6-3.4,4.4-4.6c1.8-1.2,3.9-2.1,6.3-2.8c2.4-0.6,4.9-1.1,7.5-1.4
    		c3-0.3,5.4-0.7,7.2-1.2c1.7-0.4,3-0.9,3.9-1.5c0.9-0.6,1.4-1.2,1.6-2c0.2-0.7,0.3-1.6,0.3-2.5c0-1.1-0.3-2-0.9-2.8
    		c-0.6-0.8-1.4-1.5-2.4-2c-1-0.5-2.1-0.9-3.3-1.2s-2.4-0.4-3.5-0.4c-2.1,0-3.7,0.2-5,0.5c-1.3,0.3-2.3,0.8-3.1,1.4
    		c-0.8,0.6-1.5,1.3-1.9,2.1c-0.5,0.8-0.9,1.6-1.3,2.5C230.9,62.6,230.4,63.1,229.8,63.5z M250.6,74.4c-1.1,0.3-2.4,0.6-3.8,0.8
    		c-1.5,0.2-3,0.4-4.6,0.6c-1.6,0.2-3.1,0.5-4.6,0.9c-1.5,0.3-2.8,0.8-4,1.5c-1.2,0.7-2.2,1.5-2.9,2.5c-0.7,1-1.1,3-1.1,4.6
    		c0,1.3,0.3,2.3,0.8,3.1c0.5,0.8,1.2,1.5,2.1,2c0.9,0.5,1.8,0.8,2.9,1c1.1,0.2,2.2,0.3,3.3,0.3c1.7,0,3.3-0.2,5-0.6
    		c1.7-0.4,3.2-1,4.5-1.9s2.4-2,3.3-3.5c0.8-1.4,1.2-3.8,1.2-5.9v-6.1L250.6,74.4z"/>
    	<path d="M307.6,90.9c-1.1,2-2.7,3.6-4.6,4.8s-4.1,2.1-6.6,2.7c-2.5,0.5-5.2,0.8-7.9,0.8c-3.9,0-7.2-0.6-9.9-1.8
    		c-2.7-1.2-4.9-2.6-6.5-4.1c-1.7-1.6-2.9-3.1-3.7-4.7c-0.7-1.6-1.1-2.7-1.1-3.5c0-1.3,0.5-2.4,1.4-3.2c0.9-0.8,2-1.2,3.1-1.2
    		c0.7,0,1.3,0.2,2,0.6c0.6,0.4,1.1,1,1.5,1.9c1,2.5,2.5,4.5,4.7,6.2c2.2,1.7,5.2,2.5,9.3,2.5c1.8,0,3.4-0.2,4.7-0.6
    		c1.3-0.4,2.4-1,3.2-1.7c0.8-0.7,1.4-1.5,1.9-2.4c0.4-0.9,0.6-1.8,0.6-2.8c0-2-0.8-3.4-2.3-4.4c-1.5-1-3.5-1.7-5.8-2.3
    		c-2.3-0.6-4.8-1.1-7.5-1.6c-2.7-0.5-5.2-1.2-7.5-2.2c-2.3-0.9-4.2-2.3-5.8-4c-1.6-1.8-2.3-4.2-2.3-7.3c0-4.5,1.6-8,4.9-10.5
    		c3.3-2.5,7.8-3.8,13.7-3.8c3.3,0,6,0.3,8.3,1c2.2,0.7,4.1,1.6,5.5,2.7c0.6,0.5,1.2,1,1.8,1.7c0.6,0.7,1.2,1.4,1.8,2.2
    		c0.6,0.8,1,1.5,1.4,2.3c0.4,0.7,0.6,1.4,0.6,2c0,1.3-0.5,2.4-1.6,3.1c-1,0.8-2.2,1.2-3.4,1.2c-0.7,0-1.5-0.1-2.1-0.6
    		c-0.6-0.6-1-1.3-1.3-1.8c-0.5-1.1-1.1-2-1.7-2.8c-0.5-0.8-1.2-1.5-2-2c-0.8-0.5-1.8-0.9-3-1.2c-1.2-0.3-2.7-0.4-4.4-0.4
    		c-3.5,0-6,0.6-7.6,1.7c-1.6,1.1-2.4,2.5-2.4,4.2c0,1.3,0.5,2.3,1.4,3.1c0.9,0.8,2.1,1.4,3.7,2c1.5,0.5,3.3,1,5.2,1.4
    		c2,0.4,3.9,0.8,5.9,1.3c2,0.5,4,1.1,5.9,1.7c1.9,0.7,3.7,1.6,5.2,2.7c1.5,1.1,2.7,2.5,3.7,4.1c0.9,1.6,1.4,3.6,1.4,6
    		C309.4,86.4,308.8,88.9,307.6,90.9z"/>
    	<path d="M327.4,48.8h4.7c1.1,0,2,0.4,2.8,1.2c0.8,0.8,1.2,1.7,1.2,2.8c0,1.1-0.4,2.1-1.2,2.8s-1.7,1.1-2.8,1.1h-4.7v37.9
    		c0,1.3-0.4,2.3-1.3,3.2c-0.9,0.9-2,1.3-3.2,1.3c-1.3,0-2.3-0.4-3.2-1.3c-0.9-0.9-1.3-2-1.3-3.2V56.7h-4.6c-1.1,0-2-0.4-2.8-1.1
    		c-0.8-0.7-1.2-1.7-1.2-2.8c0-1.1,0.4-2,1.2-2.8c0.8-0.8,1.7-1.2,2.8-1.2h4.6V39c0-1.3,0.4-2.3,1.3-3.2s1.9-1.3,3.2-1.3
    		c1.3,0,2.3,0.4,3.2,1.3s1.3,1.9,1.3,3.2V48.8z"/>
    	<path d="M341.5,32.1c1-1,2.2-1.5,3.7-1.5c1.4,0,2.6,0.5,3.6,1.5c1,1,1.5,2.2,1.5,3.6c0,1.4-0.5,2.6-1.5,3.6c-1,1-2.2,1.5-3.6,1.5
    		c-1.4,0-2.7-0.5-3.7-1.5c-1-1-1.5-2.2-1.5-3.6C340,34.2,340.5,33,341.5,32.1z M349.6,94.6c0,1.3-0.4,2.3-1.3,3.2
    		c-0.9,0.9-1.9,1.3-3.2,1.3c-1.3,0-2.3-0.4-3.2-1.3c-0.9-0.9-1.3-2-1.3-3.2V53.3c0-1.3,0.4-2.3,1.3-3.2c0.9-0.9,2-1.3,3.2-1.3
    		c1.3,0,2.3,0.4,3.2,1.3c0.9,0.9,1.3,2,1.3,3.2V94.6z"/>
    	<path d="M369.1,97.3c-2.9-1.2-5.4-3-7.5-5.2c-2.1-2.2-3.8-4.9-5-8.1c-1.2-3.1-1.8-6.6-1.8-10.4c0-3.8,0.6-7.3,1.8-10.5
    		c1.2-3.1,2.9-5.8,5-8.1c2.1-2.2,4.6-4,7.5-5.2c2.9-1.2,6-1.9,9.4-1.9c3.4,0,6.4,0.5,9,1.5c2.5,1,4.6,2.2,6.2,3.6
    		c1.6,1.4,3.2,2.9,4,4.4c0.5,0.9,0.9,1.5,0.9,2.6c0,1.3-0.5,2.3-1.4,3.1c-0.9,0.7-2,1.1-3.1,1.1c-0.8,0-1.6-0.2-2.2-0.6
    		c-0.7-0.4-1.2-1.3-1.8-2.1c-1-1.4-0.5-0.6-1.1-1.5c-0.7-0.9-1.5-1.6-2.5-2.3c-1-0.7-2.2-1.2-3.5-1.6c-1.4-0.4-2.8-0.6-4.4-0.6
    		c-1.8,0-3.5,0.3-5.3,1c-1.8,0.7-3.3,1.7-4.7,3.1c-1.4,1.4-2.5,3.3-3.4,5.6s-1.3,5.1-1.3,8.4c0,3.3,0.4,6.1,1.3,8.4s2,4.2,3.4,5.6
    		c1.4,1.4,3,2.5,4.7,3.1c1.8,0.7,3.5,1,5.3,1c1.6,0,3.1-0.2,4.4-0.6c1.3-0.4,2.5-0.9,3.5-1.6c1-0.7,1.8-1.5,2.5-2.3
    		c0.7-0.9,1.1-1.8,1.4-2.7c0.3-1,0.8-1.7,1.5-2.1c0.7-0.4,1.4-0.6,2.2-0.6c1.1,0,2.2,0.4,3.1,1.1c0.9,0.7,1.4,1.7,1.4,3
    		c0,0.6-0.3,1.7-0.9,3.1c-0.6,1.5-1.6,2.9-3.1,4.4c-1.5,1.5-3.5,2.8-6.2,4c-2.6,1.1-6,1.7-10,1.7C375.1,99.2,372,98.5,369.1,97.3z"
    		/>
    </g>
</svg>
						</div>
					</a>
				</h1>
			</div>
		</div>
		<div class="4u 6u(small) 6u(xsmall) text-right">
			<!-- <div class="mobile-menu-wrapper"> -->
				<ul class="m-shortcuts">
					
					<li><a href="#" class="m-search" id="header-search"></a></li>
					
					<li><a href="/guide" class="m-docs" id="mobile-docs"></a></li>
					
					<li><a href="/contact" class="m-contact" id="mobile-contact"></a></li>
					
				</ul>	
				<nav class="nav-menu">
					<div class="menu-button">
						<span></span>
					</div>
					<div class="nav-menu-list-wrap">
						<div class="nav-menu-list">
							
								<h3><a href="/products" id="nav_products" >Products</a></h3>

								
								<ul>
									
									<li><a href="/products/elasticsearch" id="nav_elasticsearch" >elasticsearch</a></li>
									
									<li><a href="/found" id="nav_hosted-elasticsearch" >elasticsearch as a service</a></li>
									
									<li><a href="/products/logstash" id="nav_logstash" >logstash</a></li>
									
									<li><a href="/products/kibana" id="nav_kibana" >kibana</a></li>
									
									<li><a href="/products/beats" id="nav_beats" >beats</a></li>
									
									<li><a href="/products/watcher" id="nav_watcher" >watcher</a></li>
									
									<li><a href="/products/shield" id="nav_shield" >shield</a></li>
									
									<li><a href="/products/marvel" id="nav_marvel" >marvel</a></li>
									
									<li><a href="/products/hadoop" id="nav_hadoop" >hadoop</a></li>
									
									<li><a href="/downloads" id="nav_downloads" >downloads</a></li>
									
								</ul>
								
							
								<h3><a href="/subscriptions" id="nav_subscriptions" >Subscriptions</a></h3>

								
							
								<h3><a href="/learn" id="nav_learn" >Learn</a></h3>

								
								<ul>
									
									<li><a href="/guide" id="nav_guide" >docs</a></li>
									
									<li><a href="/videos" id="nav_videos" >videos</a></li>
									
									<li><a href="/training" id="nav_training" >training</a></li>
									
									<li><a href="/services" id="nav_services" >services</a></li>
									
									<li><a href="/blog" id="nav_learn_blog" >blog</a></li>
									
									<li><a href="/elasticon" id="nav_learn_elasticon" >elastic{ON}</a></li>
									
								</ul>
								
							
								<h3><a href="/community" id="nav_community" >Community</a></h3>

								
								<ul>
									
									<li><a href="/community/meetups" id="nav_meetups" >meetups</a></li>
									
									<li><a href="/https:/discuss.elastic.co" id="nav_discuss" target="_blank">discuss</a></li>
									
									<li><a href="/community/codeofconduct" id="nav_codeofconduct" >code of conduct</a></li>
									
								</ul>
								
							
								<h3><a href="/use-cases" id="nav_usecases" >Use Cases</a></h3>

								
							
								<h3><a href="/blog" id="nav_blog" >Blog</a></h3>

								
								<ul>
									
									<li><a href="/blog/category/news" id="blog_news" >News</a></li>
									
									<li><a href="/blog/category/engineering" id="blog_engineering" >Engineering</a></li>
									
									<li><a href="/blog/category/user-stories" id="blog_user-stories" >User Stories</a></li>
									
									<li><a href="/blog/category/releases" id="blog_releases" >Releases</a></li>
									
									<li><a href="/blog/archive" id="blog_archive" >Archive</a></li>
									
								</ul>
								
							
								<h3><a href="/about" id="nav_about" >About</a></h3>

								
								<ul>
									
									<li><a href="/about/leadership" id="nav_leadership" >leadership</a></li>
									
									<li><a href="/about/board" id="nav_board" >board of directors</a></li>
									
									<li><a href="/about/careers" id="nav_careers" >careers</a></li>
									
									<li><a href="/about/partners" id="nav_partners" >partners</a></li>
									
									<li><a href="/about/press" id="nav_press" >press</a></li>
									
								</ul>
								
							
						</div>
					</div>
				</nav>
			<!-- </div> -->
		</div>
	</div>
</div>
<!-- Mobile Menu -->


		</div>
	</div>
</div>
<div class="header-search-wrapper">	
	<div class="container">
		<div class="big-search">
			<i class="big-search-icon"></i>
			<form method="get" action="/search" autocomplete="on" name="searchForm" id="searchfrm">
				<ul class="tags-wrapper">
					<li class="search-field"><input type="text" class="form-control global-input" id="autocomplete" name="q"></li>
				</ul>
			</form>
			<a href="#" class="header-search-cancel"></a>
		</div>
		<div class="nav-auto-complete"></div>
	</div>
</div>
<style>	
	
	
		.m-shortcuts li a.m-search {
			background: url("https://static-www.elastic.co/assets/blt174b13be89ff803c/m-search-icon.png?q=100") no-repeat scroll center center rgba(0, 0, 0, 0);
			background-size: contain;}
	
		.m-shortcuts li a.m-docs {
			background: url("https://static-www.elastic.co/assets/blt5ba03f594a7d610a/m-guide-icon.png?q=100") no-repeat scroll center center rgba(0, 0, 0, 0);
			background-size: contain;}
	
		.m-shortcuts li a.m-contact {
			background: url("https://static-www.elastic.co/assets/blt38c3e853c4b1174d/m-contact-icon.png?q=100") no-repeat scroll center center rgba(0, 0, 0, 0);
			background-size: contain;}
		
</style>
		</div>
	</div>
  	<div id="content">
  		
  			
            <div id="pageheader">
    <div class="container">
        <header>
            <h1><a href="/learn" title="Learn">Learn</a> |</h1>
            <h2><a href="/guide" title="Docs">Docs</a></h2>
        </header>
    </div>
</div>
<section id="guide">

            <!-- start body -->
<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch: The Definitive Guide</a></span> » <span class="breadcrumb-link"><a href="modeling-your-data.html">Modeling Your Data </a></span> » <span class="breadcrumb-node">Handling Relationships</span></div><div class="navheader"><span class="prev"><a href="modeling-your-data.html">
              « 
              Modeling Your Data </a>
           
        </span><span class="next">
           
          <a href="nested-objects.html">Nested Objects
               »
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="relations"></a>Handling Relationships</h2></div></div></div><p>In the real world, relationships<a id="id-1.9.3.2.1" class="indexterm"></a> matter: blog posts have comments, bank
accounts have transactions, customers have bank accounts, orders have order
lines, and directories have files and subdirectories.</p><p>Relational databases are specifically designed—and this will not come as a
surprise to you—to manage<a id="id-1.9.3.3.1" class="indexterm"></a>
<a id="id-1.9.3.3.2" class="indexterm"></a> relationships:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Each entity (or <span class="emphasis"><em>row</em></span>, in the relational world) can be uniquely identified
    by a <span class="emphasis"><em>primary key</em></span>.<a id="id-1.9.3.4.1.1.3" class="indexterm"></a>
</li><li class="listitem">
Entities are <span class="emphasis"><em>normalized</em></span>. The data for a unique entity is stored only
    once, and related entities store just its primary key. Changing the data of
    an entity has to happen in only one place.<a id="id-1.9.3.4.2.1.2" class="indexterm"></a>
<a id="id-1.9.3.4.2.1.3" class="indexterm"></a>
</li><li class="listitem">
Entities can be joined at query time, allowing for cross-entity search.
</li><li class="listitem">
Changes to a single entity are <span class="emphasis"><em>atomic</em></span>, <span class="emphasis"><em>consistent</em></span>, <span class="emphasis"><em>isolated</em></span>, and
    <span class="emphasis"><em>durable</em></span>.  (See <a class="ulink" href="http://en.wikipedia.org/wiki/ACID_transactions" target="_top"><span class="emphasis"><em>ACID Transactions</em></span></a>
    for more on this subject.)
</li><li class="listitem">
Most relational databases support ACID transactions across multiple
    entities.
</li></ul></div><p>But relational <a id="id-1.9.3.5.1" class="indexterm"></a>databases do have their limitations, besides their poor support
for full-text search. Joining entities at query time is expensive—more
joins that are required, the more expensive the query.  Performing joins
between entities that live on different hardware is so expensive that it is
just not practical. This places a limit on the amount of data that can be
stored on a single server.</p><p>Elasticsearch, like<a id="id-1.9.3.6.1" class="indexterm"></a> most NoSQL databases, treats the world as though it were
flat. An index is a flat collection of independent documents.<a id="id-1.9.3.6.2" class="indexterm"></a> A single
document should contain all of the information that is required to decide
whether it matches a search request.</p><p>While changing the data of a single document in Elasticsearch is
<a class="ulink" href="http://en.wikipedia.org/wiki/ACID_transactions" target="_top">ACIDic</a>, transactions
involving multiple documents are not.  There is no way to roll back the index
to its previous state if part of a transaction fails.</p><p>This FlatWorld has its advantages:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Indexing is fast and lock-free.
</li><li class="listitem">
Searching is fast and lock-free.
</li><li class="listitem">
Massive amounts of data can be spread across multiple nodes, because each
   document is independent of the others.
</li></ul></div><p>But relationships matter.  Somehow, we need to bridge the gap between
FlatWorld and the real world.<a id="id-1.9.3.10.1" class="indexterm"></a>
<a id="id-1.9.3.10.2" class="indexterm"></a> Four common techniques are used to manage
relational data in Elasticsearch:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<a class="link" href="relations.html#application-joins" title="Application-side Joins">Application-side joins</a>
</li><li class="listitem">
<a class="link" href="relations.html#denormalization" title="Denormalizing Your Data">Data denormalization</a>
</li><li class="listitem">
<a class="link" href="nested-objects.html" title="Nested Objects">Nested objects</a>
</li><li class="listitem">
<a class="link" href="parent-child.html" title="Parent-Child Relationship">Parent/child relationships</a>
</li></ul></div><p>Often the final solution will require a mixture of a few of these techniques.</p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="application-joins"></a>Application-side Joins</h2></div></div></div><p>We can (partly) emulate a relational<a id="id-1.9.3.13.2.1" class="indexterm"></a>
<a id="id-1.9.3.13.2.2" class="indexterm"></a><a id="id-1.9.3.13.2.3" class="indexterm"></a> database by implementing joins in our
application. <a id="id-1.9.3.13.2.4" class="indexterm"></a>
<a id="id-1.9.3.13.2.5" class="indexterm"></a>For instance, let’s say we are indexing users and their
blog posts.  In the relational world, we would do something like this:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-json">PUT /my_index/user/1 <a id="CO253-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
{
  "name":     "John Smith",
  "email":    "john@smith.com",
  "dob":      "1970/10/24"
}

PUT /my_index/blogpost/2 <a id="CO253-2"></a><span><img src="images/icons/callouts/2.png" alt="" /></span>
{
  "title":    "Relationships",
  "body":     "It's complicated...",
  "user":     1 <a id="CO253-3"></a><span><img src="images/icons/callouts/3.png" alt="" /></span>
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO253-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> <a href="#CO253-2"><span><img src="images/icons/callouts/2.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The <code class="literal">index</code>, <code class="literal">type</code>, and <code class="literal">id</code> of each document together function as a primary key.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO253-3"><span><img src="images/icons/callouts/3.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The <code class="literal">blogpost</code> links to the user by storing the user’s <code class="literal">id</code>.  The <code class="literal">index</code>
    and <code class="literal">type</code> aren’t required as they are hardcoded in our application.
</p></td></tr></table></div><p>Finding blog posts by user with ID <code class="literal">1</code> is easy:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-json">GET /my_index/blogpost/_search
{
  "query": {
    "filtered": {
      "filter": {
        "term": { "user": 1 }
      }
    }
  }
}</pre></div><p>To find blogposts by a user called John, we would need to run two queries:
the first would look up all users called John in order to find their IDs,
and the second would pass those IDs in a query similar to the preceding one:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-json">GET /my_index/user/_search
{
  "query": {
    "match": {
      "name": "John"
    }
  }
}

GET /my_index/blogpost/_search
{
  "query": {
    "filtered": {
      "filter": {
        "terms": { "user": [1] }  <a id="CO254-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
      }
    }
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO254-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The values in the <code class="literal">terms</code> filter would be populated with the results from
    the first query.
</p></td></tr></table></div><p>The main advantage of application-side joins is that the data is normalized.
Changing the user’s name has to happen in only one place: the <code class="literal">user</code> document.
The disadvantage is that you have to run extra queries in order to join documents at search time.</p><p>In this example, there was only one user who matched our first query, but in
the real world we could easily have millions of users named John.
Including all of their IDs in the second query would make for a very large
query, and one that has to do millions of term lookups.</p><p>This approach is suitable when the first entity (the <code class="literal">user</code> in this example)
has a small number of documents and, preferably, they seldom change. This
would allow the application to cache the results and avoid running the first
query often.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="denormalization"></a>Denormalizing Your Data</h2></div></div></div><p>The way to get the best search performance out of Elasticsearch is to use it
as it is intended, by<a id="id-1.9.3.14.2.1" class="indexterm"></a>
<a id="id-1.9.3.14.2.2" class="indexterm"></a><a id="id-1.9.3.14.2.3" class="indexterm"></a>
<a id="id-1.9.3.14.2.4" class="indexterm"></a>
<a class="ulink" href="http://en.wikipedia.org/wiki/Denormalization" target="_top">denormalizing</a> your data at index
time. Having redundant copies of data in each document that requires access to
it removes the need for joins.</p><p>If we want to be able to find a blog post by the name of the user who wrote it,
include the user’s name in the blog-post document itself:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-json">PUT /my_index/user/1
{
  "name":     "John Smith",
  "email":    "john@smith.com",
  "dob":      "1970/10/24"
}

PUT /my_index/blogpost/2
{
  "title":    "Relationships",
  "body":     "It's complicated...",
  "user":     {
    "id":       1,
    "name":     "John Smith" <a id="CO255-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO255-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
Part of the user’s data has been denormalized into the <code class="literal">blogpost</code> document.
</p></td></tr></table></div><p>Now, we can find blog posts about <code class="literal">relationships</code> by users called <code class="literal">John</code>
with a single query:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-json">GET /my_index/blogpost/_search
{
  "query": {
    "bool": {
      "must": [
        { "match": { "title":     "relationships" }},
        { "match": { "user.name": "John"          }}
      ]
    }
  }
}</pre></div><p>The advantage of data denormalization is speed.  Because each document
contains all of the information that is required to determine whether it
matches the query, there is no need for expensive joins.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="top-hits"></a>Field Collapsing</h2></div></div></div><p>A common requirement is the need to present search results grouped by a particular
field. <a id="id-1.9.3.15.2.1" class="indexterm"></a><a id="id-1.9.3.15.2.2" class="indexterm"></a>
<a id="id-1.9.3.15.2.3" class="indexterm"></a>We might want to return the most relevant blog posts <span class="emphasis"><em>grouped</em></span> by the
user’s name. <a id="id-1.9.3.15.2.5" class="indexterm"></a><a id="id-1.9.3.15.2.6" class="indexterm"></a>
<a id="id-1.9.3.15.2.7" class="indexterm"></a> Grouping by name implies the need for a <code class="literal">terms</code> aggregation.  To
be able to group on the user’s <span class="emphasis"><em>whole</em></span> name, the name field should be
available in its original <code class="literal">not_analyzed</code> form, as explained in
<a class="xref" href="controlling-memory.html#aggregations-and-analysis" title="집계와 분석">집계와 분석</a>:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-json">PUT /my_index/_mapping/blogpost
{
  "properties": {
    "user": {
      "properties": {
        "name": { <a id="CO256-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
          "type": "string",
          "fields": {
            "raw": { <a id="CO256-2"></a><span><img src="images/icons/callouts/2.png" alt="" /></span>
              "type":  "string",
              "index": "not_analyzed"
            }
          }
        }
      }
    }
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO256-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The <code class="literal">user.name</code> field will be used for full-text search.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO256-2"><span><img src="images/icons/callouts/2.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The <code class="literal">user.name.raw</code> field will be used for grouping with the <code class="literal">terms</code>
    aggregation.
</p></td></tr></table></div><p>Then add some data:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-json">PUT /my_index/user/1
{
  "name": "John Smith",
  "email": "john@smith.com",
  "dob": "1970/10/24"
}

PUT /my_index/blogpost/2
{
  "title": "Relationships",
  "body": "It's complicated...",
  "user": {
    "id": 1,
    "name": "John Smith"
  }
}

PUT /my_index/user/3
{
  "name": "Alice John",
  "email": "alice@john.com",
  "dob": "1979/01/04"
}

PUT /my_index/blogpost/4
{
  "title": "Relationships are cool",
  "body": "It's not complicated at all...",
  "user": {
    "id": 3,
    "name": "Alice John"
  }
}</pre></div><p>Now we can run a query looking for blog posts about <code class="literal">relationships</code>, by users
called <code class="literal">John</code>, and group the results by user, thanks to the
<a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-metrics-top-hits-aggregation.html" target="_top"><code class="literal">top_hits</code> aggregation</a>:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-json">GET /my_index/blogpost/_search?search_type=count <a id="CO257-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
{
  "query": { <a id="CO257-2"></a><span><img src="images/icons/callouts/2.png" alt="" /></span>
    "bool": {
      "must": [
        { "match": { "title":     "relationships" }},
        { "match": { "user.name": "John"          }}
      ]
    }
  },
  "aggs": {
    "users": {
      "terms": {
        "field":   "user.name.raw",      <a id="CO257-3"></a><span><img src="images/icons/callouts/3.png" alt="" /></span>
        "order": { "top_score": "desc" } <a id="CO257-4"></a><span><img src="images/icons/callouts/4.png" alt="" /></span>
      },
      "aggs": {
        "top_score": { "max":      { "script":  "_score"           }}, <a id="CO257-5"></a><span><img src="images/icons/callouts/5.png" alt="" /></span>
        "blogposts": { "top_hits": { "_source": "title", "size": 5 }}  <a id="CO257-6"></a><span><img src="images/icons/callouts/6.png" alt="" /></span>
      }
    }
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO257-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The blog posts that we are interested in are returned under the
    <code class="literal">blogposts</code> aggregation, so we can disable the usual search <code class="literal">hits</code> by
    setting the <code class="literal">search_type=count</code>.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO257-2"><span><img src="images/icons/callouts/2.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The <code class="literal">query</code> returns blog posts about <code class="literal">relationships</code> by users named <code class="literal">John</code>.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO257-3"><span><img src="images/icons/callouts/3.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The <code class="literal">terms</code> aggregation creates a bucket for each <code class="literal">user.name.raw</code> value.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO257-4"><span><img src="images/icons/callouts/4.png" alt="" /></span></a> <a href="#CO257-5"><span><img src="images/icons/callouts/5.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The <code class="literal">top_score</code> aggregation orders the terms in the <code class="literal">users</code> aggregation
    by the top-scoring document in each bucket.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO257-6"><span><img src="images/icons/callouts/6.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The <code class="literal">top_hits</code> aggregation returns just the <code class="literal">title</code> field of the five most
    relevant blog posts for each user.
</p></td></tr></table></div><p>The abbreviated response is shown here:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-json">...
"hits": {
  "total":     2,
  "max_score": 0,
  "hits":      [] <a id="CO258-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
},
"aggregations": {
  "users": {
     "buckets": [
        {
           "key":       "John Smith", <a id="CO258-2"></a><span><img src="images/icons/callouts/2.png" alt="" /></span>
           "doc_count": 1,
           "blogposts": {
              "hits": { <a id="CO258-3"></a><span><img src="images/icons/callouts/3.png" alt="" /></span>
                 "total":     1,
                 "max_score": 0.35258877,
                 "hits": [
                    {
                       "_index": "my_index",
                       "_type":  "blogpost",
                       "_id":    "2",
                       "_score": 0.35258877,
                       "_source": {
                          "title": "Relationships"
                       }
                    }
                 ]
              }
           },
           "top_score": { <a id="CO258-4"></a><span><img src="images/icons/callouts/4.png" alt="" /></span>
              "value": 0.3525887727737427
           }
        },
...</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO258-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The <code class="literal">hits</code> array is empty because we set <code class="literal">search_type=count</code>.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO258-2"><span><img src="images/icons/callouts/2.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
There is a bucket for each user who appeared in the top results.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO258-3"><span><img src="images/icons/callouts/3.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
Under each user bucket there is a <code class="literal">blogposts.hits</code> array containing
    the top results for that user.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO258-4"><span><img src="images/icons/callouts/4.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The user buckets are sorted by the user’s most relevant blog post.
</p></td></tr></table></div><p>Using the <code class="literal">top_hits</code> aggregation is the<a id="id-1.9.3.15.13.2" class="indexterm"></a> equivalent of running a query to
return the names of the users with the most relevant blog posts, and then running
the same query for each user, to get their best blog posts. But it is much more
efficient.</p><p>The top hits returned in each bucket are the result of running a light
<span class="emphasis"><em>mini-query</em></span> based on the original main query.  The mini-query supports the
usual features that you would expect from search such as highlighting and
pagination.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="denormalization-concurrency"></a>Denormalization and Concurrency</h2></div></div></div><p>Of course, data denormalization has downsides too.<a id="id-1.9.3.16.2.1" class="indexterm"></a>
<a id="id-1.9.3.16.2.2" class="indexterm"></a><a id="id-1.9.3.16.2.3" class="indexterm"></a>
<a id="id-1.9.3.16.2.4" class="indexterm"></a><a id="id-1.9.3.16.2.5" class="indexterm"></a>
<a id="id-1.9.3.16.2.6" class="indexterm"></a>  The first disadvantage is
that  the index will be bigger because the <code class="literal">_source</code> document for every
blog post is bigger, and there are more indexed fields.  This usually isn’t a
huge problem.  The data written to disk is highly compressed, and disk space
is cheap. Elasticsearch can happily cope with the extra data.</p><p>The more important issue is that, if the user were to change his name, all
of his blog posts would need to be updated too. Fortunately, users don’t
often change names.  Even if they did, it is unlikely that a user would have
written more than a few thousand blog posts, so updating blog posts with
the <a class="link" href="distributed-search.html#scan-scroll" title="scan and scroll"><code class="literal">scroll</code></a> and <a class="link" href="data-in-data-out.html#bulk" title="비용이 저렴한 bulk"><code class="literal">bulk</code></a> APIs would take less than a
second.</p><p>However, let’s consider a more complex scenario in which changes are common, far
reaching, and, most important, concurrent.<a id="id-1.9.3.16.4.1" class="indexterm"></a>
<a id="id-1.9.3.16.4.2" class="indexterm"></a></p><p>In this example, we are going to emulate a filesystem with directory trees in
Elasticsearch, much like a filesystem on Linux: the root of the directory is
<code class="literal">/</code>, and each directory can contain files and subdirectories.</p><p>We want to be able to search for files that live in a particular directory,
the equivalent of this:</p><pre class="literallayout">grep "some text" /clinton/projects/elasticsearch/*</pre><p>This requires us to index the path of the directory where the file lives:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-json">PUT /fs/file/1
{
  "name":     "README.txt", <a id="CO259-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
  "path":     "/clinton/projects/elasticsearch", <a id="CO259-2"></a><span><img src="images/icons/callouts/2.png" alt="" /></span>
  "contents": "Starting a new Elasticsearch project is easy..."
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO259-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The filename
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO259-2"><span><img src="images/icons/callouts/2.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The full path to the directory holding the file
</p></td></tr></table></div><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>Really, we should also index <code class="literal">directory</code> documents so we can list all
files and subdirectories within a directory, but for brevity’s sake, we will
ignore that requirement.</p></div></div><p>We also want to be able to search for files that live anywhere in the
directory tree below a particular directory, the equivalent of this:</p><pre class="literallayout">grep -r "some text" /clinton</pre><p>To support this, we need to index the path hierarchy:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<code class="literal">/clinton</code>
</li><li class="listitem">
<code class="literal">/clinton/projects</code>
</li><li class="listitem">
<code class="literal">/clinton/projects/elasticsearch</code>
</li></ul></div><p>This hierarchy can be generated <a id="id-1.9.3.16.16.1" class="indexterm"></a>automatically from the <code class="literal">path</code> field using the
<a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-pathhierarchy-tokenizer.html" target="_top"><code class="literal">path_hierarchy</code> tokenizer</a>:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-json">PUT /fs
{
  "settings": {
    "analysis": {
      "analyzer": {
        "paths": { <a id="CO260-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
          "tokenizer": "path_hierarchy"
        }
      }
    }
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO260-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The custom <code class="literal">paths</code> analyzer uses the <a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-pathhierarchy-tokenizer.html" target="_top"><code class="literal">path_hierarchy</code> tokenizer</a> with its default settings.
</p></td></tr></table></div><p>The mapping for the <code class="literal">file</code> type would look like this:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-json">PUT /fs/_mapping/file
{
  "properties": {
    "name": { <a id="CO261-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
      "type":  "string",
      "index": "not_analyzed"
    },
    "path": { <a id="CO261-2"></a><span><img src="images/icons/callouts/2.png" alt="" /></span>
      "type":  "string",
      "index": "not_analyzed",
      "fields": {
        "tree": { <a id="CO261-3"></a><span><img src="images/icons/callouts/3.png" alt="" /></span>
          "type":     "string",
          "analyzer": "paths"
        }
      }
    }
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO261-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The <code class="literal">name</code> field will contain the exact name.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO261-2"><span><img src="images/icons/callouts/2.png" alt="" /></span></a> <a href="#CO261-3"><span><img src="images/icons/callouts/3.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The <code class="literal">path</code> field will contain the exact directory name, while the <code class="literal">path.tree</code>
    field will contain the path hierarchy.
</p></td></tr></table></div><p>Once the index is set up and the files have been indexed, we can perform a
search for files containing <code class="literal">elasticsearch</code> in just the
<code class="literal">/clinton/projects/elasticsearch</code> directory like this:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-json">GET /fs/file/_search
{
  "query": {
    "filtered": {
      "query": {
        "match": {
          "contents": "elasticsearch"
        }
      },
      "filter": {
        "term": { <a id="CO262-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
          "path": "/clinton/projects/elasticsearch"
        }
      }
    }
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO262-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
Find files in this directory only.
</p></td></tr></table></div><p>Every file that lives in any subdirectory under <code class="literal">/clinton</code> will include the
term <code class="literal">/clinton</code> in the <code class="literal">path.tree</code> field.  So we can search for all files in
any subdirectory of <code class="literal">/clinton</code> as follows:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-json">GET /fs/file/_search
{
  "query": {
    "filtered": {
      "query": {
        "match": {
          "contents": "elasticsearch"
        }
      },
      "filter": {
        "term": { <a id="CO263-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
          "path.tree": "/clinton"
        }
      }
    }
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO263-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
Find files in this directory or in any of its subdirectories.
</p></td></tr></table></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_renaming_files_and_directories"></a>Renaming Files and Directories</h3></div></div></div><p>So far, so good.<a id="id-1.9.3.16.28.2.1" class="indexterm"></a><a id="id-1.9.3.16.28.2.2" class="indexterm"></a>
<a id="id-1.9.3.16.28.2.3" class="indexterm"></a>  Renaming a file is easy—a simple <code class="literal">update</code> or <code class="literal">index</code>
request is all that is required.  You can even use
<a class="link" href="data-in-data-out.html#optimistic-concurrency-control" title="낙관적인 동시성 제어">optimistic concurrency control</a> to
ensure that your change doesn’t conflict with the changes from another user:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-json">PUT /fs/file/1?version=2 <a id="CO264-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
{
  "name":     "README.asciidoc",
  "path":     "/clinton/projects/elasticsearch",
  "contents": "Starting a new Elasticsearch project is easy..."
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO264-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The <code class="literal">version</code> number ensures that the change is applied only if the
    document in the index has this same version number.
</p></td></tr></table></div><p>We can even rename a directory, but this means updating all of the files that
exist anywhere in the path hierarchy beneath that directory.  This may be
quick or slow, depending on how many files need to be updated.  All we would
need to do is to use <a class="link" href="distributed-search.html#scan-scroll" title="scan and scroll">scan-and-scroll</a> to retrieve all the
files, and the <a class="link" href="data-in-data-out.html#bulk" title="비용이 저렴한 bulk"><code class="literal">bulk</code> API</a> to update them.  The process isn’t
atomic, but all files will quickly move to their new home.</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="concurrency-solutions"></a>Solving Concurrency Issues</h2></div></div></div><p>The problem comes when we want to allow more than one person to rename files
or directories <span class="emphasis"><em>at the same time</em></span>. <a id="id-1.9.3.17.2.2" class="indexterm"></a>
<a id="id-1.9.3.17.2.3" class="indexterm"></a><a id="id-1.9.3.17.2.4" class="indexterm"></a>
<a id="id-1.9.3.17.2.5" class="indexterm"></a> Imagine that you rename the <code class="literal">/clinton</code>
directory, which contains hundreds of thousands of files.  Meanwhile, another
user renames the single file <code class="literal">/clinton/projects/elasticsearch/README.txt</code>.
That user’s change, although it started after yours, will probably finish more
quickly.</p><p>One of two things will happen:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
You have decided to use <code class="literal">version</code> numbers, in which case your mass rename
    will fail with a version conflict when it hits the renamed
    <code class="literal">README.asciidoc</code> file.
</li><li class="listitem">
You didn’t use versioning, and your changes will overwrite the changes from
    the other user.
</li></ul></div><p>The problem is that Elasticsearch does not support
<a class="ulink" href="http://en.wikipedia.org/wiki/ACID_transactions" target="_top">ACID transactions</a>.<a id="id-1.9.3.17.5.2" class="indexterm"></a>  Changes to
individual documents are ACIDic, but not changes involving multiple documents.</p><p>If your main data store is a relational database, and Elasticsearch is simply
being used as a search engine<a id="id-1.9.3.17.6.1" class="indexterm"></a>
<a id="id-1.9.3.17.6.2" class="indexterm"></a> or as a way to improve performance, make
your changes in the database first and replicate those changes to
Elasticsearch after they have succeeded. This way, you benefit from the ACID
transactions available in the database, and all changes to Elasticsearch happen
in the right order. Concurrency is dealt with in the relational database.</p><p>If you are not using a relational store, these concurrency issues need to
be dealt with at the Elasticsearch level.  The following are three practical
solutions using Elasticsearch, all of which involve some form of locking:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Global Locking
</li><li class="listitem">
Document Locking
</li><li class="listitem">
Tree Locking
</li></ul></div><div class="tip admon"><div class="icon"><img alt="Tip" src="images/icons/tip.png" /></div><div class="admon_content"><p>The solutions described in this section could also be implemented by applying the same
principles while using an external system instead of Elasticsearch.</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="global-lock"></a>Global Locking</h3></div></div></div><p>We can avoid concurrency issues completely by allowing only one process to
make changes at any time.<a id="id-1.9.3.17.10.2.1" class="indexterm"></a>
<a id="id-1.9.3.17.10.2.2" class="indexterm"></a><a id="id-1.9.3.17.10.2.3" class="indexterm"></a>  Most changes will involve only a few files and will
complete very quickly.  A rename of a top-level directory may block all other
changes for longer, but these are likely to be much less frequent.</p><p>Because document-level changes in Elasticsearch are ACIDic, we can use the
existence or absence of a document as a global lock.  To request a
lock, we try to <code class="literal">create</code> the global-lock document:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-json">PUT /fs/lock/global/_create
{}</pre></div><p>If this <code class="literal">create</code> request fails with a conflict exception,
another process has already been granted the global lock and we will have to
try again later.  If it succeeds, we are now the proud owners of the
global lock and we can continue with our changes.  Once we are finished, we
must release the lock by deleting the global lock document:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-json">DELETE /fs/lock/global</pre></div><p>Depending on how frequent changes are, and how long they take, a global lock
could restrict the performance of a system significantly.  We can increase
parallelism by making our locking more fine-grained.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="document-locking"></a>Document Locking</h3></div></div></div><p>Instead of locking the whole filesystem, we could lock individual documents
by using the same technique as previously described.<a id="id-1.9.3.17.11.2.1" class="indexterm"></a>
<a id="id-1.9.3.17.11.2.2" class="indexterm"></a><a id="id-1.9.3.17.11.2.3" class="indexterm"></a>  A process could use a
<a class="link" href="distributed-search.html#scan-scroll" title="scan and scroll">scan-and-scroll</a> request to retrieve the IDs of all documents
that would be affected by the change, and would need to create a lock file for
each of them:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-json">PUT /fs/lock/_bulk
{ "create": { "_id": 1}} <a id="CO265-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
{ "process_id": 123    } <a id="CO265-2"></a><span><img src="images/icons/callouts/2.png" alt="" /></span>
{ "create": { "_id": 2}}
{ "process_id": 123    }
...</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO265-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The ID of the <code class="literal">lock</code> document would be the same as the ID of  the file
    that should be locked.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO265-2"><span><img src="images/icons/callouts/2.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The <code class="literal">process_id</code> is a unique ID that represents the process that
    wants to perform the changes.
</p></td></tr></table></div><p>If some files are already locked, parts of the <code class="literal">bulk</code> request will fail and we
will have to try again.</p><p>Of course, if we try to lock <span class="emphasis"><em>all</em></span> of the files again, the <code class="literal">create</code> statements
that we used previously will fail for any file that is already locked by us!
Instead of a simple <code class="literal">create</code> statement, we need an <code class="literal">update</code> request with an
<code class="literal">upsert</code> parameter and this <code class="literal">script</code>:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-groovy">if ( ctx._source.process_id != process_id ) { <a id="CO266-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
  assert false;  <a id="CO266-2"></a><span><img src="images/icons/callouts/2.png" alt="" /></span>
}
ctx.op = 'noop'; <a id="CO266-3"></a><span><img src="images/icons/callouts/3.png" alt="" /></span></pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO266-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
<code class="literal">process_id</code> is a parameter that we pass into the script.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO266-2"><span><img src="images/icons/callouts/2.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
<code class="literal">assert false</code> will throw an exception, causing the update to fail.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO266-3"><span><img src="images/icons/callouts/3.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
Changing the <code class="literal">op</code> from <code class="literal">update</code> to <code class="literal">noop</code> prevents the update request
    from making any changes, but still returns success.
</p></td></tr></table></div><p>The full <code class="literal">update</code> request looks like this:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-json">POST /fs/lock/1/_update
{
  "upsert": { "process_id": 123 },
  "script": "if ( ctx._source.process_id != process_id )
  { assert false }; ctx.op = 'noop';"
  "params": {
    "process_id": 123
  }
}</pre></div><p>If the document doesn’t already exist, the <code class="literal">upsert</code> document will be inserted—much the same as the <code class="literal">create</code> request we used previously.  However, if the
document <span class="emphasis"><em>does</em></span> exist, the script will look at the <code class="literal">process_id</code> stored in the
document.  If it is the same as ours, it aborts the update (<code class="literal">noop</code>) and
returns success.  If it is different, the <code class="literal">assert false</code> throws an exception
and we know that the lock has failed.</p><p>Once all locks have been successfully created, the rename operation can begin.
Afterward, we must release<a id="id-1.9.3.17.11.12.1" class="indexterm"></a> all of the locks, which we can do with a
<code class="literal">delete-by-query</code> request:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-json">POST /fs/_refresh <a id="CO267-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>

DELETE /fs/lock/_query
{
  "query": {
    "term": {
      "process_id": 123
    }
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO267-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The <code class="literal">refresh</code> call ensures that all <code class="literal">lock</code> documents are visible to
    the <code class="literal">delete-by-query</code> request.
</p></td></tr></table></div><p>Document-level locking enables fine-grained access control, but creating lock
files for millions of documents can be expensive.  In certain scenarios, such
as this example with directory trees, it is possible to achieve fine-grained
locking with much less work.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="tree-locking"></a>Tree Locking</h3></div></div></div><p>Rather than locking every involved document, as in the previous option, we
could lock just part of the directory tree.<a id="id-1.9.3.17.12.2.1" class="indexterm"></a>
<a id="id-1.9.3.17.12.2.2" class="indexterm"></a>  We will need exclusive access
to the file or directory that we want to rename, which can be achieved with an
<span class="emphasis"><em>exclusive lock</em></span> document:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-json">{ "lock_type": "exclusive" }</pre></div><p>And we need shared locks on any parent directories, with a <span class="emphasis"><em>shared lock</em></span>
document:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-json">{
  "lock_type":  "shared",
  "lock_count": 1 <a id="CO268-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO268-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The <code class="literal">lock_count</code> records the number of processes that hold a shared lock.
</p></td></tr></table></div><p>A process that wants to rename <code class="literal">/clinton/projects/elasticsearch/README.txt</code>
needs an <span class="emphasis"><em>exclusive</em></span> lock on that file, and a <span class="emphasis"><em>shared</em></span> lock on <code class="literal">/clinton</code>,
<code class="literal">/clinton/projects</code>, and <code class="literal">/clinton/projects/elasticsearch</code>.</p><p>A simple <code class="literal">create</code> request will suffice for the exclusive lock, but the shared
lock needs a scripted update to implement some extra logic:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-groovy">if (ctx._source.lock_type == 'exclusive') {
  assert false; <a id="CO269-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
}
ctx._source.lock_count++ <a id="CO269-2"></a><span><img src="images/icons/callouts/2.png" alt="" /></span></pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO269-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
If the <code class="literal">lock_type</code> is <code class="literal">exclusive</code>, the <code class="literal">assert</code> statement will throw
    an exception, causing the update request to fail.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO269-2"><span><img src="images/icons/callouts/2.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
Otherwise, we increment the <code class="literal">lock_count</code>.
</p></td></tr></table></div><p>This script handles the case where the <code class="literal">lock</code> document already exists, but we
will also need an <code class="literal">upsert</code> document to handle the case where it doesn’t exist
yet. The full update request is as follows:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-json">POST /fs/lock/%2Fclinton/_update <a id="CO270-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
{
  "upsert": { <a id="CO270-2"></a><span><img src="images/icons/callouts/2.png" alt="" /></span>
    "lock_type":  "shared",
    "lock_count": 1
  },
  "script": "if (ctx._source.lock_type == 'exclusive')
  { assert false }; ctx._source.lock_count++"
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO270-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The ID of the document is <code class="literal">/clinton</code>, which is URL-encoded to <code class="literal">%2fclinton</code>.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO270-2"><span><img src="images/icons/callouts/2.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The <code class="literal">upsert</code> document will be inserted if the document does not already
    exist.
</p></td></tr></table></div><p>Once we succeed in gaining a shared lock on all of the parent directories, we
try to <code class="literal">create</code> an exclusive lock on the file itself:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-json">PUT /fs/lock/%2Fclinton%2fprojects%2felasticsearch%2fREADME.txt/_create
{ "lock_type": "exclusive" }</pre></div><p>Now, if somebody else wants to rename the <code class="literal">/clinton</code> directory, they would
have to gain an exclusive lock on that path:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-json">PUT /fs/lock/%2Fclinton/_create
{ "lock_type": "exclusive" }</pre></div><p>This request would fail because a <code class="literal">lock</code> document with the same ID already
exists. The other user would have to wait until our operation is done and we
have released our locks. The exclusive lock can just be deleted:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-json">DELETE /fs/lock/%2Fclinton%2fprojects%2felasticsearch%2fREADME.txt</pre></div><p>The shared locks need another script that decrements the <code class="literal">lock_count</code> and, if
the count drops to zero, deletes the <code class="literal">lock</code> document:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-groovy">if (--ctx._source.lock_count == 0) {
  ctx.op = 'delete' <a id="CO271-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO271-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
Once the <code class="literal">lock_count</code> reaches <code class="literal">0</code>, the <code class="literal">ctx.op</code> is changed from <code class="literal">update</code>
    to <code class="literal">delete</code>.
</p></td></tr></table></div><p>This update request would need to be run for each parent directory in reverse
order, from longest to shortest:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-json">POST /fs/lock/%2Fclinton%2fprojects%2felasticsearch/_update
{
  "script": "if (--ctx._source.lock_count == 0) { ctx.op = 'delete' } "
}</pre></div><p>Tree locking gives us fine-grained concurrency control with the minimum of
effort. Of course, it is not applicable to every situation—the data model
must have some sort of access path like the directory tree for it to work.</p><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>None of the three options—global, document, or tree locking—deals with
the thorniest problem associated with locking: what happens if the process
holding the lock dies?</p><p>The unexpected death of a process leaves us with two problems:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
How do we know that we can release the locks held by the dead process?
</li><li class="listitem">
How do we clean up the change that the dead process did not manage to complete?
</li></ul></div><p>These topics are beyond the scope of this book, but you will need to give them
some thought  if you decide to use locking.</p></div></div><p>While denormalization is a good choice for many projects, the need for locking
schemes can make for complicated implementations. Instead, Elasticsearch
provides two models that help us deal with related entities:
<span class="emphasis"><em>nested objects</em></span> and <span class="emphasis"><em>parent-child relationships</em></span>.</p></div></div></div><div class="navfooter"><span class="prev"><a href="modeling-your-data.html">
              « 
              Modeling Your Data </a>
           
        </span><span class="next">
           
          <a href="nested-objects.html">Nested Objects
               »
            </a></span></div>
<!-- end body -->

            </section>

            <div id="rtpcontainer"
        >
	<h3>Top Videos</h3>
	<ul class="lists">
		<li><a href="https://www.elastic.co/webinars/get-started-with-elasticsearch/?baymax=default&elektra=docs&storm=top-video">Getting Started</a></li>
		<li><a href="http://www.elastic.co/webinars/elasticsearch-performance-optimization-tale-two-tickets/?elektra=docs">Scaling</a></li>
		<li><a href="http://www.elastic.co/webinars/shield-securing-your-data-in-elasticsearch/?elektra=docs">Security</a></li>
	</ul>
</div>


	  	




<script src="//app-lon02.marketo.com/js/forms2/js/forms2.min.js"></script>
	<!-- subscribe-newsletter -->
	<div id="subscribe-newsletter">
		<div class="container">
			<div class="row">
				<div class="12u">
					<div class="subscribe-wrapper" id="rtp-newsletter">
						<header>
							<h3>Subscribe to our newsletter</h3>
						</header>
						<div class="subscribe-form">
							<form id="mktoForm_1398" class="container"></form>
							<div class="form_thanks hide">
								
									<p>Thanks for subscribing! We'll keep you updated with new releases.</p>
								
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

  	<!-- Footer -->
	<div id="footer-wrapper">
		<section id="footer" class="container">
			<div class="row">
				<div class="12u">
					<!-- Copyright -->
					<div id="copyright">
	<p>
		© 2016. All Rights Reserved - Elasticsearch
	</p>
	<ul class="links">
		<li>Elasticsearch is a trademark of Elasticsearch BV, registered in the U.S. and in other countries</li>
		<li><a href="/legal/trademarks" id="footer_trademarks">Trademarks</a></li>
		<li><a href="/legal/terms-of-use" id="footer_terms">Terms</a></li>
		<li><a href="/legal/privacy-policy" id="footer_privacy">Privacy</a></li>
	</ul>
	<p>
		Apache, Apache Lucene, Apache Hadoop, Hadoop, HDFS and the yellow elephant logo are trademarks of the <a href="http://www.apache.org/" target="_blank">Apache Software Foundation</a> in the United States and/or other&nbsp;countries.
	</p>
</div><!--<div class="row">
{replace4}
</div>-->
				</div>
			</div>					
		</section>
	</div>
			
	<!-- Social Media -->
	<div id="socialmedia-wrapper">
		<section id="socialmedia" class="container">
			<!-- social icons -->
			<div id="social">
				<ul class="links">
					
						<li class="facebook grayscale"><a href="http://www.facebook.com/elastic.co" target="_blank" id="footer_facebook"></a></li>
					
						<li class="twitter grayscale"><a href="https://www.twitter.com/elastic" target="_blank" id="footer_twitter"></a></li>
					
						<li class="linkedin grayscale"><a href="https://www.linkedin.com/company/elastic-co" target="_blank" id="footer_linkedin"></a></li>
					
						<li class="xing grayscale"><a href="https://www.xing.com/companies/elastic.co" target="_blank" id="footer_xing"></a></li>
					
						<li class="youtube grayscale"><a href="https://www.youtube.com/user/elasticsearch" target="_blank" id="footer_youtube"></a></li>
					
				</ul>
			</div>
		</section>
	</div>


<style type="text/css">
	
		.facebook{background:url("https://static-www.elastic.co/assets/bltda40eebd7c7cae9a/facebook.svg?q=100") no-repeat;}		
	
		.twitter{background:url("https://static-www.elastic.co/assets/bltfd3b1511512f4632/twitter.svg?q=100") no-repeat;}		
	
		.linkedin{background:url("https://static-www.elastic.co/assets/blt6b4f6f8d6b96f814/linkedin.svg?q=100") no-repeat;}		
	
		.xing{background:url("https://static-www.elastic.co/assets/blta76b2ae2b2f10a98/xing.svg?q=100") no-repeat;}		
	
		.youtube{background:url("https://static-www.elastic.co/assets/blt5761648c9581fb53/youtube.svg?q=100") no-repeat;}		
	
</style>

<script>
MktoForms2.loadForm("//app-lon02.marketo.com", "813-MAM-392", 1398,function(form){
	form.onSuccess(function(form){
		$('#mktoForm_1398').css('display','none');
		$('#subscribe-newsletter header').hide();
		$('#mktoForm_1398').siblings('.form_thanks').removeClass('hide')
		dataLayer.push({'event': 'mktoFormSubmit'});
	    return false;
  	});
});
</script>	

  	</div>
  	<!-- <div class="preloader">
    	<div class="status"></div>
	</div> -->
  	<style></style>
   	<script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";	
</script>
<script src="https://static-www.elastic.co/static/js/jquery.autocomplete.js?q=100"></script>
<script src="https://static-www.elastic.co/static/js/script.js?q=100"></script>


   	
   	
   	
   	<script type="application/ld+json">
	
		
	
	{
	  	"@context": "http://schema.org",
	  	"@type": "Organization",
	  	"name" : "Elastic",
	  	"url": "https://www.elastic.co/",
	  	"logo": "https://www.elastic.co/static/img/elastic-logo-200.png",
		"sameAs" : [ "https://www.facebook.com/elastic.co",
			"https://twitter.com/elastic",
			"https://plus.google.com/105178019064686397293",
			"https://www.youtube.com/user/elasticsearch",
			"https://www.linkedin.com/company/elasticsearch"
		],
	  	"potentialAction": {
	    	"@type": "SearchAction",
	    	"target": "https://www.elastic.co/search?q={query_string}",
	    	"query-input": "required name=query_string"
	  	}
	}
</script>	

            <script type="text/javascript" src="docs.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script type='text/javascript' src='https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js'></script>

            </body>
        



<!DOCTYPE HTML>
<html lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Index Management</title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearch: The Definitive Guide" /><link rel="up" href="getting-started.html" title="Getting Started" /><link rel="prev" href="distributed-search.html" title="Distributed Search Execution" /><link rel="next" href="inside-a-shard.html" title="Inside a Shard" />
  
 	<meta http-equiv="content-type" content="text/html; charset=utf-8" />

 	<!-- RTP tag --> 
	<script type='text/javascript' async>
	(function(c,h,a,f,i,e){c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
	 c[a].a=i;c[a].e=e;var g=h.createElement("script");g.async=true;g.type="text/javascript";
	 g.src=f+'?aid='+i;var b=h.getElementsByTagName("script")[0];b.parentNode.insertBefore(g,b);
	 })(window,document,"rtp","//sjrtp2-cdn.marketo.com/rtp-api/v1/rtp.js","elasticco");
	 
	rtp('send','view');
	rtp('get', 'campaign',true);
	</script>
	<!-- End of RTP tag -->
	
	
 	<link rel="apple-touch-icon" sizes="57x57"  href="https://www.elastic.co/apple-icon-57x57.png?change=123">
<link rel="apple-touch-icon" sizes="60x60"  href="https://www.elastic.co/apple-icon-60x60.png?change=123">
<link rel="apple-touch-icon" sizes="72x72"  href="https://www.elastic.co/apple-icon-72x72.png?change=123">
<link rel="apple-touch-icon" sizes="76x76"  href="https://www.elastic.co/apple-icon-76x76.png?change=123">
<link rel="apple-touch-icon" sizes="114x114"  href="https://www.elastic.co/apple-icon-114x114.png?change=123">
<link rel="apple-touch-icon" sizes="120x120"  href="https://www.elastic.co/apple-icon-120x120.png?change=123">
<link rel="apple-touch-icon" sizes="144x144"  href="https://www.elastic.co/apple-icon-144x144.png?change=123">
<link rel="apple-touch-icon" sizes="152x152"  href="https://www.elastic.co/apple-icon-152x152.png?change=123">
<link rel="apple-touch-icon" sizes="180x180"  href="https://www.elastic.co/apple-icon-180x180.png?change=123">
<link rel="icon" type="image/png" sizes="192x192"   href="https://www.elastic.co/android-icon-192x192.png?change=123">
<link rel="icon" type="image/png" sizes="32x32"  href="https://www.elastic.co/favicon-32x32.png?change=123">
<link rel="icon" type="image/png" sizes="96x96"  href="https://www.elastic.co/favicon-96x96.png?change=123">
<link rel="icon" type="image/png" sizes="16x16"  href="https://www.elastic.co/favicon-16x16.png?change=123">
<link rel="manifest"  href="https://www.elastic.co/manifest.json">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">

<!-- DC tags section -->
<link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" >
<link rel="schema.DCTERMS" href="http://purl.org/dc/terms/" >
<meta name="DC.title" content="Guide template" >

<!-- end DC tags -->

	<meta name="description" content="" />

	<link rel="canonical" href="" />

	<meta property="og:image" content="https://www.elastic.co/static/img/elastic-logo-200.png" />
	


	
	<link type="text/css" rel="stylesheet" href="https://static-www.elastic.co/static/css/skel.css?q=100" />
	<link type="text/css" rel="stylesheet" href="https://static-www.elastic.co/static/css/style.css?q=100" />	
	<script src="https://static-www.elastic.co/static/js/skel.min.js?q=100"></script>
	
		<script type="text/javascript">form_name = "" ; cdn_url="https://static-www.elastic.co";cdn_slug = "100"</script>
	
	<script src="https://static-www.elastic.co/static/js/init.js?q=100"></script>
	<script src="https://static-www.elastic.co/static/js/jquery.min.js?q=100"></script>
	<script src="https://static-www.elastic.co/static/js/jquery.cookie.js?q=100"></script>
	<!--<script type="text/javascript">
	    (function() {
	        var path = '//easy.myfonts.net/v2/js?sid=10336(font-family=Avenir+35+Light)&sid=10338(font-family=Avenir+55+Roman)&sid=10340(font-family=Avenir+85+Heavy)&sid=10344(font-family=Avenir+65+Medium)&key=nAD6PCOPrX',
	            protocol = ('https:' == document.location.protocol ? 'https:' : 'http:'),
	            trial = document.createElement('script');
	        trial.type = 'text/javascript';
	        trial.async = true;
	        trial.src = protocol + path;
	        var head = document.getElementsByTagName("head")[0];
	        head.appendChild(trial);
	    })();
	</script>-->

	
	<link type="text/css" rel="stylesheet"  href="https://www.elastic.co/static/css/prettify.css" />
	<script type="text/javascript"  src="https://www.elastic.co/static/js/prettify.js"></script>



<link rel="stylesheet" type="text/css" href="styles.css" />

</head>
<body >
	<!-- Google Tag Manager -->
	<script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5"
													  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
	<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
			new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
			j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
			'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-58RLH5');</script>
	<!-- End Google Tag Manager -->
	
	<div class="header-cont">
		<div id="header-wrapper">
			


	<script  src="https://www.elastic.co/static/js/jquery.tokeninput.js?change=123"></script>
	<link rel="stylesheet" type="text/css"  href="https://www.elastic.co/static/css/token-input.css">

<div class="shortcuts-wrapper">
	<div class="container">
		<!-- Shortcuts -->
		<nav id="shortcuts">
			<ul class="links">
				
					<li class="shortcut-1">
						<a href="/downloads" id="header_downloads" >
							<span class="txt">downloads</span>	
						</a>
					</li>
				
					<li class="shortcut-2">
						<a href="/guide" id="header_guide" >
							<span class="txt">docs</span>	
						</a>
					</li>
				
					<li class="shortcut-3">
						<a href="/subscriptions" id="header_subscriptions" >
							<span class="txt">support</span>	
						</a>
					</li>
				
					<li class="shortcut-4">
						<a href="https://discuss.elastic.co" id="header_discuss" target="_blank">
							<span class="txt">discuss</span>	
						</a>
					</li>
				
					<li class="shortcut-5">
						<a href="/contact" id="header_contact" >
							<span class="txt">contact</span>	
						</a>
					</li>
				
			</ul>
		</nav>
		<div class="languages-wrapper">
			<div class="global-language">
				<ul class="language">
					<!-- <li class="active-language"><a class="active" href="#">EN</a></li> -->
					
						<li><a href="#">EN</a></li>
					
				</ul>
				<ul class="all-languages">
					
						
						<li><a href="/guide_template">English</a></li>
					
						
						<li><a href="/fr/guide_template">French</a></li>
					
						
						<li><a href="/de/guide_template">German</a></li>
					
						
						<li><a href="/jp/guide_template">Japanese</a></li>
					
						
						<li><a href="/kr/guide_template">Korean</a></li>
					
				</ul>
			</div>
		</div>
	</div>
</div>
<div class="container w100">
	<div class="row 0%">
		<div class="12u">
			

<section class="first-container desktop-main-nav">
	<div class="row 0%">
		<div class="11u 6u(small) 6u(xsmall)">
			<div id="elastic">
				<h1>
					<a href="/">
						<div id="elastic-logo">
						<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 400 130" preserveAspectRatio="xMinYMin meet" enable-background="new 0 0 400 130" xml:space="preserve">
    <g>
    	<g>
    		<path fill="#FFFFFF" d="M122.5,67.8c0-10.3-6.4-19.2-15.9-22.7c0.4-2.2,0.6-4.3,0.6-6.6c0-19.1-15.5-34.6-34.6-34.6
    			c-11.1,0-21.5,5.3-28,14.4c-3.2-2.5-7.1-3.8-11.2-3.8c-10.1,0-18.4,8.2-18.4,18.4c0,2.2,0.4,4.4,1.1,6.4C6.5,42.6,0,51.8,0,62
    			c0,10.3,6.4,19.3,16,22.8c-0.4,2.1-0.6,4.3-0.6,6.6c0,19,15.5,34.5,34.5,34.5c11.2,0,21.5-5.4,28-14.4c3.2,2.5,7.2,3.9,11.3,3.9
    			c10.1,0,18.4-8.2,18.4-18.4c0-2.2-0.4-4.4-1.1-6.4C115.9,87.2,122.5,78,122.5,67.8z"/>
    		<g>
    			<path fill="#F4BD19" d="M47.9,56.3l27.3,12.5l27.6-24.2c0.4-2,0.6-4,0.6-6.1c0-17-13.8-30.8-30.8-30.8c-10.2,0-19.7,5-25.4,13.4
    				l-4.6,23.8L47.9,56.3z"/>
    		</g>
    		<g>
    			<path fill="#3CBEB1" d="M19.6,85.2c-0.4,2-0.6,4.1-0.6,6.2c0,17,13.9,30.9,30.9,30.9c10.3,0,19.8-5.1,25.6-13.5L80,85l-6.1-11.6
    				L46.5,60.9L19.6,85.2z"/>
    		</g>
    		<g>
    			<path fill="#E9478C" d="M19.4,37.9l18.7,4.4L42.3,21c-2.6-2-5.7-3-9-3c-8.1,0-14.8,6.6-14.8,14.8C18.5,34.5,18.8,36.3,19.4,37.9z
    				"/>
    		</g>
    		<g>
    			<path fill="#2C458F" d="M17.8,42.4C9.4,45.1,3.6,53.2,3.6,62c0,8.6,5.3,16.3,13.3,19.3l26.3-23.8l-4.8-10.3L17.8,42.4z"/>
    		</g>
    		<g>
    			<path fill="#95C63D" d="M80.3,108.7c2.6,2,5.7,3.1,8.9,3.1c8.1,0,14.8-6.6,14.8-14.8c0-1.8-0.3-3.5-0.9-5.1l-18.7-4.4L80.3,108.7
    				z"/>
    		</g>
    		<g>
    			<path fill="#176655" d="M84.1,82.6l20.6,4.8c8.4-2.8,14.2-10.8,14.2-19.6c0-8.6-5.3-16.2-13.3-19.3l-27,23.6L84.1,82.6z"/>
    		</g>
    	</g>
    	<path d="M162.8,76.3c0,0.1,0,0.6,0.1,1.4c0.1,0.8,0.3,1.8,0.6,3c0.3,1.1,0.8,2.4,1.4,3.7c0.6,1.3,1.4,2.5,2.5,3.6
    		c1,1.1,2.3,2,3.8,2.7c1.5,0.7,3.4,1.1,5.6,1.1c1.8,0,3.3-0.1,4.6-0.4c1.3-0.3,2.4-0.7,3.4-1.3c1-0.6,1.9-1.3,2.7-2.2
    		c0.8-0.9,1.6-1.9,2.4-3.1c0.5-0.7,1-1.2,1.6-1.5c0.6-0.3,1.2-0.4,1.8-0.4c1,0,2,0.4,2.8,1.1c0.9,0.7,1.3,1.7,1.3,2.8
    		c0,0.7-0.4,1.7-1.1,3.1c-0.7,1.4-1.9,2.8-3.6,4.1c-1.6,1.4-3.7,2.6-6.3,3.6c-2.6,1-5.7,1.5-9.5,1.5c-3.8,0-7.2-0.7-10.2-2.1
    		c-3-1.4-5.5-3.2-7.5-5.6c-2-2.3-3.6-5-4.7-8.1c-1.1-3.1-1.6-6.3-1.6-9.7c0-3.5,0.5-6.8,1.6-9.9c1.1-3.1,2.7-5.8,4.7-8.1
    		c2-2.3,4.5-4.1,7.4-5.5c2.9-1.3,6.1-2,9.6-2c3.3,0,6.3,0.5,9.2,1.5c2.8,1,5.3,2.4,7.4,4.3c2.1,1.9,3.7,4.1,5,6.8
    		c1.2,2.7,1.8,5.8,1.8,9.2c0,2.1-0.5,3.7-1.6,4.8c-1,1.1-2.2,1.6-3.6,1.6H162.8z M170.9,56.4c-1.5,0.6-2.7,1.4-3.7,2.4
    		c-1,0.9-1.8,2-2.4,3.1c-0.6,1.1-1,2.2-1.3,3.2c-0.3,1-0.5,1.8-0.5,2.5c-0.1,0.7-0.1,1.1-0.1,1.2h27.9c0-1.8-0.3-3.5-0.9-5.1
    		c-0.6-1.6-1.5-3-2.6-4.3c-1.2-1.2-2.7-2.2-4.5-3c-1.8-0.7-4-1.1-6.5-1.1C174.2,55.5,172.4,55.8,170.9,56.4z"/>
    	<path d="M214.3,94.6c0,1.3-0.4,2.3-1.3,3.2c-0.9,0.9-1.9,1.3-3.2,1.3c-1.3,0-2.3-0.4-3.2-1.3c-0.9-0.9-1.3-2-1.3-3.2V35.1
    		c0-1.3,0.4-2.3,1.3-3.2c0.9-0.9,2-1.3,3.2-1.3c1.3,0,2.3,0.4,3.2,1.3c0.9,0.9,1.3,1.9,1.3,3.2V94.6z"/>
    	<path d="M229.8,63.5c-0.6,0.3-1.2,0.5-1.9,0.5c-1.2,0-2.2-0.4-3.2-1.1c-1-0.7-1.5-1.8-1.5-3.1c0-0.5,0.1-1.1,0.4-1.9
    		c0.5-1.2,1.2-2.4,2.1-3.6c0.9-1.2,2-2.2,3.5-3.1s3.3-1.7,5.4-2.2c2.2-0.5,4.8-0.8,7.9-0.8c5.9,0,10.5,1.2,14,3.5
    		c3.5,2.3,5.2,5.8,5.2,10.3v32.8c0,1.3-0.4,2.3-1.3,3.2c-0.9,0.9-1.9,1.3-3.2,1.3c-1.3,0-2.3-0.4-3.2-1.3c-0.9-0.9-1.3-2-1.3-3.2v-2
    		c-1.2,2-4.7,4.5-7.5,5.3c-2.8,0.8-5.7,1.2-8.8,1.2c-2,0-3.9-0.3-5.9-0.8c-2-0.5-3.8-1.4-5.3-2.5c-1.6-1.1-2.9-2.6-3.8-4.3
    		c-1-1.7-1.5-3.8-1.5-6.2c0-2.8,0.5-5.7,1.6-7.5c1.1-1.9,2.6-3.4,4.4-4.6c1.8-1.2,3.9-2.1,6.3-2.8c2.4-0.6,4.9-1.1,7.5-1.4
    		c3-0.3,5.4-0.7,7.2-1.2c1.7-0.4,3-0.9,3.9-1.5c0.9-0.6,1.4-1.2,1.6-2c0.2-0.7,0.3-1.6,0.3-2.5c0-1.1-0.3-2-0.9-2.8
    		c-0.6-0.8-1.4-1.5-2.4-2c-1-0.5-2.1-0.9-3.3-1.2s-2.4-0.4-3.5-0.4c-2.1,0-3.7,0.2-5,0.5c-1.3,0.3-2.3,0.8-3.1,1.4
    		c-0.8,0.6-1.5,1.3-1.9,2.1c-0.5,0.8-0.9,1.6-1.3,2.5C230.9,62.6,230.4,63.1,229.8,63.5z M250.6,74.4c-1.1,0.3-2.4,0.6-3.8,0.8
    		c-1.5,0.2-3,0.4-4.6,0.6c-1.6,0.2-3.1,0.5-4.6,0.9c-1.5,0.3-2.8,0.8-4,1.5c-1.2,0.7-2.2,1.5-2.9,2.5c-0.7,1-1.1,3-1.1,4.6
    		c0,1.3,0.3,2.3,0.8,3.1c0.5,0.8,1.2,1.5,2.1,2c0.9,0.5,1.8,0.8,2.9,1c1.1,0.2,2.2,0.3,3.3,0.3c1.7,0,3.3-0.2,5-0.6
    		c1.7-0.4,3.2-1,4.5-1.9s2.4-2,3.3-3.5c0.8-1.4,1.2-3.8,1.2-5.9v-6.1L250.6,74.4z"/>
    	<path d="M307.6,90.9c-1.1,2-2.7,3.6-4.6,4.8s-4.1,2.1-6.6,2.7c-2.5,0.5-5.2,0.8-7.9,0.8c-3.9,0-7.2-0.6-9.9-1.8
    		c-2.7-1.2-4.9-2.6-6.5-4.1c-1.7-1.6-2.9-3.1-3.7-4.7c-0.7-1.6-1.1-2.7-1.1-3.5c0-1.3,0.5-2.4,1.4-3.2c0.9-0.8,2-1.2,3.1-1.2
    		c0.7,0,1.3,0.2,2,0.6c0.6,0.4,1.1,1,1.5,1.9c1,2.5,2.5,4.5,4.7,6.2c2.2,1.7,5.2,2.5,9.3,2.5c1.8,0,3.4-0.2,4.7-0.6
    		c1.3-0.4,2.4-1,3.2-1.7c0.8-0.7,1.4-1.5,1.9-2.4c0.4-0.9,0.6-1.8,0.6-2.8c0-2-0.8-3.4-2.3-4.4c-1.5-1-3.5-1.7-5.8-2.3
    		c-2.3-0.6-4.8-1.1-7.5-1.6c-2.7-0.5-5.2-1.2-7.5-2.2c-2.3-0.9-4.2-2.3-5.8-4c-1.6-1.8-2.3-4.2-2.3-7.3c0-4.5,1.6-8,4.9-10.5
    		c3.3-2.5,7.8-3.8,13.7-3.8c3.3,0,6,0.3,8.3,1c2.2,0.7,4.1,1.6,5.5,2.7c0.6,0.5,1.2,1,1.8,1.7c0.6,0.7,1.2,1.4,1.8,2.2
    		c0.6,0.8,1,1.5,1.4,2.3c0.4,0.7,0.6,1.4,0.6,2c0,1.3-0.5,2.4-1.6,3.1c-1,0.8-2.2,1.2-3.4,1.2c-0.7,0-1.5-0.1-2.1-0.6
    		c-0.6-0.6-1-1.3-1.3-1.8c-0.5-1.1-1.1-2-1.7-2.8c-0.5-0.8-1.2-1.5-2-2c-0.8-0.5-1.8-0.9-3-1.2c-1.2-0.3-2.7-0.4-4.4-0.4
    		c-3.5,0-6,0.6-7.6,1.7c-1.6,1.1-2.4,2.5-2.4,4.2c0,1.3,0.5,2.3,1.4,3.1c0.9,0.8,2.1,1.4,3.7,2c1.5,0.5,3.3,1,5.2,1.4
    		c2,0.4,3.9,0.8,5.9,1.3c2,0.5,4,1.1,5.9,1.7c1.9,0.7,3.7,1.6,5.2,2.7c1.5,1.1,2.7,2.5,3.7,4.1c0.9,1.6,1.4,3.6,1.4,6
    		C309.4,86.4,308.8,88.9,307.6,90.9z"/>
    	<path d="M327.4,48.8h4.7c1.1,0,2,0.4,2.8,1.2c0.8,0.8,1.2,1.7,1.2,2.8c0,1.1-0.4,2.1-1.2,2.8s-1.7,1.1-2.8,1.1h-4.7v37.9
    		c0,1.3-0.4,2.3-1.3,3.2c-0.9,0.9-2,1.3-3.2,1.3c-1.3,0-2.3-0.4-3.2-1.3c-0.9-0.9-1.3-2-1.3-3.2V56.7h-4.6c-1.1,0-2-0.4-2.8-1.1
    		c-0.8-0.7-1.2-1.7-1.2-2.8c0-1.1,0.4-2,1.2-2.8c0.8-0.8,1.7-1.2,2.8-1.2h4.6V39c0-1.3,0.4-2.3,1.3-3.2s1.9-1.3,3.2-1.3
    		c1.3,0,2.3,0.4,3.2,1.3s1.3,1.9,1.3,3.2V48.8z"/>
    	<path d="M341.5,32.1c1-1,2.2-1.5,3.7-1.5c1.4,0,2.6,0.5,3.6,1.5c1,1,1.5,2.2,1.5,3.6c0,1.4-0.5,2.6-1.5,3.6c-1,1-2.2,1.5-3.6,1.5
    		c-1.4,0-2.7-0.5-3.7-1.5c-1-1-1.5-2.2-1.5-3.6C340,34.2,340.5,33,341.5,32.1z M349.6,94.6c0,1.3-0.4,2.3-1.3,3.2
    		c-0.9,0.9-1.9,1.3-3.2,1.3c-1.3,0-2.3-0.4-3.2-1.3c-0.9-0.9-1.3-2-1.3-3.2V53.3c0-1.3,0.4-2.3,1.3-3.2c0.9-0.9,2-1.3,3.2-1.3
    		c1.3,0,2.3,0.4,3.2,1.3c0.9,0.9,1.3,2,1.3,3.2V94.6z"/>
    	<path d="M369.1,97.3c-2.9-1.2-5.4-3-7.5-5.2c-2.1-2.2-3.8-4.9-5-8.1c-1.2-3.1-1.8-6.6-1.8-10.4c0-3.8,0.6-7.3,1.8-10.5
    		c1.2-3.1,2.9-5.8,5-8.1c2.1-2.2,4.6-4,7.5-5.2c2.9-1.2,6-1.9,9.4-1.9c3.4,0,6.4,0.5,9,1.5c2.5,1,4.6,2.2,6.2,3.6
    		c1.6,1.4,3.2,2.9,4,4.4c0.5,0.9,0.9,1.5,0.9,2.6c0,1.3-0.5,2.3-1.4,3.1c-0.9,0.7-2,1.1-3.1,1.1c-0.8,0-1.6-0.2-2.2-0.6
    		c-0.7-0.4-1.2-1.3-1.8-2.1c-1-1.4-0.5-0.6-1.1-1.5c-0.7-0.9-1.5-1.6-2.5-2.3c-1-0.7-2.2-1.2-3.5-1.6c-1.4-0.4-2.8-0.6-4.4-0.6
    		c-1.8,0-3.5,0.3-5.3,1c-1.8,0.7-3.3,1.7-4.7,3.1c-1.4,1.4-2.5,3.3-3.4,5.6s-1.3,5.1-1.3,8.4c0,3.3,0.4,6.1,1.3,8.4s2,4.2,3.4,5.6
    		c1.4,1.4,3,2.5,4.7,3.1c1.8,0.7,3.5,1,5.3,1c1.6,0,3.1-0.2,4.4-0.6c1.3-0.4,2.5-0.9,3.5-1.6c1-0.7,1.8-1.5,2.5-2.3
    		c0.7-0.9,1.1-1.8,1.4-2.7c0.3-1,0.8-1.7,1.5-2.1c0.7-0.4,1.4-0.6,2.2-0.6c1.1,0,2.2,0.4,3.1,1.1c0.9,0.7,1.4,1.7,1.4,3
    		c0,0.6-0.3,1.7-0.9,3.1c-0.6,1.5-1.6,2.9-3.1,4.4c-1.5,1.5-3.5,2.8-6.2,4c-2.6,1.1-6,1.7-10,1.7C375.1,99.2,372,98.5,369.1,97.3z"
    		/>
    </g>
</svg>
						</div>
					</a>
				</h1>
			</div>
			<nav id="nav">
				<ul>
					
					<li>
						
							
						
						<a href="/products" id="nav_products"   >Products</a>
						
						<ul class="dropdown">
							
								<li><a href="/products/elasticsearch" id="nav_elasticsearch" >elasticsearch</a></li>								
							
								<li><a href="/found" id="nav_hosted-elasticsearch" >elasticsearch as a service</a></li>								
							
								<li><a href="/products/logstash" id="nav_logstash" >logstash</a></li>								
							
								<li><a href="/products/kibana" id="nav_kibana" >kibana</a></li>								
							
								<li><a href="/products/beats" id="nav_beats" >beats</a></li>								
							
								<li><a href="/products/watcher" id="nav_watcher" >watcher</a></li>								
							
								<li><a href="/products/shield" id="nav_shield" >shield</a></li>								
							
								<li><a href="/products/marvel" id="nav_marvel" >marvel</a></li>								
							
								<li><a href="/products/hadoop" id="nav_hadoop" >hadoop</a></li>								
							
								<li><a href="/downloads" id="nav_downloads" >downloads</a></li>								
								
						</ul>							
					</li>
					
					<li>
						
							
						
						<a href="/subscriptions" id="nav_subscriptions"   >Subscriptions</a>
						
						<ul class="dropdown">
								
						</ul>							
					</li>
					
					<li>
						
							
						
						<a href="/learn" id="nav_learn"   >Learn</a>
						
						<ul class="dropdown">
							
								<li><a href="/guide" id="nav_guide" >docs</a></li>								
							
								<li><a href="/videos" id="nav_videos" >videos</a></li>								
							
								<li><a href="/training" id="nav_training" >training</a></li>								
							
								<li><a href="/services" id="nav_services" >services</a></li>								
							
								<li><a href="/blog" id="nav_learn_blog" >blog</a></li>								
							
								<li><a href="/elasticon" id="nav_learn_elasticon" >elastic{ON}</a></li>								
								
						</ul>							
					</li>
					
					<li>
						
							
						
						<a href="/community" id="nav_community"   >Community</a>
						
						<ul class="dropdown">
							
								<li><a href="/community/meetups" id="nav_meetups" >meetups</a></li>								
							
								<li><a href="https://discuss.elastic.co" id="nav_discuss" target="_blank">discuss</a></li>								
							
								<li><a href="/community/codeofconduct" id="nav_codeofconduct" >code of conduct</a></li>								
								
						</ul>							
					</li>
					
					<li>
						
							
						
						<a href="/use-cases" id="nav_usecases"   >Use Cases</a>
						
						<ul class="dropdown">
								
						</ul>							
					</li>
					
					<li>
						
							
						
						<a href="/blog" id="nav_blog"   >Blog</a>
						
						<ul class="dropdown">
							
								<li><a href="/blog/category/news" id="blog_news" >News</a></li>								
							
								<li><a href="/blog/category/engineering" id="blog_engineering" >Engineering</a></li>								
							
								<li><a href="/blog/category/user-stories" id="blog_user-stories" >User Stories</a></li>								
							
								<li><a href="/blog/category/releases" id="blog_releases" >Releases</a></li>								
							
								<li><a href="/blog/archive" id="blog_archive" >Archive</a></li>								
								
						</ul>							
					</li>
					
					<li>
						
							
						
						<a href="/about" id="nav_about"   >About</a>
						
						<ul class="dropdown">
							
								<li><a href="/about/leadership" id="nav_leadership" >leadership</a></li>								
							
								<li><a href="/about/board" id="nav_board" >board of directors</a></li>								
							
								<li><a href="/about/careers" id="nav_careers" >careers</a></li>								
							
								<li><a href="/about/partners" id="nav_partners" >partners</a></li>								
							
								<li><a href="/about/press" id="nav_press" >press</a></li>								
								
						</ul>							
					</li>
					
				</ul>
			</nav>			
			<!-- Searchbar Input box -->
			 <!-- <form method="get" action="/search" name="searchForm" class="header-search-form" id="searchMobileFrm">
			   <input type="text" id="search-header-autocomplete" name="q" class="form-control global-input" placeholder="elastic{search}">
			</form>
			<div class="mobile-auto-complete"></div> -->  
		</div>
		<div class="1u 6u(small) 6u(xsmall)">
			<div id="searchbar">
				<a href="#" class="button icon"></a>
			</div>
			<!-- <div class="nav-auto-complete"></div> -->
		</div>
	</div>
</section>
<div class="mobile-menu-wrapper">
	<div class="row 0%">
		<div class="8u 6u(small) 6u(xsmall)">
			<div id="elastic">
				<h1>
					<a href="/">
						<div id="elastic-logo">
						<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 400 130" preserveAspectRatio="xMinYMin meet" enable-background="new 0 0 400 130" xml:space="preserve">
    <g>
    	<g>
    		<path fill="#FFFFFF" d="M122.5,67.8c0-10.3-6.4-19.2-15.9-22.7c0.4-2.2,0.6-4.3,0.6-6.6c0-19.1-15.5-34.6-34.6-34.6
    			c-11.1,0-21.5,5.3-28,14.4c-3.2-2.5-7.1-3.8-11.2-3.8c-10.1,0-18.4,8.2-18.4,18.4c0,2.2,0.4,4.4,1.1,6.4C6.5,42.6,0,51.8,0,62
    			c0,10.3,6.4,19.3,16,22.8c-0.4,2.1-0.6,4.3-0.6,6.6c0,19,15.5,34.5,34.5,34.5c11.2,0,21.5-5.4,28-14.4c3.2,2.5,7.2,3.9,11.3,3.9
    			c10.1,0,18.4-8.2,18.4-18.4c0-2.2-0.4-4.4-1.1-6.4C115.9,87.2,122.5,78,122.5,67.8z"/>
    		<g>
    			<path fill="#F4BD19" d="M47.9,56.3l27.3,12.5l27.6-24.2c0.4-2,0.6-4,0.6-6.1c0-17-13.8-30.8-30.8-30.8c-10.2,0-19.7,5-25.4,13.4
    				l-4.6,23.8L47.9,56.3z"/>
    		</g>
    		<g>
    			<path fill="#3CBEB1" d="M19.6,85.2c-0.4,2-0.6,4.1-0.6,6.2c0,17,13.9,30.9,30.9,30.9c10.3,0,19.8-5.1,25.6-13.5L80,85l-6.1-11.6
    				L46.5,60.9L19.6,85.2z"/>
    		</g>
    		<g>
    			<path fill="#E9478C" d="M19.4,37.9l18.7,4.4L42.3,21c-2.6-2-5.7-3-9-3c-8.1,0-14.8,6.6-14.8,14.8C18.5,34.5,18.8,36.3,19.4,37.9z
    				"/>
    		</g>
    		<g>
    			<path fill="#2C458F" d="M17.8,42.4C9.4,45.1,3.6,53.2,3.6,62c0,8.6,5.3,16.3,13.3,19.3l26.3-23.8l-4.8-10.3L17.8,42.4z"/>
    		</g>
    		<g>
    			<path fill="#95C63D" d="M80.3,108.7c2.6,2,5.7,3.1,8.9,3.1c8.1,0,14.8-6.6,14.8-14.8c0-1.8-0.3-3.5-0.9-5.1l-18.7-4.4L80.3,108.7
    				z"/>
    		</g>
    		<g>
    			<path fill="#176655" d="M84.1,82.6l20.6,4.8c8.4-2.8,14.2-10.8,14.2-19.6c0-8.6-5.3-16.2-13.3-19.3l-27,23.6L84.1,82.6z"/>
    		</g>
    	</g>
    	<path d="M162.8,76.3c0,0.1,0,0.6,0.1,1.4c0.1,0.8,0.3,1.8,0.6,3c0.3,1.1,0.8,2.4,1.4,3.7c0.6,1.3,1.4,2.5,2.5,3.6
    		c1,1.1,2.3,2,3.8,2.7c1.5,0.7,3.4,1.1,5.6,1.1c1.8,0,3.3-0.1,4.6-0.4c1.3-0.3,2.4-0.7,3.4-1.3c1-0.6,1.9-1.3,2.7-2.2
    		c0.8-0.9,1.6-1.9,2.4-3.1c0.5-0.7,1-1.2,1.6-1.5c0.6-0.3,1.2-0.4,1.8-0.4c1,0,2,0.4,2.8,1.1c0.9,0.7,1.3,1.7,1.3,2.8
    		c0,0.7-0.4,1.7-1.1,3.1c-0.7,1.4-1.9,2.8-3.6,4.1c-1.6,1.4-3.7,2.6-6.3,3.6c-2.6,1-5.7,1.5-9.5,1.5c-3.8,0-7.2-0.7-10.2-2.1
    		c-3-1.4-5.5-3.2-7.5-5.6c-2-2.3-3.6-5-4.7-8.1c-1.1-3.1-1.6-6.3-1.6-9.7c0-3.5,0.5-6.8,1.6-9.9c1.1-3.1,2.7-5.8,4.7-8.1
    		c2-2.3,4.5-4.1,7.4-5.5c2.9-1.3,6.1-2,9.6-2c3.3,0,6.3,0.5,9.2,1.5c2.8,1,5.3,2.4,7.4,4.3c2.1,1.9,3.7,4.1,5,6.8
    		c1.2,2.7,1.8,5.8,1.8,9.2c0,2.1-0.5,3.7-1.6,4.8c-1,1.1-2.2,1.6-3.6,1.6H162.8z M170.9,56.4c-1.5,0.6-2.7,1.4-3.7,2.4
    		c-1,0.9-1.8,2-2.4,3.1c-0.6,1.1-1,2.2-1.3,3.2c-0.3,1-0.5,1.8-0.5,2.5c-0.1,0.7-0.1,1.1-0.1,1.2h27.9c0-1.8-0.3-3.5-0.9-5.1
    		c-0.6-1.6-1.5-3-2.6-4.3c-1.2-1.2-2.7-2.2-4.5-3c-1.8-0.7-4-1.1-6.5-1.1C174.2,55.5,172.4,55.8,170.9,56.4z"/>
    	<path d="M214.3,94.6c0,1.3-0.4,2.3-1.3,3.2c-0.9,0.9-1.9,1.3-3.2,1.3c-1.3,0-2.3-0.4-3.2-1.3c-0.9-0.9-1.3-2-1.3-3.2V35.1
    		c0-1.3,0.4-2.3,1.3-3.2c0.9-0.9,2-1.3,3.2-1.3c1.3,0,2.3,0.4,3.2,1.3c0.9,0.9,1.3,1.9,1.3,3.2V94.6z"/>
    	<path d="M229.8,63.5c-0.6,0.3-1.2,0.5-1.9,0.5c-1.2,0-2.2-0.4-3.2-1.1c-1-0.7-1.5-1.8-1.5-3.1c0-0.5,0.1-1.1,0.4-1.9
    		c0.5-1.2,1.2-2.4,2.1-3.6c0.9-1.2,2-2.2,3.5-3.1s3.3-1.7,5.4-2.2c2.2-0.5,4.8-0.8,7.9-0.8c5.9,0,10.5,1.2,14,3.5
    		c3.5,2.3,5.2,5.8,5.2,10.3v32.8c0,1.3-0.4,2.3-1.3,3.2c-0.9,0.9-1.9,1.3-3.2,1.3c-1.3,0-2.3-0.4-3.2-1.3c-0.9-0.9-1.3-2-1.3-3.2v-2
    		c-1.2,2-4.7,4.5-7.5,5.3c-2.8,0.8-5.7,1.2-8.8,1.2c-2,0-3.9-0.3-5.9-0.8c-2-0.5-3.8-1.4-5.3-2.5c-1.6-1.1-2.9-2.6-3.8-4.3
    		c-1-1.7-1.5-3.8-1.5-6.2c0-2.8,0.5-5.7,1.6-7.5c1.1-1.9,2.6-3.4,4.4-4.6c1.8-1.2,3.9-2.1,6.3-2.8c2.4-0.6,4.9-1.1,7.5-1.4
    		c3-0.3,5.4-0.7,7.2-1.2c1.7-0.4,3-0.9,3.9-1.5c0.9-0.6,1.4-1.2,1.6-2c0.2-0.7,0.3-1.6,0.3-2.5c0-1.1-0.3-2-0.9-2.8
    		c-0.6-0.8-1.4-1.5-2.4-2c-1-0.5-2.1-0.9-3.3-1.2s-2.4-0.4-3.5-0.4c-2.1,0-3.7,0.2-5,0.5c-1.3,0.3-2.3,0.8-3.1,1.4
    		c-0.8,0.6-1.5,1.3-1.9,2.1c-0.5,0.8-0.9,1.6-1.3,2.5C230.9,62.6,230.4,63.1,229.8,63.5z M250.6,74.4c-1.1,0.3-2.4,0.6-3.8,0.8
    		c-1.5,0.2-3,0.4-4.6,0.6c-1.6,0.2-3.1,0.5-4.6,0.9c-1.5,0.3-2.8,0.8-4,1.5c-1.2,0.7-2.2,1.5-2.9,2.5c-0.7,1-1.1,3-1.1,4.6
    		c0,1.3,0.3,2.3,0.8,3.1c0.5,0.8,1.2,1.5,2.1,2c0.9,0.5,1.8,0.8,2.9,1c1.1,0.2,2.2,0.3,3.3,0.3c1.7,0,3.3-0.2,5-0.6
    		c1.7-0.4,3.2-1,4.5-1.9s2.4-2,3.3-3.5c0.8-1.4,1.2-3.8,1.2-5.9v-6.1L250.6,74.4z"/>
    	<path d="M307.6,90.9c-1.1,2-2.7,3.6-4.6,4.8s-4.1,2.1-6.6,2.7c-2.5,0.5-5.2,0.8-7.9,0.8c-3.9,0-7.2-0.6-9.9-1.8
    		c-2.7-1.2-4.9-2.6-6.5-4.1c-1.7-1.6-2.9-3.1-3.7-4.7c-0.7-1.6-1.1-2.7-1.1-3.5c0-1.3,0.5-2.4,1.4-3.2c0.9-0.8,2-1.2,3.1-1.2
    		c0.7,0,1.3,0.2,2,0.6c0.6,0.4,1.1,1,1.5,1.9c1,2.5,2.5,4.5,4.7,6.2c2.2,1.7,5.2,2.5,9.3,2.5c1.8,0,3.4-0.2,4.7-0.6
    		c1.3-0.4,2.4-1,3.2-1.7c0.8-0.7,1.4-1.5,1.9-2.4c0.4-0.9,0.6-1.8,0.6-2.8c0-2-0.8-3.4-2.3-4.4c-1.5-1-3.5-1.7-5.8-2.3
    		c-2.3-0.6-4.8-1.1-7.5-1.6c-2.7-0.5-5.2-1.2-7.5-2.2c-2.3-0.9-4.2-2.3-5.8-4c-1.6-1.8-2.3-4.2-2.3-7.3c0-4.5,1.6-8,4.9-10.5
    		c3.3-2.5,7.8-3.8,13.7-3.8c3.3,0,6,0.3,8.3,1c2.2,0.7,4.1,1.6,5.5,2.7c0.6,0.5,1.2,1,1.8,1.7c0.6,0.7,1.2,1.4,1.8,2.2
    		c0.6,0.8,1,1.5,1.4,2.3c0.4,0.7,0.6,1.4,0.6,2c0,1.3-0.5,2.4-1.6,3.1c-1,0.8-2.2,1.2-3.4,1.2c-0.7,0-1.5-0.1-2.1-0.6
    		c-0.6-0.6-1-1.3-1.3-1.8c-0.5-1.1-1.1-2-1.7-2.8c-0.5-0.8-1.2-1.5-2-2c-0.8-0.5-1.8-0.9-3-1.2c-1.2-0.3-2.7-0.4-4.4-0.4
    		c-3.5,0-6,0.6-7.6,1.7c-1.6,1.1-2.4,2.5-2.4,4.2c0,1.3,0.5,2.3,1.4,3.1c0.9,0.8,2.1,1.4,3.7,2c1.5,0.5,3.3,1,5.2,1.4
    		c2,0.4,3.9,0.8,5.9,1.3c2,0.5,4,1.1,5.9,1.7c1.9,0.7,3.7,1.6,5.2,2.7c1.5,1.1,2.7,2.5,3.7,4.1c0.9,1.6,1.4,3.6,1.4,6
    		C309.4,86.4,308.8,88.9,307.6,90.9z"/>
    	<path d="M327.4,48.8h4.7c1.1,0,2,0.4,2.8,1.2c0.8,0.8,1.2,1.7,1.2,2.8c0,1.1-0.4,2.1-1.2,2.8s-1.7,1.1-2.8,1.1h-4.7v37.9
    		c0,1.3-0.4,2.3-1.3,3.2c-0.9,0.9-2,1.3-3.2,1.3c-1.3,0-2.3-0.4-3.2-1.3c-0.9-0.9-1.3-2-1.3-3.2V56.7h-4.6c-1.1,0-2-0.4-2.8-1.1
    		c-0.8-0.7-1.2-1.7-1.2-2.8c0-1.1,0.4-2,1.2-2.8c0.8-0.8,1.7-1.2,2.8-1.2h4.6V39c0-1.3,0.4-2.3,1.3-3.2s1.9-1.3,3.2-1.3
    		c1.3,0,2.3,0.4,3.2,1.3s1.3,1.9,1.3,3.2V48.8z"/>
    	<path d="M341.5,32.1c1-1,2.2-1.5,3.7-1.5c1.4,0,2.6,0.5,3.6,1.5c1,1,1.5,2.2,1.5,3.6c0,1.4-0.5,2.6-1.5,3.6c-1,1-2.2,1.5-3.6,1.5
    		c-1.4,0-2.7-0.5-3.7-1.5c-1-1-1.5-2.2-1.5-3.6C340,34.2,340.5,33,341.5,32.1z M349.6,94.6c0,1.3-0.4,2.3-1.3,3.2
    		c-0.9,0.9-1.9,1.3-3.2,1.3c-1.3,0-2.3-0.4-3.2-1.3c-0.9-0.9-1.3-2-1.3-3.2V53.3c0-1.3,0.4-2.3,1.3-3.2c0.9-0.9,2-1.3,3.2-1.3
    		c1.3,0,2.3,0.4,3.2,1.3c0.9,0.9,1.3,2,1.3,3.2V94.6z"/>
    	<path d="M369.1,97.3c-2.9-1.2-5.4-3-7.5-5.2c-2.1-2.2-3.8-4.9-5-8.1c-1.2-3.1-1.8-6.6-1.8-10.4c0-3.8,0.6-7.3,1.8-10.5
    		c1.2-3.1,2.9-5.8,5-8.1c2.1-2.2,4.6-4,7.5-5.2c2.9-1.2,6-1.9,9.4-1.9c3.4,0,6.4,0.5,9,1.5c2.5,1,4.6,2.2,6.2,3.6
    		c1.6,1.4,3.2,2.9,4,4.4c0.5,0.9,0.9,1.5,0.9,2.6c0,1.3-0.5,2.3-1.4,3.1c-0.9,0.7-2,1.1-3.1,1.1c-0.8,0-1.6-0.2-2.2-0.6
    		c-0.7-0.4-1.2-1.3-1.8-2.1c-1-1.4-0.5-0.6-1.1-1.5c-0.7-0.9-1.5-1.6-2.5-2.3c-1-0.7-2.2-1.2-3.5-1.6c-1.4-0.4-2.8-0.6-4.4-0.6
    		c-1.8,0-3.5,0.3-5.3,1c-1.8,0.7-3.3,1.7-4.7,3.1c-1.4,1.4-2.5,3.3-3.4,5.6s-1.3,5.1-1.3,8.4c0,3.3,0.4,6.1,1.3,8.4s2,4.2,3.4,5.6
    		c1.4,1.4,3,2.5,4.7,3.1c1.8,0.7,3.5,1,5.3,1c1.6,0,3.1-0.2,4.4-0.6c1.3-0.4,2.5-0.9,3.5-1.6c1-0.7,1.8-1.5,2.5-2.3
    		c0.7-0.9,1.1-1.8,1.4-2.7c0.3-1,0.8-1.7,1.5-2.1c0.7-0.4,1.4-0.6,2.2-0.6c1.1,0,2.2,0.4,3.1,1.1c0.9,0.7,1.4,1.7,1.4,3
    		c0,0.6-0.3,1.7-0.9,3.1c-0.6,1.5-1.6,2.9-3.1,4.4c-1.5,1.5-3.5,2.8-6.2,4c-2.6,1.1-6,1.7-10,1.7C375.1,99.2,372,98.5,369.1,97.3z"
    		/>
    </g>
</svg>
						</div>
					</a>
				</h1>
			</div>
		</div>
		<div class="4u 6u(small) 6u(xsmall) text-right">
			<!-- <div class="mobile-menu-wrapper"> -->
				<ul class="m-shortcuts">
					
					<li><a href="#" class="m-search" id="header-search"></a></li>
					
					<li><a href="/guide" class="m-docs" id="mobile-docs"></a></li>
					
					<li><a href="/contact" class="m-contact" id="mobile-contact"></a></li>
					
				</ul>	
				<nav class="nav-menu">
					<div class="menu-button">
						<span></span>
					</div>
					<div class="nav-menu-list-wrap">
						<div class="nav-menu-list">
							
								<h3><a href="/products" id="nav_products" >Products</a></h3>

								
								<ul>
									
									<li><a href="/products/elasticsearch" id="nav_elasticsearch" >elasticsearch</a></li>
									
									<li><a href="/found" id="nav_hosted-elasticsearch" >elasticsearch as a service</a></li>
									
									<li><a href="/products/logstash" id="nav_logstash" >logstash</a></li>
									
									<li><a href="/products/kibana" id="nav_kibana" >kibana</a></li>
									
									<li><a href="/products/beats" id="nav_beats" >beats</a></li>
									
									<li><a href="/products/watcher" id="nav_watcher" >watcher</a></li>
									
									<li><a href="/products/shield" id="nav_shield" >shield</a></li>
									
									<li><a href="/products/marvel" id="nav_marvel" >marvel</a></li>
									
									<li><a href="/products/hadoop" id="nav_hadoop" >hadoop</a></li>
									
									<li><a href="/downloads" id="nav_downloads" >downloads</a></li>
									
								</ul>
								
							
								<h3><a href="/subscriptions" id="nav_subscriptions" >Subscriptions</a></h3>

								
							
								<h3><a href="/learn" id="nav_learn" >Learn</a></h3>

								
								<ul>
									
									<li><a href="/guide" id="nav_guide" >docs</a></li>
									
									<li><a href="/videos" id="nav_videos" >videos</a></li>
									
									<li><a href="/training" id="nav_training" >training</a></li>
									
									<li><a href="/services" id="nav_services" >services</a></li>
									
									<li><a href="/blog" id="nav_learn_blog" >blog</a></li>
									
									<li><a href="/elasticon" id="nav_learn_elasticon" >elastic{ON}</a></li>
									
								</ul>
								
							
								<h3><a href="/community" id="nav_community" >Community</a></h3>

								
								<ul>
									
									<li><a href="/community/meetups" id="nav_meetups" >meetups</a></li>
									
									<li><a href="/https:/discuss.elastic.co" id="nav_discuss" target="_blank">discuss</a></li>
									
									<li><a href="/community/codeofconduct" id="nav_codeofconduct" >code of conduct</a></li>
									
								</ul>
								
							
								<h3><a href="/use-cases" id="nav_usecases" >Use Cases</a></h3>

								
							
								<h3><a href="/blog" id="nav_blog" >Blog</a></h3>

								
								<ul>
									
									<li><a href="/blog/category/news" id="blog_news" >News</a></li>
									
									<li><a href="/blog/category/engineering" id="blog_engineering" >Engineering</a></li>
									
									<li><a href="/blog/category/user-stories" id="blog_user-stories" >User Stories</a></li>
									
									<li><a href="/blog/category/releases" id="blog_releases" >Releases</a></li>
									
									<li><a href="/blog/archive" id="blog_archive" >Archive</a></li>
									
								</ul>
								
							
								<h3><a href="/about" id="nav_about" >About</a></h3>

								
								<ul>
									
									<li><a href="/about/leadership" id="nav_leadership" >leadership</a></li>
									
									<li><a href="/about/board" id="nav_board" >board of directors</a></li>
									
									<li><a href="/about/careers" id="nav_careers" >careers</a></li>
									
									<li><a href="/about/partners" id="nav_partners" >partners</a></li>
									
									<li><a href="/about/press" id="nav_press" >press</a></li>
									
								</ul>
								
							
						</div>
					</div>
				</nav>
			<!-- </div> -->
		</div>
	</div>
</div>
<!-- Mobile Menu -->


		</div>
	</div>
</div>
<div class="header-search-wrapper">	
	<div class="container">
		<div class="big-search">
			<i class="big-search-icon"></i>
			<form method="get" action="/search" autocomplete="on" name="searchForm" id="searchfrm">
				<ul class="tags-wrapper">
					<li class="search-field"><input type="text" class="form-control global-input" id="autocomplete" name="q"></li>
				</ul>
			</form>
			<a href="#" class="header-search-cancel"></a>
		</div>
		<div class="nav-auto-complete"></div>
	</div>
</div>
<style>	
	
	
		.m-shortcuts li a.m-search {
			background: url("https://static-www.elastic.co/assets/blt174b13be89ff803c/m-search-icon.png?q=100") no-repeat scroll center center rgba(0, 0, 0, 0);
			background-size: contain;}
	
		.m-shortcuts li a.m-docs {
			background: url("https://static-www.elastic.co/assets/blt5ba03f594a7d610a/m-guide-icon.png?q=100") no-repeat scroll center center rgba(0, 0, 0, 0);
			background-size: contain;}
	
		.m-shortcuts li a.m-contact {
			background: url("https://static-www.elastic.co/assets/blt38c3e853c4b1174d/m-contact-icon.png?q=100") no-repeat scroll center center rgba(0, 0, 0, 0);
			background-size: contain;}
		
</style>
		</div>
	</div>
  	<div id="content">
  		
  			
            <div id="pageheader">
    <div class="container">
        <header>
            <h1><a href="/learn" title="Learn">Learn</a> |</h1>
            <h2><a href="/guide" title="Docs">Docs</a></h2>
        </header>
    </div>
</div>
<section id="guide">

            <!-- start body -->
<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch: The Definitive Guide</a></span> » <span class="breadcrumb-link"><a href="getting-started.html">Getting Started </a></span> » <span class="breadcrumb-node">Index Management</span></div><div class="navheader"><span class="prev"><a href="distributed-search.html">
              « 
              Distributed Search Execution</a>
           
        </span><span class="next">
           
          <a href="inside-a-shard.html">Inside a Shard
               »
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="index-management"></a>Index Management</h2></div></div></div><p>We have seen how Elasticsearch makes it easy to start developing a new
application without requiring any advance planning or setup.  However, it
doesn’t take long before you start wanting to fine-tune the indexing and
search process to better suit your particular use case. Almost all of these customizations relate to the index, and the types
that it contains.  In this chapter, we introduce the APIs
for managing indices and type mappings, and the most important settings.</p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_creating_an_index"></a>Creating an Index</h2></div></div></div><p>Until now, we have created a new index<a id="id-1.4.12.3.2.1" class="indexterm"></a>
<a id="id-1.4.12.3.2.2" class="indexterm"></a> by simply indexing a document into it. The index is created with the default settings, and new fields are added to the type mapping by using dynamic mapping. Now we need more control over the process: we want to ensure that the index has been created with the appropriate number of primary shards, and that analyzers and mappings are set up <span class="emphasis"><em>before</em></span> we index any data.</p><p>To do this, we have to create the index manually, passing in any settings or
type mappings in the request body, as follows:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">PUT /my_index
{
    "settings": { ... any settings ... },
    "mappings": {
        "type_one": { ... any mappings ... },
        "type_two": { ... any mappings ... },
        ...
    }
}</pre></div><p>In fact, if you want to, you <a id="id-1.4.12.3.5.1" class="indexterm"></a>
<a id="id-1.4.12.3.5.2" class="indexterm"></a>can prevent the automatic creation of indices by
adding the following setting to the <code class="literal">config/elasticsearch.yml</code> file on each
node:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">action.auto_create_index: false</pre></div><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>Later, we discuss how you can use <a class="xref" href="scale.html#index-templates" title="Index Templates">Index Templates</a> to preconfigure
automatically created indices. This is particularly useful when indexing log
data: you log into an index whose name includes the date and, as midnight
rolls over, a new properly configured index automatically springs into
existence.</p></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_deleting_an_index"></a>Deleting an Index</h2></div></div></div><p>To delete an index, use <a id="id-1.4.12.4.2.1" class="indexterm"></a>
<a id="id-1.4.12.4.2.2" class="indexterm"></a><a id="id-1.4.12.4.2.3" class="indexterm"></a>
<a id="id-1.4.12.4.2.4" class="indexterm"></a><a id="id-1.4.12.4.2.5" class="indexterm"></a>
<a id="id-1.4.12.4.2.6" class="indexterm"></a>the following request:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">DELETE /my_index</pre></div><p>You can delete multiple indices with this:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">DELETE /index_one,index_two
DELETE /index_*</pre></div><p>You can even delete <span class="emphasis"><em>all</em></span> indices with this:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">DELETE /_all</pre></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_index_settings"></a>Index Settings</h2></div></div></div><p>There are many many knobs<a id="id-1.4.12.5.2.1" class="indexterm"></a> that you can twiddle to
customize index behavior, which you can read about in the
<a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/index-modules.html" target="_top">Index Modules reference documentation</a>,
but…</p><div class="tip admon"><div class="icon"><img alt="Tip" src="images/icons/tip.png" /></div><div class="admon_content"><p>Elasticsearch comes with good defaults. Don’t twiddle these knobs until
you understand what they do and why you should change them.</p></div></div><p>Two of the most important<a id="id-1.4.12.5.4.1" class="indexterm"></a>
<a id="id-1.4.12.5.4.2" class="indexterm"></a><a id="id-1.4.12.5.4.3" class="indexterm"></a><a id="id-1.4.12.5.4.4" class="indexterm"></a>
<a id="id-1.4.12.5.4.5" class="indexterm"></a> settings are as follows:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">number_of_shards</code>
</span></dt><dd>
    The number of primary shards that an index should have,
    which defaults to <code class="literal">5</code>.  This setting cannot be changed
    after index creation.
</dd><dt><span class="term">
<code class="literal">number_of_replicas</code>
</span></dt><dd>
    The number of replica shards (copies) that each primary shard
    should have, which defaults to <code class="literal">1</code>.  This setting can be changed
    at any time on a live index.
</dd></dl></div><p>For instance, we could create a small index—just<a id="id-1.4.12.5.6.1" class="indexterm"></a>
<a id="id-1.4.12.5.6.2" class="indexterm"></a><a id="id-1.4.12.5.6.3" class="indexterm"></a>
<a id="id-1.4.12.5.6.4" class="indexterm"></a> one primary shard—and no replica shards with the following request:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">PUT /my_temp_index
{
    "settings": {
        "number_of_shards" :   1,
        "number_of_replicas" : 0
    }
}</pre></div><div class="sense_widget" data-snippet="snippets/070_Index_Mgmt/10_Settings.json"></div><p>Later, we can change the number of replica shards dynamically using the
<code class="literal">update-index-settings</code> API as<a id="id-1.4.12.5.9.2" class="indexterm"></a> follows:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">PUT /my_temp_index/_settings
{
    "number_of_replicas": 1
}</pre></div><div class="sense_widget" data-snippet="snippets/070_Index_Mgmt/10_Settings.json"></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="configuring-analyzers"></a>Configuring Analyzers</h2></div></div></div><p>The third important index setting is the <code class="literal">analysis</code> section,<a id="id-1.4.12.6.2.2" class="indexterm"></a>
<a id="id-1.4.12.6.2.3" class="indexterm"></a> which is used
to configure existing analyzers or to create new custom analyzers
specific to your index.</p><p>In <a class="xref" href="mapping-analysis.html#analysis-intro" title="Analysis and Analyzers">Analysis and Analyzers</a>, we introduced some of the built-in <a id="id-1.4.12.6.3.2" class="indexterm"></a>
<a id="id-1.4.12.6.3.3" class="indexterm"></a>analyzers,
which are used to convert full-text strings into an inverted index,
suitable for searching.</p><p>The <code class="literal">standard</code> analyzer, which is the default analyzer
used for full-text fields,<a id="id-1.4.12.6.4.2" class="indexterm"></a>
<a id="id-1.4.12.6.4.3" class="indexterm"></a> is a good choice for most Western languages.<a id="id-1.4.12.6.4.4" class="indexterm"></a>
<a id="id-1.4.12.6.4.5" class="indexterm"></a><a id="id-1.4.12.6.4.6" class="indexterm"></a><a id="id-1.4.12.6.4.7" class="indexterm"></a><a id="id-1.4.12.6.4.8" class="indexterm"></a><a id="id-1.4.12.6.4.9" class="indexterm"></a>
It consists of the following:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
The <code class="literal">standard</code> tokenizer, which splits the input text on word boundaries
</li><li class="listitem">
The <code class="literal">standard</code> token filter, which is intended to tidy up the tokens
  emitted by the tokenizer (but currently does nothing)
</li><li class="listitem">
The <code class="literal">lowercase</code> token filter, which converts all tokens into lowercase
</li><li class="listitem">
The <code class="literal">stop</code> token filter, which removes stopwords—common words
  that have little impact on search relevance, such as <code class="literal">a</code>, <code class="literal">the</code>, <code class="literal">and</code>,
  <code class="literal">is</code>.
</li></ul></div><p>By default, the stopwords filter is disabled.  You can enable it by creating a
custom analyzer based on the <code class="literal">standard</code> analyzer and setting the <code class="literal">stopwords</code>
parameter.<a id="id-1.4.12.6.6.3" class="indexterm"></a> Either provide a list of stopwords or tell it to use a predefined
stopwords list from a particular language.</p><p>In the following example, we create a new analyzer called the <code class="literal">es_std</code>
analyzer, which uses the predefined list of <a id="id-1.4.12.6.7.2" class="indexterm"></a>
<a id="id-1.4.12.6.7.3" class="indexterm"></a>Spanish stopwords:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">PUT /spanish_docs
{
    "settings": {
        "analysis": {
            "analyzer": {
                "es_std": {
                    "type":      "standard",
                    "stopwords": "_spanish_"
                }
            }
        }
    }
}</pre></div><div class="sense_widget" data-snippet="snippets/070_Index_Mgmt/15_Configure_Analyzer.json"></div><p>The <code class="literal">es_std</code> analyzer is not global—it exists only in the <code class="literal">spanish_docs</code>
index where we have defined it. To test it with the <code class="literal">analyze</code> API, we must
specify the index name:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">GET /spanish_docs/_analyze?analyzer=es_std
El veloz zorro marrón</pre></div><div class="sense_widget" data-snippet="snippets/070_Index_Mgmt/15_Configure_Analyzer.json"></div><p>The abbreviated results show that the Spanish stopword <code class="literal">El</code> has been
removed correctly:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">{
  "tokens" : [
    { "token" :    "veloz",   "position" : 2 },
    { "token" :    "zorro",   "position" : 3 },
    { "token" :    "marrón",  "position" : 4 }
  ]
}</pre></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="custom-analyzers"></a>Custom Analyzers</h2></div></div></div><p>While Elasticsearch comes with a number of analyzers available out of the box,
the real power comes from the ability to create your own custom analyzers
by combining character filters, tokenizers, and token filters in a
configuration that suits your particular data.</p><p>In <a class="xref" href="mapping-analysis.html#analysis-intro" title="Analysis and Analyzers">Analysis and Analyzers</a>, we said that an <span class="emphasis"><em>analyzer</em></span> is a wrapper that combines
three functions into a single package,<a id="id-1.4.12.7.3.3" class="indexterm"></a>
<a id="id-1.4.12.7.3.4" class="indexterm"></a> which are executed in sequence:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
Character filters
</span></dt><dd><p class="simpara">Character filters<a id="id-1.4.12.7.4.1.2.1.1" class="indexterm"></a> are used to “tidy up” a string before it is tokenized.
For instance, if our text is in HTML format, it will contain HTML tags like
<code class="literal">&lt;p&gt;</code> or <code class="literal">&lt;div&gt;</code> that we don’t want to be indexed. We can use the
<a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-htmlstrip-charfilter.html" target="_top"><code class="literal">html_strip</code> character filter</a>
to remove all HTML tags and to convert HTML entities like <code class="literal">&amp;Aacute;</code> into the
corresponding Unicode character <code class="literal">Á</code>.</p><p class="simpara">An analyzer may have zero or more character filters.</p></dd><dt><span class="term">
Tokenizers
</span></dt><dd><p class="simpara">An analyzer <span class="emphasis"><em>must</em></span> have a single tokenizer.<a id="id-1.4.12.7.4.2.2.1.2" class="indexterm"></a>
<a id="id-1.4.12.7.4.2.2.1.3" class="indexterm"></a>  The tokenizer breaks up the
string into individual terms or tokens. The
<a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-standard-tokenizer.html" target="_top"><code class="literal">standard</code> tokenizer</a>,
which is used<a id="id-1.4.12.7.4.2.2.1.5" class="indexterm"></a> in the <code class="literal">standard</code> analyzer, breaks up a string into
individual terms on word boundaries, and removes most punctuation, but
other tokenizers exist that have different behavior.</p><p class="simpara">For instance, the
<a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-keyword-tokenizer.html" target="_top"><code class="literal">keyword</code> tokenizer</a>
outputs exactly<a id="id-1.4.12.7.4.2.2.2.2" class="indexterm"></a> the same string as it received, without any tokenization. The
<a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-whitespace-tokenizer.html" target="_top"><code class="literal">whitespace</code> tokenizer</a>
splits text<a id="id-1.4.12.7.4.2.2.2.4" class="indexterm"></a> on whitespace only. The
<a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-pattern-tokenizer.html" target="_top"><code class="literal">pattern</code> tokenizer</a> can
be used to split text on a <a id="id-1.4.12.7.4.2.2.2.6" class="indexterm"></a>matching regular expression.</p></dd><dt><span class="term">
Token filters
</span></dt><dd><p class="simpara">After tokenization, the resulting <span class="emphasis"><em>token stream</em></span> is passed through any
specified token filters,<a id="id-1.4.12.7.4.3.2.1.2" class="indexterm"></a> in the order in which they are specified.</p><p class="simpara">Token filters may change, add, or remove tokens.  We have already mentioned the
<a class="ulink" href="http://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-lowercase-tokenizer.html" target="_top"><code class="literal">lowercase</code></a> and
<a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-stop-tokenfilter.html" target="_top"><code class="literal">stop</code> token filters</a>,
but there are many more available in Elasticsearch.
<a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-stemmer-tokenfilter.html" target="_top">Stemming token filters</a>
“stem” words to <a id="id-1.4.12.7.4.3.2.2.4" class="indexterm"></a>their root form. The
<a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-asciifolding-tokenfilter.html" target="_top"><code class="literal">ascii_folding</code> filter</a>
removes diacritics,<a id="id-1.4.12.7.4.3.2.2.6" class="indexterm"></a> converting a term like <code class="literal">"très"</code> into <code class="literal">"tres"</code>. The
<a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-ngram-tokenfilter.html" target="_top"><code class="literal">ngram</code></a> and
<a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-edgengram-tokenfilter.html" target="_top"><code class="literal">edge_ngram</code> token filters</a> can produce<a id="id-1.4.12.7.4.3.2.2.11" class="indexterm"></a><a id="id-1.4.12.7.4.3.2.2.12" class="indexterm"></a>
tokens suitable for partial matching or autocomplete.</p></dd></dl></div><p>In <a class="xref" href="search-in-depth.html" title="Search in Depth">Search in Depth </a>, we discuss examples of where and how to use these
tokenizers and filters.  But first, we need to explain how to create a custom
analyzer.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_creating_a_custom_analyzer"></a>Creating a Custom Analyzer</h3></div></div></div><p>In the same way as<a id="id-1.4.12.7.6.2.1" class="indexterm"></a>
<a id="id-1.4.12.7.6.2.2" class="indexterm"></a>
<a id="id-1.4.12.7.6.2.3" class="indexterm"></a><a id="id-1.4.12.7.6.2.4" class="indexterm"></a>
<a id="id-1.4.12.7.6.2.5" class="indexterm"></a>
<a id="id-1.4.12.7.6.2.6" class="indexterm"></a> we configured the <code class="literal">es_std</code> analyzer previously, we can configure
character filters, tokenizers, and token filters in their respective sections
under <code class="literal">analysis</code>:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">PUT /my_index
{
    "settings": {
        "analysis": {
            "char_filter": { ... custom character filters ... },
            "tokenizer":   { ...    custom tokenizers     ... },
            "filter":      { ...   custom token filters   ... },
            "analyzer":    { ...    custom analyzers      ... }
        }
    }
}</pre></div><p>As an example, let’s set up a custom analyzer that will do the following:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
Strip out HTML by using the <code class="literal">html_strip</code> character filter.
</li><li class="listitem"><p class="simpara">
Replace <code class="literal">&amp;</code> characters with <code class="literal">" and "</code>, using a custom <code class="literal">mapping</code>
   character filter:
</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">"char_filter": {
    "&amp;_to_and": {
        "type":       "mapping",
        "mappings": [ "&amp;=&gt; and "]
    }
}</pre></div></li><li class="listitem">
Tokenize words, using the <code class="literal">standard</code> tokenizer.
</li><li class="listitem">
Lowercase terms, using the <code class="literal">lowercase</code> token filter.
</li><li class="listitem"><p class="simpara">
Remove a custom list of stopwords, using a custom <code class="literal">stop</code> token filter:
</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">"filter": {
    "my_stopwords": {
        "type":        "stop",
        "stopwords": [ "the", "a" ]
    }
}</pre></div></li></ol></div><p>Our analyzer definition combines the predefined tokenizer and filters with the
custom filters that we have configured previously:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">"analyzer": {
    "my_analyzer": {
        "type":           "custom",
        "char_filter":  [ "html_strip", "&amp;_to_and" ],
        "tokenizer":      "standard",
        "filter":       [ "lowercase", "my_stopwords" ]
    }
}</pre></div><p>To put it all together, the whole <code class="literal">create-index</code> request<a id="id-1.4.12.7.6.8.2" class="indexterm"></a> looks like this:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">PUT /my_index
{
    "settings": {
        "analysis": {
            "char_filter": {
                "&amp;_to_and": {
                    "type":       "mapping",
                    "mappings": [ "&amp;=&gt; and "]
            }},
            "filter": {
                "my_stopwords": {
                    "type":       "stop",
                    "stopwords": [ "the", "a" ]
            }},
            "analyzer": {
                "my_analyzer": {
                    "type":         "custom",
                    "char_filter":  [ "html_strip", "&amp;_to_and" ],
                    "tokenizer":    "standard",
                    "filter":       [ "lowercase", "my_stopwords" ]
            }}
}}}</pre></div><div class="sense_widget" data-snippet="snippets/070_Index_Mgmt/20_Custom_analyzer.json"></div><p>After creating the index, use the <code class="literal">analyze</code> API to<a id="id-1.4.12.7.6.11.2" class="indexterm"></a>
<a id="id-1.4.12.7.6.11.3" class="indexterm"></a> test the new analyzer:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">GET /my_index/_analyze?analyzer=my_analyzer
The quick &amp; brown fox</pre></div><div class="sense_widget" data-snippet="snippets/070_Index_Mgmt/20_Custom_analyzer.json"></div><p>The following abbreviated results show that our analyzer is working correctly:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">{
  "tokens" : [
      { "token" :   "quick",    "position" : 2 },
      { "token" :   "and",      "position" : 3 },
      { "token" :   "brown",    "position" : 4 },
      { "token" :   "fox",      "position" : 5 }
    ]
}</pre></div><p>The analyzer is not much use unless we tell <a id="id-1.4.12.7.6.16.1" class="indexterm"></a>
<a id="id-1.4.12.7.6.16.2" class="indexterm"></a>
<a id="id-1.4.12.7.6.16.3" class="indexterm"></a><a id="id-1.4.12.7.6.16.4" class="indexterm"></a>
<a id="id-1.4.12.7.6.16.5" class="indexterm"></a>Elasticsearch where to use it. We
can apply it to a <code class="literal">string</code> field with a mapping such as the following:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">PUT /my_index/_mapping/my_type
{
    "properties": {
        "title": {
            "type":      "string",
            "analyzer":  "my_analyzer"
        }
    }
}</pre></div><div class="sense_widget" data-snippet="snippets/070_Index_Mgmt/20_Custom_analyzer.json"></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="mapping"></a>Types and Mappings</h2></div></div></div><p>A <span class="emphasis"><em>type</em></span> in Elasticsearch represents a class of similar documents.<a id="id-1.4.12.8.2.2" class="indexterm"></a>
<a id="id-1.4.12.8.2.3" class="indexterm"></a> A type
consists of a <span class="emphasis"><em>name</em></span>—such as <code class="literal">user</code> or <code class="literal">blogpost</code>—and a <span class="emphasis"><em>mapping</em></span>. The
mapping, <a id="id-1.4.12.8.2.8" class="indexterm"></a>like a database schema, describes the fields or <span class="emphasis"><em>properties</em></span> that
documents of that type may have, <a id="id-1.4.12.8.2.10" class="indexterm"></a>
<a id="id-1.4.12.8.2.11" class="indexterm"></a>the datatype of each field—such as <code class="literal">string</code>,
<code class="literal">integer</code>, or <code class="literal">date</code>—and how those fields should be indexed and stored by
Lucene.</p><p>In <a class="xref" href="data-in-data-out.html#document" title="Document 란 무엇인가?">Document 란 무엇인가?</a>, we said that a type is like a table in a relational database.
While this is a useful way to think about types initially, it is worth
explaining in more detail exactly what a type is and how they are implemented
on top of Lucene.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_how_lucene_sees_documents"></a>How Lucene Sees Documents</h3></div></div></div><p>A document in Lucene consists of a simple list of field-value pairs.<a id="id-1.4.12.8.4.2.1" class="indexterm"></a>
<a id="id-1.4.12.8.4.2.2" class="indexterm"></a> A field
must have at least one value, but any field can contain multiple values.
Similarly, a single string value may be converted into multiple values by the
analysis process.  Lucene doesn’t care if the values are strings or numbers or
dates—all values are just treated as <span class="emphasis"><em>opaque bytes</em></span>.</p><p>When we index a document in Lucene, the values for each field are added to the
inverted index for the associated field.  Optionally, the original values may
also be <span class="emphasis"><em>stored</em></span> unchanged so that they can be retrieved later.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_how_types_are_implemented"></a>How Types Are Implemented</h3></div></div></div><p>Elasticsearch types are <a id="id-1.4.12.8.5.2.1" class="indexterm"></a>
<a id="id-1.4.12.8.5.2.2" class="indexterm"></a>implemented on top of this simple foundation. An index
may have several types, each with its own mapping, and documents of any of
these types may be stored in the same index.</p><p>Because Lucene has no concept of document types, the type name of each
document is stored with the document in a metadata field called <code class="literal">_type</code>.<a id="id-1.4.12.8.5.3.2" class="indexterm"></a> When
we search for documents of a particular type, Elasticsearch simply uses a
filter on the <code class="literal">_type</code> field to restrict results to documents of that type.</p><p>Lucene also has no concept of mappings.<a id="id-1.4.12.8.5.4.1" class="indexterm"></a> Mappings are the layer
that Elasticsearch uses to <span class="emphasis"><em>map</em></span> complex JSON documents into the
simple flat documents that Lucene expects to receive.</p><p>For instance, the mapping for the <code class="literal">name</code> field in the <code class="literal">user</code> type may declare
that the field is a <code class="literal">string</code> field, and that its value should be analyzed
by the <code class="literal">whitespace</code> analyzer before being indexed into the inverted
index called <code class="literal">name</code>:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">"name": {
    "type":     "string",
    "analyzer": "whitespace"
}</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_avoiding_type_gotchas"></a>Avoiding Type Gotchas</h3></div></div></div><p>The fact that documents of different types can be added to the same index
introduces some unexpected<a id="id-1.4.12.8.6.2.1" class="indexterm"></a>
<a id="id-1.4.12.8.6.2.2" class="indexterm"></a> complications.</p><p>Imagine that we have two types in our index: <code class="literal">blog_en</code> for blog posts in
English, and <code class="literal">blog_es</code> for blog posts in Spanish.  Both types have a
<code class="literal">title</code> field, but one type uses the <code class="literal">english</code> analyzer and
the other type uses the <code class="literal">spanish</code> analyzer.</p><p>The problem is illustrated by the following query:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">GET /_search
{
    "query": {
        "match": {
            "title": "The quick brown fox"
        }
    }
}</pre></div><p>We are searching in the <code class="literal">title</code> field in both types.  The query string needs
to be analyzed, but which analyzer does it use: <code class="literal">spanish</code> or <code class="literal">english</code>? It
will use the analyzer for the first <code class="literal">title</code> field that it finds, which
will be correct for some docs and incorrect for the others.</p><p>We can avoid this problem either by naming the fields differently—for example, <code class="literal">title_en</code> and <code class="literal">title_es</code>—or by explicitly including the type name in the
field name and querying each field separately:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">GET /_search
{
    "query": {
        "multi_match": { <a id="CO30-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
            "query":    "The quick brown fox",
            "fields": [ "blog_en.title", "blog_es.title" ]
        }
    }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO30-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The <code class="literal">multi_match</code> query runs a <code class="literal">match</code> query on multiple fields
    and combines the results.
</p></td></tr></table></div><p>Our new query uses the <code class="literal">english</code> analyzer for the field <code class="literal">blog_en.title</code> and
the <code class="literal">spanish</code> analyzer for the field <code class="literal">blog_es.title</code>, and combines the results
from both fields into an overall relevance score.</p><p>This solution can help when both fields have the same datatype, but consider
what would happen if you indexed these two documents into the same index:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Type: user
</li></ul></div><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js"> { "login": "john_smith" }</pre></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Type: event
</li></ul></div><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js"> { "login": "2014-06-01" }</pre></div><p>Lucene doesn’t care that one field contains a string and the other field
contains a date. It will happily index the byte values from both fields.</p><p>However, if we now try to <span class="emphasis"><em>sort</em></span> on the <code class="literal">event.login</code> field, Elasticsearch
needs to load the values in the <code class="literal">login</code> field into memory. As we said in
<a class="xref" href="sorting.html#fielddata-intro" title="Fielddata">Fielddata</a>, it loads the values for  <span class="emphasis"><em>all documents</em></span> in the index
regardless of their type.</p><p>It will try to load these values either as a string or as a date, depending on
which <code class="literal">login</code> field it sees first. This will either produce unexpected results
or fail outright.</p><div class="tip admon"><div class="icon"><img alt="Tip" src="images/icons/tip.png" /></div><div class="admon_content"><p>To ensure that you don’t run into these conflicts, it is advisable to
ensure that fields with the <span class="emphasis"><em>same name</em></span> are mapped in the <span class="emphasis"><em>same way</em></span> in every
type in an index.</p></div></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="root-object"></a>The Root Object</h2></div></div></div><p>The uppermost level of a mapping is known <a id="id-1.4.12.9.2.1" class="indexterm"></a>
<a id="id-1.4.12.9.2.2" class="indexterm"></a><a id="id-1.4.12.9.2.3" class="indexterm"></a>as the <span class="emphasis"><em>root object</em></span>. It may
contain the following:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
A <span class="emphasis"><em>properties</em></span> section, which lists the mapping for each field that a
  document may contain
</li><li class="listitem">
Various metadata fields, all of which start with an underscore, such
  as <code class="literal">_type</code>, <code class="literal">_id</code>, and <code class="literal">_source</code>
</li><li class="listitem">
Settings, which control how the dynamic detection of new fields
  is handled, such as <code class="literal">analyzer</code>, <code class="literal">dynamic_date_formats</code>, and
  <code class="literal">dynamic_templates</code>
</li><li class="listitem">
Other settings, which can be applied both to the root object and to fields
  of type <code class="literal">object</code>, such as <code class="literal">enabled</code>, <code class="literal">dynamic</code>, and <code class="literal">include_in_all</code>
</li></ul></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_properties"></a>Properties</h3></div></div></div><p>We have already discussed the three most important settings for document
fields or <a id="id-1.4.12.9.4.2.1" class="indexterm"></a>
<a id="id-1.4.12.9.4.2.2" class="indexterm"></a><a id="id-1.4.12.9.4.2.3" class="indexterm"></a>
<a id="id-1.4.12.9.4.2.4" class="indexterm"></a>properties in <a class="xref" href="mapping-analysis.html#core-fields" title="Core Simple Field Types">Core Simple Field Types</a> and <a class="xref" href="mapping-analysis.html#complex-core-fields" title="Complex Core Field Types">Complex Core Field Types</a>:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">type</code>
</span></dt><dd>
   The datatype that the field contains, such as <code class="literal">string</code> or <code class="literal">date</code>
</dd><dt><span class="term">
<code class="literal">index</code>
</span></dt><dd>
   Whether a field should be searchable as full text (<code class="literal">analyzed</code>), searchable as an exact value (<code class="literal">not_analyzed</code>), or not searchable at all (<code class="literal">no</code>)
</dd><dt><span class="term">
<code class="literal">analyzer</code>
</span></dt><dd>
   Which <code class="literal">analyzer</code> to use for a full-text field, both at index time and at search time
</dd></dl></div><p>We will discuss other field types such as <code class="literal">ip</code>, <code class="literal">geo_point</code>, and <code class="literal">geo_shape</code> in
the appropriate sections later in the book.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="source-field"></a>Metadata: _source Field</h3></div></div></div><p>By default, Elasticsearch <a id="id-1.4.12.9.5.2.1" class="indexterm"></a>
<a id="id-1.4.12.9.5.2.2" class="indexterm"></a><a id="id-1.4.12.9.5.2.3" class="indexterm"></a>stores the JSON string representing the
document body in the <code class="literal">_source</code> field. Like all stored fields, the <code class="literal">_source</code>
field is compressed before being written to disk.</p><p>This is almost always desired functionality because it means the following:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
The full document is available directly from the search results—no need
  for a separate round-trip to fetch the document from another data store.
</li><li class="listitem">
Partial <code class="literal">update</code> requests will not function without the <code class="literal">_source</code> field.
</li><li class="listitem">
When your mapping changes and you need to reindex your data, you can
  do so directly from Elasticsearch instead of having to retrieve all of your
  documents from another (usually slower) data store.
</li><li class="listitem">
Individual fields can be extracted from the <code class="literal">_source</code> field and returned
  in <code class="literal">get</code> or <code class="literal">search</code> requests when you don’t need to see the whole document.
</li><li class="listitem">
It is easier to debug queries, because you can see exactly what each document
  contains, rather than having to guess their contents from a list of IDs.
</li></ul></div><p>That said, storing the <code class="literal">_source</code> field does use disk space.  If none of the
preceding reasons is important to you, you can disable the <code class="literal">_source</code> field with
the following mapping:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">PUT /my_index
{
    "mappings": {
        "my_type": {
            "_source": {
                "enabled":  false
            }
        }
    }
}</pre></div><p>In a search request, you can ask for only certain fields by specifying the
<code class="literal">_source</code> parameter in the request body:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">GET /_search
{
    "query":   { "match_all": {}},
    "_source": [ "title", "created" ]
}</pre></div><div class="sense_widget" data-snippet="snippets/070_Index_Mgmt/31_Source_field.json"></div><p>Values for these fields will be extracted from the <code class="literal">_source</code> field and
returned instead of the full <code class="literal">_source</code>.</p><div class="sidebar"><div class="titlepage"><div><div><p class="title"><strong>Stored Fields</strong></p></div></div></div><p>Besides indexing the values of a field, you <a id="id-1.4.12.9.5.11.2.1" class="indexterm"></a><a id="id-1.4.12.9.5.11.2.2" class="indexterm"></a>
<a id="id-1.4.12.9.5.11.2.3" class="indexterm"></a>can also choose to <code class="literal">store</code> the
original field value for later retrieval. Users with a Lucene background use
stored fields to choose which fields they would like to be able to return in
their search results. In fact, the <code class="literal">_source</code> field is a stored field.</p><p>In Elasticsearch, setting individual document fields to be stored is usually a
false optimization. The whole document is already stored as the <code class="literal">_source</code>
field. It is almost always better to just extract the fields that you need
by using the <code class="literal">_source</code> parameter.</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="all-field"></a>Metadata: _all Field</h3></div></div></div><p>In <a class="xref" href="search.html#search-lite" title="Search Lite">Search <span class="emphasis"><em>Lite</em></span></a>, we introduced the <code class="literal">_all</code> field: a special field that
indexes the <a id="id-1.4.12.9.6.2.3" class="indexterm"></a>
<a id="id-1.4.12.9.6.2.4" class="indexterm"></a><a id="id-1.4.12.9.6.2.5" class="indexterm"></a>values from all other fields as one big string. The <code class="literal">query_string</code>
query clause (and searches performed as <code class="literal">?q=john</code>) defaults to searching in
the <code class="literal">_all</code> field if no other field is specified.</p><p>The <code class="literal">_all</code> field is useful during the exploratory phase of a new application,
while you are still unsure about the final structure that your documents will
have. You can throw any query string at it and you have a good chance of
finding the document you’re after:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">GET /_search
{
    "match": {
        "_all": "john smith marketing"
    }
}</pre></div><p>As your application evolves and your search requirements become more exacting,
you will find yourself using the <code class="literal">_all</code> field less and less. The <code class="literal">_all</code> field
is a shotgun approach to search. By querying individual fields, you have more
flexbility, power, and fine-grained control over which results are considered
to be most relevant.</p><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>One of the important factors taken into account by the
<a class="link" href="sorting.html#relevance-intro" title="Relevance가 무엇인가?">relevance algorithm</a>
is the length of the field: the shorter the field, the more important. A term
that appears in a short <code class="literal">title</code> field is likely to be more important than the
same term that appears somewhere in a long <code class="literal">content</code> field. This distinction
between field lengths disappears in the <code class="literal">_all</code> field.</p></div></div><p>If you decide that you no longer need the <code class="literal">_all</code> field, you can disable it
with this mapping:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">PUT /my_index/_mapping/my_type
{
    "my_type": {
        "_all": { "enabled": false }
    }
}</pre></div><p>Inclusion in the <code class="literal">_all</code> field can be controlled on a field-by-field basis
by using the <code class="literal">include_in_all</code> setting, <a id="id-1.4.12.9.6.9.3" class="indexterm"></a>which defaults to <code class="literal">true</code>.  Setting
<code class="literal">include_in_all</code> on an object (or on the root object) changes the
default for all fields within that object.</p><p>You may find that you want to keep the <code class="literal">_all</code> field around to use
as a catchall full-text field just for specific fields, such as
<code class="literal">title</code>, <code class="literal">overview</code>, <code class="literal">summary</code>, and <code class="literal">tags</code>. Instead of disabling the <code class="literal">_all</code>
field completely, disable <code class="literal">include_in_all</code> for all fields by default,
and enable it only on the fields you choose:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">PUT /my_index/my_type/_mapping
{
    "my_type": {
        "include_in_all": false,
        "properties": {
            "title": {
                "type":           "string",
                "include_in_all": true
            },
            ...
        }
    }
}</pre></div><p>Remember that the <code class="literal">_all</code> field is just<a id="id-1.4.12.9.6.12.2" class="indexterm"></a>
<a id="id-1.4.12.9.6.12.3" class="indexterm"></a> an analyzed <code class="literal">string</code> field.  It
uses the default analyzer to analyze its values, regardless of which
analyzer has been set on the fields where the values originate.  And
like any <code class="literal">string</code> field, you can configure which analyzer the <code class="literal">_all</code>
field should use:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">PUT /my_index/my_type/_mapping
{
    "my_type": {
        "_all": { "analyzer": "whitespace" }
    }
}</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_metadata_document_identity"></a>Metadata: Document Identity</h3></div></div></div><p>There are four metadata fields <a id="id-1.4.12.9.7.2.1" class="indexterm"></a>
<a id="id-1.4.12.9.7.2.2" class="indexterm"></a>associated with document identity:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">_id</code>
</span></dt><dd>
   The string ID of the document
</dd><dt><span class="term">
<code class="literal">_type</code>
</span></dt><dd>
   The type name of the document
</dd><dt><span class="term">
<code class="literal">_index</code>
</span></dt><dd>
   The index where the document lives
</dd><dt><span class="term">
<code class="literal">_uid</code>
</span></dt><dd>
   The <code class="literal">_type</code> and <code class="literal">_id</code> concatenated together as <code class="literal">type#id</code>
</dd></dl></div><p>By default, the <code class="literal">_uid</code> field is<a id="id-1.4.12.9.7.4.2" class="indexterm"></a> stored (can be retrieved) and
indexed (searchable).  The <code class="literal">_type</code> field<a id="id-1.4.12.9.7.4.4" class="indexterm"></a><a id="id-1.4.12.9.7.4.5" class="indexterm"></a><a id="id-1.4.12.9.7.4.6" class="indexterm"></a> is indexed but not stored,
and the <code class="literal">_id</code> and <code class="literal">_index</code> fields are neither indexed nor stored, meaning
they don’t really exist.</p><p>In spite of this, you can query the <code class="literal">_id</code> field as though it were a real
field.  Elasticsearch uses the <code class="literal">_uid</code> field to derive the <code class="literal">_id</code>. Although you
can change the <code class="literal">index</code> and <code class="literal">store</code> settings for these fields, you almost
never need to do so.</p><p>The <code class="literal">_id</code> field does have one setting that you may want to use: the <code class="literal">path</code>
setting tells<a id="id-1.4.12.9.7.6.3" class="indexterm"></a>
<a id="id-1.4.12.9.7.6.4" class="indexterm"></a><a id="id-1.4.12.9.7.6.5" class="indexterm"></a> Elasticsearch that it should extract the value for the
<code class="literal">_id</code> from a field within the document itself.</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">PUT /my_index
{
    "mappings": {
        "my_type": {
            "_id": {
                "path": "doc_id" <a id="CO31-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
            },
            "properties": {
                "doc_id": {
                    "type":   "string",
                    "index":  "not_analyzed"
                }
            }
        }
    }
}</pre></div><div class="sense_widget" data-snippet="snippets/070_Index_Mgmt/33_ID_path.json"></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO31-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
Extract the doc <code class="literal">_id</code> from the <code class="literal">doc_id</code> field.
</p></td></tr></table></div><p>Then, when you index a document:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">POST /my_index/my_type
{
    "doc_id": "123"
}</pre></div><div class="sense_widget" data-snippet="snippets/070_Index_Mgmt/33_ID_path.json"></div><p>the <code class="literal">_id</code> value will be <a id="id-1.4.12.9.7.13.2" class="indexterm"></a>extracted from the <code class="literal">doc_id</code> field in the document
body:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">{
    "_index":   "my_index",
    "_type":    "my_type",
    "_id":      "123", <a id="CO32-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
    "_version": 1,
    "created":  true
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO32-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The <code class="literal">_id</code> has been extracted correctly.
</p></td></tr></table></div><div class="warning admon"><div class="icon"><img alt="Warning" src="images/icons/warning.png" /></div><div class="admon_content"><p>While this is very convenient, be aware that it has a slight
performance impact on <code class="literal">bulk</code> requests (see <a class="xref" href="distributed-docs.html#bulk-format" title="Why the Funny Format?">Why the Funny Format?</a>). The node handling
the request can no longer use the optimized bulk format to parse just
the metadata line in order to decide which shard should receive the request.
Instead, it has to parse the document body as well.</p></div></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="dynamic-mapping"></a>Dynamic Mapping</h2></div></div></div><p>When Elasticsearch encounters a previously <a id="id-1.4.12.10.2.1" class="indexterm"></a>
<a id="id-1.4.12.10.2.2" class="indexterm"></a><a id="id-1.4.12.10.2.3" class="indexterm"></a>unknown field in a document, it
uses <a class="link" href="mapping-analysis.html#mapping-intro" title="Mapping"><span class="emphasis"><em>dynamic mapping</em></span></a> to determine the datatype for the
field and automatically adds the new field to the type mapping.</p><p>Sometimes this is the desired behavior and sometimes it isn’t. Perhaps
you don’t know what fields will be added to your documents later,
but you want them to be indexed automatically.  Perhaps you just want
to ignore them.  Or—especially if you are using Elasticsearch as a
primary data store—perhaps you want unknown fields to throw an exception
to alert you to the problem.</p><p>Fortunately, you can control this behavior<a id="id-1.4.12.10.4.1" class="indexterm"></a> with the <code class="literal">dynamic</code> setting,
which accepts the following options:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">true</code>
</span></dt><dd>
   Add new fields dynamically—the default
</dd><dt><span class="term">
<code class="literal">false</code>
</span></dt><dd>
   Ignore new fields
</dd><dt><span class="term">
<code class="literal">strict</code>
</span></dt><dd>
   Throw an exception if an unknown field is encountered
</dd></dl></div><p>The <code class="literal">dynamic</code> setting may be applied to the root object or to any field
of type <code class="literal">object</code>.  You could set <code class="literal">dynamic</code> to <code class="literal">strict</code> by default,
but enable it just for a specific inner object:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">PUT /my_index
{
    "mappings": {
        "my_type": {
            "dynamic":      "strict", <a id="CO33-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
            "properties": {
                "title":  { "type": "string"},
                "stash":  {
                    "type":     "object",
                    "dynamic":  true <a id="CO33-2"></a><span><img src="images/icons/callouts/2.png" alt="" /></span>
                }
            }
        }
    }
}</pre></div><div class="sense_widget" data-snippet="snippets/070_Index_Mgmt/35_Dynamic_mapping.json"></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO33-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The <code class="literal">my_type</code> object will throw an exception if an unknown field
    is encountered.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO33-2"><span><img src="images/icons/callouts/2.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The <code class="literal">stash</code> object will create new fields dynamically.
</p></td></tr></table></div><p>With this mapping, you can add new searchable fields into the <code class="literal">stash</code> object:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">PUT /my_index/my_type/1
{
    "title":   "This doc adds a new field",
    "stash": { "new_field": "Success!" }
}</pre></div><div class="sense_widget" data-snippet="snippets/070_Index_Mgmt/35_Dynamic_mapping.json"></div><p>But trying to do the same at the top level will fail:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">PUT /my_index/my_type/1
{
    "title":     "This throws a StrictDynamicMappingException",
    "new_field": "Fail!"
}</pre></div><div class="sense_widget" data-snippet="snippets/070_Index_Mgmt/35_Dynamic_mapping.json"></div><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>Setting <code class="literal">dynamic</code> to <code class="literal">false</code> doesn’t alter the contents of the <code class="literal">_source</code>
field at all. The <code class="literal">_source</code> will still contain the whole JSON document that
you indexed.  However, any unknown fields will not be added to the mapping and
will not be searchable.</p></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="custom-dynamic-mapping"></a>Customizing Dynamic Mapping</h2></div></div></div><p>If you know that you are going to be adding new fields on the fly,
you probably want to leave dynamic mapping enabled.<a id="id-1.4.12.11.2.1" class="indexterm"></a>
<a id="id-1.4.12.11.2.2" class="indexterm"></a><a id="id-1.4.12.11.2.3" class="indexterm"></a>
<a id="id-1.4.12.11.2.4" class="indexterm"></a>
<a id="id-1.4.12.11.2.5" class="indexterm"></a>  At times, though,
the dynamic mapping “rules” can be a bit blunt.  Fortunately, there
are settings that you can use to customize these rules to better
suit your data.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="date-detection"></a>date_detection</h3></div></div></div><p>When Elasticsearch encounters a new string field, it checks to see if the
string contains a recognizable date, like <code class="literal">2014-01-01</code>.<a id="id-1.4.12.11.3.2.2" class="indexterm"></a><a id="id-1.4.12.11.3.2.3" class="indexterm"></a>
<a id="id-1.4.12.11.3.2.4" class="indexterm"></a>
<a id="id-1.4.12.11.3.2.5" class="indexterm"></a> If it looks
like a date, the field is added as type <code class="literal">date</code>. Otherwise, it is
added as type <code class="literal">string</code>.</p><p>Sometimes this behavior can lead to problems.  Imagine that you index
a document like this:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">{ "note": "2014-01-01" }</pre></div><p>Assuming that this is the first time that the <code class="literal">note</code> field has been seen,
it will be added as a <code class="literal">date</code> field.  But what if the next document looks
like this:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">{ "note": "Logged out" }</pre></div><p>This clearly isn’t a date, but it is too late.  The field is already
a date field and so this “malformed date” will cause an exception to be
thrown.</p><p>Date detection can be turned off by setting <code class="literal">date_detection</code> to <code class="literal">false</code>
on the <a id="id-1.4.12.11.3.8.3" class="indexterm"></a>
<a id="id-1.4.12.11.3.8.4" class="indexterm"></a>root object:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">PUT /my_index
{
    "mappings": {
        "my_type": {
            "date_detection": false
        }
    }
}</pre></div><p>With this mapping in place, a string will always be a <code class="literal">string</code>.  If you need
a <code class="literal">date</code> field, you have to add it manually.</p><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>Elasticsearch’s idea of which strings look like dates can be altered
with the <a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/dynamic-field-mapping.html#date-detection" target="_top"><code class="literal">dynamic_date_formats</code> setting</a>.</p></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="dynamic-templates"></a>dynamic_templates</h3></div></div></div><p>With <code class="literal">dynamic_templates</code>, you can take complete control <a id="id-1.4.12.11.4.2.2" class="indexterm"></a><a id="id-1.4.12.11.4.2.3" class="indexterm"></a>
<a id="id-1.4.12.11.4.2.4" class="indexterm"></a>
<a id="id-1.4.12.11.4.2.5" class="indexterm"></a>over the
mapping that is generated for newly detected fields. You
can even apply a different mapping depending on the field name
or datatype.</p><p>Each template has a name, which <a id="id-1.4.12.11.4.3.1" class="indexterm"></a>
<a id="id-1.4.12.11.4.3.2" class="indexterm"></a>you can use to describe what the template
does, a <code class="literal">mapping</code> to specify the mapping that should be applied, and
at least one parameter (such as <code class="literal">match</code>) to define which fields the template
should apply to.</p><p>Templates are checked in order; the first template that matches is
applied. For instance, we could specify two templates for <code class="literal">string</code> fields:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<code class="literal">es</code>: Field names ending in <code class="literal">_es</code> should use the <code class="literal">spanish</code> analyzer.
</li><li class="listitem">
<code class="literal">en</code>: All others should use the <code class="literal">english</code> analyzer.
</li></ul></div><p>We put the <code class="literal">es</code> template first, because it is more specific than the
catchall <code class="literal">en</code> template, which matches all string fields:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">PUT /my_index
{
    "mappings": {
        "my_type": {
            "dynamic_templates": [
                { "es": {
                      "match":              "*_es", <a id="CO34-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
                      "match_mapping_type": "string",
                      "mapping": {
                          "type":           "string",
                          "analyzer":       "spanish"
                      }
                }},
                { "en": {
                      "match":              "*", <a id="CO34-2"></a><span><img src="images/icons/callouts/2.png" alt="" /></span>
                      "match_mapping_type": "string",
                      "mapping": {
                          "type":           "string",
                          "analyzer":       "english"
                      }
                }}
            ]
}}}</pre></div><div class="sense_widget" data-snippet="snippets/070_Index_Mgmt/40_Custom_dynamic_mapping.json"></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO34-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
Match string fields whose name ends in <code class="literal">_es</code>.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO34-2"><span><img src="images/icons/callouts/2.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
Match all other string fields.
</p></td></tr></table></div><p>The <code class="literal">match_mapping_type</code>  allows <a id="id-1.4.12.11.4.10.2" class="indexterm"></a>you to apply the template only
to fields of the specified type, as detected by the standard dynamic
mapping rules, (for example <code class="literal">string</code> or <code class="literal">long</code>).</p><p>The <code class="literal">match</code> parameter matches just the field name, and the <code class="literal">path_match</code>
parameter<a id="id-1.4.12.11.4.11.3" class="indexterm"></a> matches the full path to a field in an object, so
the pattern <code class="literal">address.*.name</code> would match a field like this:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">{
    "address": {
        "city": {
            "name": "New York"
        }
    }
}</pre></div><p>The <code class="literal">unmatch</code> and <code class="literal">path_unmatch</code> patterns<a id="id-1.4.12.11.4.13.3" class="indexterm"></a><a id="id-1.4.12.11.4.13.4" class="indexterm"></a> can be used to exclude fields
that would otherwise match.</p><p>More configuration options can be found in the
<a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/dynamic-mapping.html" target="_top">dynamic mapping documentation</a>.</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="default-mapping"></a>Default Mapping</h2></div></div></div><p>Often, all types in an index share similar fields and settings. <a id="id-1.4.12.12.2.1" class="indexterm"></a>
<a id="id-1.4.12.12.2.2" class="indexterm"></a><a id="id-1.4.12.12.2.3" class="indexterm"></a> It can be
more convenient to specify these common settings in the <code class="literal">_default_</code> mapping,
instead of having to repeat yourself every time you create a new type. The
<code class="literal">_default_</code> mapping acts as a template for new types.  All types created
<span class="emphasis"><em>after</em></span> the <code class="literal">_default_</code> mapping will include all of these default settings,
unless explicitly overridden in the type mapping itself.</p><p>For instance, we can disable the <code class="literal">_all</code> field for all types,<a id="id-1.4.12.12.3.2" class="indexterm"></a> using the
<code class="literal">_default_</code> mapping, but enable it just for the <code class="literal">blog</code> type, as follows:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">PUT /my_index
{
    "mappings": {
        "_default_": {
            "_all": { "enabled":  false }
        },
        "blog": {
            "_all": { "enabled":  true  }
        }
    }
}</pre></div><div class="sense_widget" data-snippet="snippets/070_Index_Mgmt/45_Default_mapping.json"></div><p>The <code class="literal">_default_</code> mapping can also be a good place to specify index-wide
<a class="link" href="index-management.html#dynamic-templates" title="dynamic_templates">dynamic templates</a>.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="reindex"></a>Reindexing Your Data</h2></div></div></div><p>Although you can add new types to an index, or add new fields to a type, you
can’t add new analyzers or make changes to existing fields.<a id="id-1.4.12.13.2.1" class="indexterm"></a><a id="id-1.4.12.13.2.2" class="indexterm"></a>
<a id="id-1.4.12.13.2.3" class="indexterm"></a>  If you were to do
so, the data that had already been indexed would be incorrect and your
searches would no longer work as expected.</p><p>The simplest way to apply these changes to your existing data is to
reindex:  create a new index with the new settings and copy all of your
documents from the old index to the new index.</p><p>One of the advantages of the <code class="literal">_source</code> field is that you already have the
whole document available to you in Elasticsearch itself. You don’t have to
rebuild your index from the database, which is usually much slower.</p><p>To reindex all of the documents from the old index efficiently,  use
<a class="link" href="distributed-search.html#scan-scroll" title="scan and scroll"><span class="emphasis"><em>scan-and-scroll</em></span></a> to retrieve batches<a id="id-1.4.12.13.5.2" class="indexterm"></a>
<a id="id-1.4.12.13.5.3" class="indexterm"></a> of documents from the old index,
and the <a class="link" href="data-in-data-out.html#bulk" title="비용이 저렴한 bulk"><code class="literal">bulk</code> API</a> to push them into the new index.</p><div class="sidebar"><div class="titlepage"><div><div><p class="title"><strong>Reindexing in Batches</strong></p></div></div></div><p>You can run multiple reindexing jobs at the same time, but you obviously don’t
want their results to overlap.  Instead, break a big reindex down into smaller
jobs by filtering on a date or timestamp field:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">GET /old_index/_search?search_type=scan&amp;scroll=1m
{
    "query": {
        "range": {
            "date": {
                "gte":  "2014-01-01",
                "lt":   "2014-02-01"
            }
        }
    },
    "size":  1000
}</pre></div><p>If you continue making changes to the old index, you will want to make
sure that you include the newly added documents in your new index as well.
This can be done by rerunning the reindex process, but again filtering
on a date field to match only documents that have been added since the
last reindex process started.</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="index-aliases"></a>Index Aliases and Zero Downtime</h2></div></div></div><p>The problem with the reindexing process described previously is that you need
to update your application to use the new index name.<a id="id-1.4.12.14.2.1" class="indexterm"></a>  Index aliases
to the rescue!</p><p>An index <span class="emphasis"><em>alias</em></span> is like a shortcut or symbolic link, which can point to
one or more indices, and can be used in any API that expects an index name.
Aliases<a id="id-1.4.12.14.3.2" class="indexterm"></a> give us an enormous amount of flexibility. They allow us to do the following:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Switch transparently between one index and another on a running cluster
</li><li class="listitem">
Group multiple indices (for example, <code class="literal">last_three_months</code>)
</li><li class="listitem">
Create “views” on a subset of the documents in an index
</li></ul></div><p>We will talk more about the other uses for aliases later in the book. For now
we will explain how to use them to switch from an old index to a new index
with zero downtime.</p><p>There are two endpoints for managing aliases: <code class="literal">_alias</code> for single
operations, and <code class="literal">_aliases</code> to perform multiple operations atomically.</p><p>In this scenario, we will assume that your application is talking to an
index called <code class="literal">my_index</code>. In reality, <code class="literal">my_index</code> will be an alias that
points to the current real index.  We will include a version number in the
name of the real index: <code class="literal">my_index_v1</code>, <code class="literal">my_index_v2</code>, and so forth.</p><p>To start off, create the index <code class="literal">my_index_v1</code>, and set up the alias
<code class="literal">my_index</code> to point to it:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">PUT /my_index_v1 <a id="CO35-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
PUT /my_index_v1/_alias/my_index <a id="CO35-2"></a><span><img src="images/icons/callouts/2.png" alt="" /></span></pre></div><div class="sense_widget" data-snippet="snippets/070_Index_Mgmt/55_Aliases.json"></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO35-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
Create the index <code class="literal">my_index_v1</code>.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO35-2"><span><img src="images/icons/callouts/2.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
Set the <code class="literal">my_index</code> alias to point to <code class="literal">my_index_v1</code>.
</p></td></tr></table></div><p>You can check which index the alias points to:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">GET /*/_alias/my_index</pre></div><div class="sense_widget" data-snippet="snippets/070_Index_Mgmt/55_Aliases.json"></div><p>Or which aliases point to the index:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">GET /my_index_v1/_alias/*</pre></div><div class="sense_widget" data-snippet="snippets/070_Index_Mgmt/55_Aliases.json"></div><p>Both of these return the following:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">{
    "my_index_v1" : {
        "aliases" : {
            "my_index" : { }
        }
    }
}</pre></div><p>Later, we decide that we want to change the mappings for a field in our index.
Of course, we can’t change the existing mapping, so we have to reindex
our data.<a id="id-1.4.12.14.20.1" class="indexterm"></a>
<a id="id-1.4.12.14.20.2" class="indexterm"></a>  To start, we create <code class="literal">my_index_v2</code> with the new mappings:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">PUT /my_index_v2
{
    "mappings": {
        "my_type": {
            "properties": {
                "tags": {
                    "type":   "string",
                    "index":  "not_analyzed"
                }
            }
        }
    }
}</pre></div><div class="sense_widget" data-snippet="snippets/070_Index_Mgmt/55_Aliases.json"></div><p>Then we reindex our data from <code class="literal">my_index_v1</code> to <code class="literal">my_index_v2</code>, following
the process described in <a class="xref" href="index-management.html#reindex" title="Reindexing Your Data">Reindexing Your Data</a>.  Once we are satisfied that our
documents have been reindexed correctly, we switch our alias
to point to the new index.</p><p>An alias can point to multiple indices, so we need to remove the alias
from the old index at the same time as we add it to the new index.  The
change needs to be atomic, which means that we must use the <code class="literal">_aliases</code>
endpoint:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">POST /_aliases
{
    "actions": [
        { "remove": { "index": "my_index_v1", "alias": "my_index" }},
        { "add":    { "index": "my_index_v2", "alias": "my_index" }}
    ]
}</pre></div><div class="sense_widget" data-snippet="snippets/070_Index_Mgmt/55_Aliases.json"></div><p>Your application has switched from using the old index to the new
index transparently, with zero downtime.</p><div class="tip admon"><div class="icon"><img alt="Tip" src="images/icons/tip.png" /></div><div class="admon_content"><p>Even when you think that your current index design is perfect, it is likely
that you will need to make some change later, when your index
is already being used in production.</p><p>Be prepared: use aliases instead of indices in your application. Then you
will be able to reindex whenever you need to. Aliases are cheap and should
be used liberally.</p></div></div></div></div><div class="navfooter"><span class="prev"><a href="distributed-search.html">
              « 
              Distributed Search Execution</a>
           
        </span><span class="next">
           
          <a href="inside-a-shard.html">Inside a Shard
               »
            </a></span></div>
<!-- end body -->

            </section>

            <div id="rtpcontainer"
        >
	<h3>Top Videos</h3>
	<ul class="lists">
		<li><a href="https://www.elastic.co/webinars/get-started-with-elasticsearch/?baymax=default&elektra=docs&storm=top-video">Getting Started</a></li>
		<li><a href="http://www.elastic.co/webinars/elasticsearch-performance-optimization-tale-two-tickets/?elektra=docs">Scaling</a></li>
		<li><a href="http://www.elastic.co/webinars/shield-securing-your-data-in-elasticsearch/?elektra=docs">Security</a></li>
	</ul>
</div>


	  	




<script src="//app-lon02.marketo.com/js/forms2/js/forms2.min.js"></script>
	<!-- subscribe-newsletter -->
	<div id="subscribe-newsletter">
		<div class="container">
			<div class="row">
				<div class="12u">
					<div class="subscribe-wrapper" id="rtp-newsletter">
						<header>
							<h3>Subscribe to our newsletter</h3>
						</header>
						<div class="subscribe-form">
							<form id="mktoForm_1398" class="container"></form>
							<div class="form_thanks hide">
								
									<p>Thanks for subscribing! We'll keep you updated with new releases.</p>
								
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

  	<!-- Footer -->
	<div id="footer-wrapper">
		<section id="footer" class="container">
			<div class="row">
				<div class="12u">
					<!-- Copyright -->
					<div id="copyright">
	<p>
		© 2016. All Rights Reserved - Elasticsearch
	</p>
	<ul class="links">
		<li>Elasticsearch is a trademark of Elasticsearch BV, registered in the U.S. and in other countries</li>
		<li><a href="/legal/trademarks" id="footer_trademarks">Trademarks</a></li>
		<li><a href="/legal/terms-of-use" id="footer_terms">Terms</a></li>
		<li><a href="/legal/privacy-policy" id="footer_privacy">Privacy</a></li>
	</ul>
	<p>
		Apache, Apache Lucene, Apache Hadoop, Hadoop, HDFS and the yellow elephant logo are trademarks of the <a href="http://www.apache.org/" target="_blank">Apache Software Foundation</a> in the United States and/or other&nbsp;countries.
	</p>
</div><!--<div class="row">
{replace4}
</div>-->
				</div>
			</div>					
		</section>
	</div>
			
	<!-- Social Media -->
	<div id="socialmedia-wrapper">
		<section id="socialmedia" class="container">
			<!-- social icons -->
			<div id="social">
				<ul class="links">
					
						<li class="facebook grayscale"><a href="http://www.facebook.com/elastic.co" target="_blank" id="footer_facebook"></a></li>
					
						<li class="twitter grayscale"><a href="https://www.twitter.com/elastic" target="_blank" id="footer_twitter"></a></li>
					
						<li class="linkedin grayscale"><a href="https://www.linkedin.com/company/elastic-co" target="_blank" id="footer_linkedin"></a></li>
					
						<li class="xing grayscale"><a href="https://www.xing.com/companies/elastic.co" target="_blank" id="footer_xing"></a></li>
					
						<li class="youtube grayscale"><a href="https://www.youtube.com/user/elasticsearch" target="_blank" id="footer_youtube"></a></li>
					
				</ul>
			</div>
		</section>
	</div>


<style type="text/css">
	
		.facebook{background:url("https://static-www.elastic.co/assets/bltda40eebd7c7cae9a/facebook.svg?q=100") no-repeat;}		
	
		.twitter{background:url("https://static-www.elastic.co/assets/bltfd3b1511512f4632/twitter.svg?q=100") no-repeat;}		
	
		.linkedin{background:url("https://static-www.elastic.co/assets/blt6b4f6f8d6b96f814/linkedin.svg?q=100") no-repeat;}		
	
		.xing{background:url("https://static-www.elastic.co/assets/blta76b2ae2b2f10a98/xing.svg?q=100") no-repeat;}		
	
		.youtube{background:url("https://static-www.elastic.co/assets/blt5761648c9581fb53/youtube.svg?q=100") no-repeat;}		
	
</style>

<script>
MktoForms2.loadForm("//app-lon02.marketo.com", "813-MAM-392", 1398,function(form){
	form.onSuccess(function(form){
		$('#mktoForm_1398').css('display','none');
		$('#subscribe-newsletter header').hide();
		$('#mktoForm_1398').siblings('.form_thanks').removeClass('hide')
		dataLayer.push({'event': 'mktoFormSubmit'});
	    return false;
  	});
});
</script>	

  	</div>
  	<!-- <div class="preloader">
    	<div class="status"></div>
	</div> -->
  	<style></style>
   	<script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";	
</script>
<script src="https://static-www.elastic.co/static/js/jquery.autocomplete.js?q=100"></script>
<script src="https://static-www.elastic.co/static/js/script.js?q=100"></script>


   	
   	
   	
   	<script type="application/ld+json">
	
		
	
	{
	  	"@context": "http://schema.org",
	  	"@type": "Organization",
	  	"name" : "Elastic",
	  	"url": "https://www.elastic.co/",
	  	"logo": "https://www.elastic.co/static/img/elastic-logo-200.png",
		"sameAs" : [ "https://www.facebook.com/elastic.co",
			"https://twitter.com/elastic",
			"https://plus.google.com/105178019064686397293",
			"https://www.youtube.com/user/elasticsearch",
			"https://www.linkedin.com/company/elasticsearch"
		],
	  	"potentialAction": {
	    	"@type": "SearchAction",
	    	"target": "https://www.elastic.co/search?q={query_string}",
	    	"query-input": "required name=query_string"
	  	}
	}
</script>	

            <script type="text/javascript" src="docs.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script type='text/javascript' src='https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js'></script>

            </body>
        


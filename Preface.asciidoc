
[preface]
== 서문

세상은 데이터로 둘러 쌓여 있다. 수년 동안 시스템을 통해 생산되는 데이터의 양에 그야말로 엄청나다.
현존하는 기술은 어떻게 warehouse에 데이터를 채워, 저장하고 구조화할 것인가에 집중되어 있다.
실제로 그 데이터를 숙지하여, 실시간으로 의사 결정을 해야 할 때까지는 그것도 괜찮기는 했다.

Elasticsearch는 분산 확장 가능한 실시간 검색 및 분석 엔진이다.
project 초반에 예상하지 못했던 방식으로, 데이터를 검색하고, 분석하고, 탐색해야 하는 경우가 있다.
디스크에 있는 기본 데이터가 유용하지 않기 때문이다.

구조화된 데이터의 full text 검색, 실시간 분석이나 이 둘의 조합이 필요할 때,
이 책은 기초적인 수준에서 Elasticsearch를 시작하는데 요구되는 기본적인 개념을 소개할 것이다.
이러한 기초가 마련되면, 요구사항에 맞게 검색 환경을 형성할 수 있는, 더 고급스러운 검색 기술로 이동할 것이다.

Elasticsearch는 단순한 full text 검색이 아니다.
구조화된 검색, 분석, 인간의 언어를 처리하는 복잡성, 위치정보, 관계를 설명한다.
Elasticsearch의 수평확장(scale out)의 장점을 활용하기 위한, 최선의 데이터 설계 방법과 초기화 방법, 모니터링 방법에 대해 이야기 할 것이다.

=== 이 책을 누가 읽어야 하는가?

이 책은 데이터를 가지고 작업해 보려 하는 모든 이들을 위한 책이다.
새로운 project를 시작하려는 사람, 처음부터 시스템을 디자인하려는 유연성을 가진 사람,
기존의 시스템에 새로운 기능을 만들려고 하는 사람 등, 모든 이가 가능하다.
Elasticsearch는 기존의 문제점을 해결하고, 아직 고려하지 못했던 새로운 기능에 대한 길을 열어 줄 것이다.

이 책은 초보자에서 고급 사용자까지 모두 적합하다. 약간의 프로그래밍 배경 지식을 가지고 있기를 바란다.
그리고 필수적이지는 않지만, SQL과 RDB(Relational Database)에 대한 경험이 있다면 도움이 될 것이다.
“검색이라는 복잡한 세계에서, 확실한 기반을 얻기 위해 초보자를 돕는다”는 것이 첫 번째 원칙이다.

검색에 대한 경험을 가진 독자도 이 책이 도움이 될 것이다.
Elasticsearch는 약간의 유사한 개념을 가진 새로운 기술이다.
조금 경험 있는 독자는 이런 개념들이 구현된 방법과, 그것들이 Elasticsearch의 문맥과 맞아 들어가는 방법을 이해하게 될 것이다.
초반부에도 고급 사용자에게 유용한 정보가 있다.

마지막으로, 아마도 여러분은 개발자이거나 운영자일 것이다.
다른 부서가 가능한 한 빨리 Elasticsearch에 데이터를 채우고 있는 동안, 당신은 서버에 문제가 발생하는 것을 방지하는 업무를 가지고 있을 것이다.
Elasticsearch는 사용자가 규칙을 준수한다면 쉽게 확장할 수 있다.
제품에 적용하기 전에, 안정적인 cluster를 구성하는 방법을 알아야 하고, 그 다음에 사고를 방지하기 위해, 경고 메시지를 이해할 수 있어야 한다.
초반 장들은 흥미가 좀 적을 것이지만, 책의 마지막 부분은 필수적(심각한 사고를 피하기 위한 알아야 할 모든 것)으로 읽어야 한다


=== 왜 이 책이 씌여졌는가?

이 책은 Elasticsearch에 대한 이야기가 필요하기 때문에 씌여졌다.
무엇을 찾아야 하는지 알고 있다면, 현재 Elasticsearch의 Reference Document는 뛰어나니 잘 활용하기 바란다.
Reference Document 문서는 여러분이 정보 검색의 개념, 분산 시스템, query DSL 등을 속속들이 알고 있는 것으로 가정한다.

이 책은 그런 가정이 전혀 없다. 검색과 분산 시스템에 대해, 진짜 초보인 사람이 이 책을 집어 들고, 몇 개의 장만으로 prototype 구축을 시작할 수 있도록 쓰여졌다..

문제 기반의 접근 방식: 여기 문제가 있다. 어떻게 해결할 것인가? 다른 솔루션의 장단점은 무엇인가? 를 사용했다.
우리는 기본적인 것으로 시작해서, 각 장은 앞 장을 기반으로 만들었고, 실질적인 예를 제공하고, 필요한 이론을 설명하였다.

기존의 Reference Document는 기능을 어떻게 사용하는가를 설명하였다. 이 책은 다양한 기능을 왜, 언제 사용하는가를 설명하려 했다.

=== Elasticsearch 버전

이 책의 설명과 코드 예제는, 출판되는 시점에 이용 가능한, Elasticsearch의 1.4.0 버전을 대상으로 하고 있다.
하지만, Elasticsearch는 빠른 속도로 발전하는 프로젝트이다. 이 책의 온라인 버전은 Elasticsearch의 변화에 맞추어 업데이트될 것이다.

이 책의 온라인 버전의 최신 버전은 다음 URL에서 참고할 수 있다.
https://www.elastic.co/guide/en/elasticsearch/guide/current/[book online].

또한, GitHub 저장소에서, 변경 사항을 확인할 수 있다.
https://github.com/elastic/elasticsearch-definitive-guide/[GitHub repository].


=== 이 책을 읽는 방법

Elasticsearch는 복잡한 것을 간단하게 하기 위해, 매우 열심히 노력했고, 많은 부분에서 성공했다.
지금은 검색과 분산 시스템은 복잡하다고 말하겠지만, 조만간 Elasticsearch를 최대한 활용하기 위해,
어느 정도의 복잡함을 이해하기 시작할 것이다.

그러나 복잡함은 마법이 아니다.
우리는 복잡한 시스템을, 주문에 응답하는 마법의 블랙박스로 보는 경향이 있다.
그러나 내부 동작은 일반적으로 간단한 프로세스다. 이러한 프로세스를 이해하는 것은 마법을 해지하는 것이다.
블랙박스가 여러분이 바라는 대로 할 것이라는 희망 대신, 이해를 한다는 것은 확실함과 명확함을 당신에게 제공할 것이다.

이 책은 최고의 안내서(definitive guide)이다.
Elasticsearch를 시작하도록 도와줄 뿐 아니라, 더 깊고 좀 더 흥미로운 주제 또한 다룰 것이다.
cluster 내부 <<distributed-cluster>> , 분산 document 저장소 <<distributed-docs>> ,
분산 검색 실행 <<distributed-search>> , and 그리고 shard 내부 <<inside-a-shard>>  같은 장들은 필수적으로 읽어야 하는 것은 아니지만,
Elasticsearch 내부에 대한, 확실한 이해를 제공할 것이다.

이 책의 초반 부분은 각 장을 이전 장에 기반하여 차례대로 읽어야 한다. 위에서 언급한 장은 생략해도 좋다.
근접 일치 <<proximity-matching>> , 부분 일치 <<partial-matching>>  같은 후반 장들은 독립적이고, 필요할 때 참고할 수 있다.

=== Navigating This Book

이 책은 7개의 파트로 구성되어 있다:

ifndef::es_build[]

*  Chapters pass:[<a href="#intro">1</a>] 에서 pass:[<a href="#inside-a-shard">11</a>]
   까지는 Elasticsearch에 대한 소개이다.
   데이터를 Elasticsearch에 넣고 가져오는 방법, Elasticsearch가 document내의 데이터를 해석하는 방법,
   기본적인 검색이 동작하는 방법, indices를 관리하는 방법을 설명한다.
   마지막 부분에 이르면, 이미 Elasticsearch를 응용프로그램에 통합할 수 있을 것이다.
   Chapters pass:[<a href="#distributed-cluster">2</a>], pass:[<a href="#distributed-docs">4</a>], pass:[<a href="#distributed-search">9</a>], 그리고 pass:[<a href="#inside-a-shard">11</a>]
   은 분산 프로세스에 대한 자세한 통찰력을 제공하는 추가적인 장들이다.
   하지만, 필수로 읽어야 하는 장은 아니다.

*  Chapters pass:[<a href="#structured-search">12</a>] 에서 pass:[<a href="#controlling-relevance">17</a>]
   까지는 검색으로 좀 더 깊숙이 들어간다. 데이터를 색인하고 검색하는 방법을 이해하게 될 것이다.
   단어의 근접성(proximity), 부분 일치, 퍼지 일치 그리고 언어 인식 같은 고급 검색 개념을 활용할 수 있게 된다.
   relevance(관련성, 적합도)가 어떻게 동작하는지, 첫 번째 page에 최선의 결과를 나오게 하기 위한, 그것의 조정 방법을 이해할 수 있을 것이다.

*  Chapters pass:[<a href="#language-intro">18</a>] 에서 pass:[<a href="#fuzzy-matching">24</a>]
   까지는 analyzer와 query의 효과적인 사용을 통해, 인간의 언어를 다루는 어려운 주제와 씨름하게 된다.
   언어와 알파벳, 정렬의 복잡함으로 들어가기 전에, 언어 분석에 대한 용이한 접근으로 쉽게 시작한다.
   형태소 분석, 불용어, 동의어, fuzzy 일치 등을 다룰 것이다.

*  Chapters pass:[<a href="#aggs-high-level">25</a>] 에서 pass:[<a href="#controlling-memory">35</a>]
   까지는 집계(aggregations), 분석(analytics)에 대해 이야기한다. - 전반적인 추세를 보여주기 위해, 데이터를 요약하고 그룹을 형성하는 방법

*  Chapters pass:[<a href="#geopoints">36</a>] 에서 pass:[<a href="#geo-shapes">39</a>]
   까지는 Elasticsearch가 지원하는 두 가지 방법의 위치정보(geolocation)에 대해 이야기한다. – 위도/경도 geo-point, 복잡한 geo-shape

*  Chapters pass:[<a href="#relations">40</a>] 에서 pass:[<a href="#scale">43</a>]
   까지는 Elasticsearch가 가장 효과적으로 동작하기 위해, 데이터를 설계하는 방법에 대해 이야기한다.
   entity사이의 관계를 나타내는 것은, 이 목적을 위해 설계된 Relational Database 같이, 검색 엔진에서는 쉽지 않다.
   이들 장에서는, 시스템의 데이터 흐름에 일치하도록 index 설계를 맞추는 방법을 설명한다.

*  마지막으로, Chapters pass:[<a href="#cluster-admin">44</a>] 에서 pass:[<a href="#post_deploy">46</a>]
   까지는 제품 배포에 대해 이야기한다. 중요한 설정, 모니터링, 문제점을 진단하고 방지하는 방법.

endif::es_build[]

ifdef::es_build[]

*  Chapters <<intro>> 에서 <<inside-a-shard>> 까지는 Elasticsearch에 대한 소개이다.
   데이터를 Elasticsearch에 넣고 가져오는 방법, Elasticsearch가 document내의 데이터를 해석하는 방법,
   기본적인 검색이 동작하는 방법, indices를 관리하는 방법을 설명한다.
   마지막 부분에 이르면, 이미 Elasticsearch를 응용프로그램에 통합할 수 있을 것이다.
   <<distributed-cluster>>, <<distributed-docs>>, <<distributed-search>>, 그리고 <<inside-a-shard>>
   은 분산 프로세스에 대한 자세한 통찰력을 제공하는 추가적인 장들이다.
   하지만, 필수로 읽어야 하는 장은 아니다.

*  Chapters <<structured-search>> 에서 <<controlling-relevance>>
   까지는 검색으로 좀 더 깊숙이 들어간다. 데이터를 색인하고 검색하는 방법을 이해하게 될 것이다.
   단어의 근접성(proximity), 부분 일치, 퍼지 일치 그리고 언어 인식 같은 고급 검색 개념을 활용할 수 있게 된다.
   relevance(관련성, 적합도)가 어떻게 동작하는지, 첫 번째 page에 최선의 결과를 나오게 하기 위한, 그것의 조정 방법을 이해할 수 있을 것이다.

*  Chapters <<language-intro>> 에서 <<fuzzy-matching>>
   까지는 analyzer와 query의 효과적인 사용을 통해, 인간의 언어를 다루는 어려운 주제와 씨름하게 된다.
   언어와 알파벳, 정렬의 복잡함으로 들어가기 전에, 언어 분석에 대한 용이한 접근으로 쉽게 시작한다.
   형태소 분석, 불용어, 동의어, fuzzy 일치 등을 다룰 것이다.

*  Chapters <<aggs-high-level>> 에서 <<controlling-memory>>
   까지는 집계(aggregations), 분석(analytics)에 대해 이야기한다. - 전반적인 추세를 보여주기 위해, 데이터를 요약하고 그룹을 형성하는 방법

*  Chapters <<geopoints>> 에서 <<geo-shapes>>
   까지는 Elasticsearch가 지원하는 두 가지 방법의 위치정보(geolocation)에 대해 이야기한다. – 위도/경도 geo-point, 복잡한 geo-shape

*  Chapters <<relations>> 에서 <<scale>>
   까지는 Elasticsearch가 가장 효과적으로 동작하기 위해, 데이터를 설계하는 방법에 대해 이야기한다.
   entity사이의 관계를 나타내는 것은, 이 목적을 위해 설계된 Relational Database 같이, 검색 엔진에서는 쉽지 않다.
   이들 장에서는, 시스템의 데이터 흐름에 일치하도록 index 설계를 맞추는 방법을 설명한다.

*  마지막으로, Chapters <<cluster-admin>> 에서 <<post_deploy>>
   까지는 제품 배포에 대해 이야기한다. 중요한 설정, 모니터링, 문제점을 진단하고 방지하는 방법.

endif::es_build[]

=== 온라인 정보

이 책은 Elasticsearch에 대한 문법보다는 문제의 해결에 초점이 맞춰져 있기 때문에, 완전한 매개변수 목록을 위해, 가끔씩 기존의 매뉴얼을 참조한다.
그 매뉴얼은 아래 URL에서 볼 수 있다:

https://www.elastic.co/guide/

=== 이 책의 관례

이 책에서는 아래와 같은 인쇄상의 관례를 사용한다:

_이탤릭_:: 새로운 용어나 개념.

+코드블럭+:: 프로그램 요소를 참조하는 단락뿐만 아니라, 프로그램 목록에 사용된다.
예: 변수, 함수명, 데이터베이스, 데이터 type, 환경변수, 명령문, 예약어


[TIP]
====
팁이나 제안.
====

[NOTE]
====
일반적인 메모.
====

[WARNING]
====
경고 및 주의.
====

=== 예제 코드
////
Do not edit this section.
////

This book is here to help you get your job done. In general, if example code is offered with this book, you may use it in your programs and documentation. You do not need to contact us for permission unless you’re reproducing a significant portion of the code. For example, writing a program that uses several chunks of code from this book does not require permission. Selling or distributing a CD-ROM of examples from O’Reilly books does require permission. Answering a question by citing this book and quoting example code does not require permission. Incorporating a significant amount of example code from this book into your product’s documentation does require permission.

We appreciate, but do not require, attribution. An attribution usually includes the title, author, publisher, and ISBN. For example: _Elasticsearch: The Definitive Guide_ by Clinton Gormley and Zachary Tong (O’Reilly). Copyright 2015 Elasticsearch BV, 978-1-449-35854-9.

ifndef::es_build[]
If you feel your use of code examples falls outside fair use or the permission given above, feel free to contact us at
pass:[<a class="email" href="mailto:permissions@oreilly.com"><em>permissions@oreilly.com</em></a>].
endif::es_build[]

ifdef::es_build[]
If you feel your use of code examples falls outside fair use or the permission given above, feel free to contact us at
mailto:permissions@oreilly.com[].
endif::es_build[]

ifndef::es_build[]
=== Safari® Books Online
////
Do not edit this section.
////
[role = "safarienabled"]
[NOTE]
====
pass:[<a href="http://safaribooksonline.com" class="orm:hideurl:ital"><em class="hyperlink">Safari Books Online</em></a>] is an on-demand digital library that delivers expert pass:[<a href="https://www.safaribooksonline.com/explore/" class="orm:hideurl">content</a>] in both book and video form from the world&#8217;s leading authors in technology and business.
====

Technology professionals, software developers, web designers, and business and creative professionals use Safari Books Online as their primary resource for research, problem solving, learning, and certification training.

++++
<p>Safari Books Online offers a range of <a href="https://www.safaribooksonline.com/pricing/" class="orm:hideurl">plans and pricing</a> for <a href="https://www.safaribooksonline.com/enterprise/" class="orm:hideurl">enterprise</a>, <a href="https://www.safaribooksonline.com/government/" class="orm:hideurl">government</a>, <a href="https://www.safaribooksonline.com/academic-public-library/" class="orm:hideurl">education</a>, and individuals.</p>

<p>Members have access to thousands of books, training videos, and prepublication manuscripts in one fully searchable database from publishers like O&#8217;Reilly Media, Prentice Hall Professional, Addison-Wesley Professional, Microsoft Press, Sams, Que, Peachpit Press, Focal Press, Cisco Press, John Wiley &amp; Sons, Syngress, Morgan Kaufmann, IBM Redbooks, Packt, Adobe Press, FT Press, Apress, Manning, New Riders, McGraw-Hill, Jones &amp; Bartlett, Course Technology, and hundreds <a href="https://www.safaribooksonline.com/our-library/" class="orm:hideurl">more</a>. For more information about Safari Books Online, please visit us <a class="orm:hideurl">online</a>.</p>
++++

=== How to Contact Us
////
Do not edit this section.
////
Please address comments and questions concerning this book to the publisher:

++++
<ul class="simplelist">
  <li>O’Reilly Media, Inc.</li>
  <li>1005 Gravenstein Highway North</li>
  <li>Sebastopol, CA 95472</li>
  <li>800-998-9938 (in the United States or Canada)</li>
  <li>707-829-0515 (international or local)</li>
  <li>707-829-0104 (fax)</li>
</ul>
++++

We have a web page for this book, where we list errata, examples, and any additional information. You can access this page at link:$$http://oreil.ly/1ylQuK6$$[].

////
Don't forget to update the link above.
////

To comment or ask technical questions about this book, send email to pass:[<a class="email" href="mailto:bookquestions@oreilly.com"><em>bookquestions@oreilly.com</em></a>].

For more information about our books, courses, conferences, and news, see our website at link:$$http://www.oreilly.com$$[].

Find us on Facebook: link:$$http://facebook.com/oreilly$$[]

Follow us on Twitter: link:$$http://twitter.com/oreillymedia$$[]

Watch us on YouTube: link:$$http://www.youtube.com/oreillymedia$$[]

endif::es_build[]

=== Acknowledgments

Why are spouses always relegated to a _last but not least_ disclaimer?
There is no doubt in our minds that the two people most deserving of our
gratitude are Xavi Sánchez Catalán, Clinton's long-suffering husband, and
Genevieve Flanders, Zach's fiancée. They have looked after us and loved us,
picked up the slack, put up with our absence and our endless moaning about how
long the book was taking, and, most importantly, they are still here.

Thank you to Shay Banon for creating Elasticsearch in the first place, and to
Elastic the company for supporting our work on the book.  Our colleagues
at Elastic deserve a big thank you as well. They have helped us pick
through the innards of Elasticsearch to really understand how it works, and
they have been responsible for adding improvements and fixing inconsistencies
that were brought to light by writing about them.

Two colleagues in particular deserve special mention:

*   Robert Muir patiently shared his deep knowledge of search in general and
    Lucene in particular. Several chapters are the direct result of joining
    his pearls of wisdom into paragraphs.

*   Adrien Grand dived deep into the code to answer question after question,
    and checked our explanations to ensure they make sense.

Thank you to O'Reilly for undertaking this project and working with us to make
this book available online for free, to our editor Brian Anderson for cajoling
us along gently, and to our kind and gentle reviewers Benjamin Devèze, Ivan
Brusic, and Leo Lapworth.  Your reassurances kept us hopeful.

Finally, we would like to thank our readers, some of whom we know only by
their GitHub identities, who have taken the time to report problems, provide
corrections, or suggest improvements:

Adam Canady, Adam Gray, Alexander Kahn, Alexander Reelsen, Alaattin
Kahramanlar, Ambrose Ludd, Anna Beyer, Andrew Bramble,  Baptiste Cabarrou,
Bart Vandewoestyne, Bertrand Dechoux, Brian Wong, Brooke Babcock, Charles
Mims, Chris Earle, Chris Gilmore, Christian Burgas, Colin Goodheart-Smithe,
Corey Wright,  Daniel Wiesmann, David Pilato, Duncan Angus Wilkie, Florian
Hopf, Gavin Foo, Gilbert Chang, Grégoire Seux, Gustavo Alberola, Igal Sapir,
Iskren Ivov Chernev, Itamar Syn-Hershko, Jan Forrest, Jānis Peisenieks,
Japheth Thomson, Jeff Myers, Jeff Patti, Jeremy Falling, Jeremy Nguyen, J.R.
Heard, Joe Fleming, Jonathan Page, Joshua Gourneau, Josh Schneier, Jun Ohtani,
Keiji Yoshida, Kieren Johnstone, Kim Laplume, Kurt Hurtado, Laszlo Balogh,
londocr, losar, Lucian Precup, Lukáš Vlček, Malibu Carl, Margirier Laurent,
Martijn Dwars, Matt Ruzicka, Mattias Pfeiffer, Mehdy Amazigh, mhemani, Michael
Bonfils, Michael Bruns, Michael Salmon, Michael Scharf , Mitar Milutinović,
Mustafa K. Isik, Nathan Peck, Patrick Peschlow, Paul Schwarz, Pieter Coucke,
Raphaël Flores, Robert Muir, Ruslan Zavacky, Sanglarsh Boudhh, Santiago
Gaviria, Scott Wilkerson, Sebastian Kurfürst, Sergii Golubev, Serkan Kucukbay,
Thierry Jossermoz, Thomas Cucchietti, Tom Christie, Ulf Reimers, Venkat
Somula, Wei Zhu, Will Kahn-Greene, and Yuri Bakumenko.

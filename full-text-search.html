
<!DOCTYPE HTML>
<html lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Full-Text Search</title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearch: The Definitive Guide" /><link rel="up" href="search-in-depth.html" title="Search in Depth" /><link rel="prev" href="structured-search.html" title="Structured Search" /><link rel="next" href="multi-field-search.html" title="Multifield Search" />
  
 	<meta http-equiv="content-type" content="text/html; charset=utf-8" />

 	<!-- RTP tag --> 
	<script type='text/javascript' async>
	(function(c,h,a,f,i,e){c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
	 c[a].a=i;c[a].e=e;var g=h.createElement("script");g.async=true;g.type="text/javascript";
	 g.src=f+'?aid='+i;var b=h.getElementsByTagName("script")[0];b.parentNode.insertBefore(g,b);
	 })(window,document,"rtp","//sjrtp2-cdn.marketo.com/rtp-api/v1/rtp.js","elasticco");
	 
	rtp('send','view');
	rtp('get', 'campaign',true);
	</script>
	<!-- End of RTP tag -->
	
	
 	<link rel="apple-touch-icon" sizes="57x57"  href="https://www.elastic.co/apple-icon-57x57.png?change=123">
<link rel="apple-touch-icon" sizes="60x60"  href="https://www.elastic.co/apple-icon-60x60.png?change=123">
<link rel="apple-touch-icon" sizes="72x72"  href="https://www.elastic.co/apple-icon-72x72.png?change=123">
<link rel="apple-touch-icon" sizes="76x76"  href="https://www.elastic.co/apple-icon-76x76.png?change=123">
<link rel="apple-touch-icon" sizes="114x114"  href="https://www.elastic.co/apple-icon-114x114.png?change=123">
<link rel="apple-touch-icon" sizes="120x120"  href="https://www.elastic.co/apple-icon-120x120.png?change=123">
<link rel="apple-touch-icon" sizes="144x144"  href="https://www.elastic.co/apple-icon-144x144.png?change=123">
<link rel="apple-touch-icon" sizes="152x152"  href="https://www.elastic.co/apple-icon-152x152.png?change=123">
<link rel="apple-touch-icon" sizes="180x180"  href="https://www.elastic.co/apple-icon-180x180.png?change=123">
<link rel="icon" type="image/png" sizes="192x192"   href="https://www.elastic.co/android-icon-192x192.png?change=123">
<link rel="icon" type="image/png" sizes="32x32"  href="https://www.elastic.co/favicon-32x32.png?change=123">
<link rel="icon" type="image/png" sizes="96x96"  href="https://www.elastic.co/favicon-96x96.png?change=123">
<link rel="icon" type="image/png" sizes="16x16"  href="https://www.elastic.co/favicon-16x16.png?change=123">
<link rel="manifest"  href="https://www.elastic.co/manifest.json">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">

<!-- DC tags section -->
<link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" >
<link rel="schema.DCTERMS" href="http://purl.org/dc/terms/" >
<meta name="DC.title" content="Guide template" >

<!-- end DC tags -->

	<meta name="description" content="" />

	<link rel="canonical" href="" />

	<meta property="og:image" content="https://www.elastic.co/static/img/elastic-logo-200.png" />
	


	
	<link type="text/css" rel="stylesheet" href="https://static-www.elastic.co/static/css/skel.css?q=100" />
	<link type="text/css" rel="stylesheet" href="https://static-www.elastic.co/static/css/style.css?q=100" />	
	<script src="https://static-www.elastic.co/static/js/skel.min.js?q=100"></script>
	
		<script type="text/javascript">form_name = "" ; cdn_url="https://static-www.elastic.co";cdn_slug = "100"</script>
	
	<script src="https://static-www.elastic.co/static/js/init.js?q=100"></script>
	<script src="https://static-www.elastic.co/static/js/jquery.min.js?q=100"></script>
	<script src="https://static-www.elastic.co/static/js/jquery.cookie.js?q=100"></script>
	<!--<script type="text/javascript">
	    (function() {
	        var path = '//easy.myfonts.net/v2/js?sid=10336(font-family=Avenir+35+Light)&sid=10338(font-family=Avenir+55+Roman)&sid=10340(font-family=Avenir+85+Heavy)&sid=10344(font-family=Avenir+65+Medium)&key=nAD6PCOPrX',
	            protocol = ('https:' == document.location.protocol ? 'https:' : 'http:'),
	            trial = document.createElement('script');
	        trial.type = 'text/javascript';
	        trial.async = true;
	        trial.src = protocol + path;
	        var head = document.getElementsByTagName("head")[0];
	        head.appendChild(trial);
	    })();
	</script>-->

	
	<link type="text/css" rel="stylesheet"  href="https://www.elastic.co/static/css/prettify.css" />
	<script type="text/javascript"  src="https://www.elastic.co/static/js/prettify.js"></script>



<link rel="stylesheet" type="text/css" href="styles.css" />

</head>
<body >
	<!-- Google Tag Manager -->
	<script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5"
													  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
	<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
			new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
			j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
			'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-58RLH5');</script>
	<!-- End Google Tag Manager -->
	
	<div class="header-cont">
		<div id="header-wrapper">
			


	<script  src="https://www.elastic.co/static/js/jquery.tokeninput.js?change=123"></script>
	<link rel="stylesheet" type="text/css"  href="https://www.elastic.co/static/css/token-input.css">

<div class="shortcuts-wrapper">
	<div class="container">
		<!-- Shortcuts -->
		<nav id="shortcuts">
			<ul class="links">
				
					<li class="shortcut-1">
						<a href="/downloads" id="header_downloads" >
							<span class="txt">downloads</span>	
						</a>
					</li>
				
					<li class="shortcut-2">
						<a href="/guide" id="header_guide" >
							<span class="txt">docs</span>	
						</a>
					</li>
				
					<li class="shortcut-3">
						<a href="/subscriptions" id="header_subscriptions" >
							<span class="txt">support</span>	
						</a>
					</li>
				
					<li class="shortcut-4">
						<a href="https://discuss.elastic.co" id="header_discuss" target="_blank">
							<span class="txt">discuss</span>	
						</a>
					</li>
				
					<li class="shortcut-5">
						<a href="/contact" id="header_contact" >
							<span class="txt">contact</span>	
						</a>
					</li>
				
			</ul>
		</nav>
		<div class="languages-wrapper">
			<div class="global-language">
				<ul class="language">
					<!-- <li class="active-language"><a class="active" href="#">EN</a></li> -->
					
						<li><a href="#">EN</a></li>
					
				</ul>
				<ul class="all-languages">
					
						
						<li><a href="/guide_template">English</a></li>
					
						
						<li><a href="/fr/guide_template">French</a></li>
					
						
						<li><a href="/de/guide_template">German</a></li>
					
						
						<li><a href="/jp/guide_template">Japanese</a></li>
					
						
						<li><a href="/kr/guide_template">Korean</a></li>
					
				</ul>
			</div>
		</div>
	</div>
</div>
<div class="container w100">
	<div class="row 0%">
		<div class="12u">
			

<section class="first-container desktop-main-nav">
	<div class="row 0%">
		<div class="11u 6u(small) 6u(xsmall)">
			<div id="elastic">
				<h1>
					<a href="/">
						<div id="elastic-logo">
						<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 400 130" preserveAspectRatio="xMinYMin meet" enable-background="new 0 0 400 130" xml:space="preserve">
    <g>
    	<g>
    		<path fill="#FFFFFF" d="M122.5,67.8c0-10.3-6.4-19.2-15.9-22.7c0.4-2.2,0.6-4.3,0.6-6.6c0-19.1-15.5-34.6-34.6-34.6
    			c-11.1,0-21.5,5.3-28,14.4c-3.2-2.5-7.1-3.8-11.2-3.8c-10.1,0-18.4,8.2-18.4,18.4c0,2.2,0.4,4.4,1.1,6.4C6.5,42.6,0,51.8,0,62
    			c0,10.3,6.4,19.3,16,22.8c-0.4,2.1-0.6,4.3-0.6,6.6c0,19,15.5,34.5,34.5,34.5c11.2,0,21.5-5.4,28-14.4c3.2,2.5,7.2,3.9,11.3,3.9
    			c10.1,0,18.4-8.2,18.4-18.4c0-2.2-0.4-4.4-1.1-6.4C115.9,87.2,122.5,78,122.5,67.8z"/>
    		<g>
    			<path fill="#F4BD19" d="M47.9,56.3l27.3,12.5l27.6-24.2c0.4-2,0.6-4,0.6-6.1c0-17-13.8-30.8-30.8-30.8c-10.2,0-19.7,5-25.4,13.4
    				l-4.6,23.8L47.9,56.3z"/>
    		</g>
    		<g>
    			<path fill="#3CBEB1" d="M19.6,85.2c-0.4,2-0.6,4.1-0.6,6.2c0,17,13.9,30.9,30.9,30.9c10.3,0,19.8-5.1,25.6-13.5L80,85l-6.1-11.6
    				L46.5,60.9L19.6,85.2z"/>
    		</g>
    		<g>
    			<path fill="#E9478C" d="M19.4,37.9l18.7,4.4L42.3,21c-2.6-2-5.7-3-9-3c-8.1,0-14.8,6.6-14.8,14.8C18.5,34.5,18.8,36.3,19.4,37.9z
    				"/>
    		</g>
    		<g>
    			<path fill="#2C458F" d="M17.8,42.4C9.4,45.1,3.6,53.2,3.6,62c0,8.6,5.3,16.3,13.3,19.3l26.3-23.8l-4.8-10.3L17.8,42.4z"/>
    		</g>
    		<g>
    			<path fill="#95C63D" d="M80.3,108.7c2.6,2,5.7,3.1,8.9,3.1c8.1,0,14.8-6.6,14.8-14.8c0-1.8-0.3-3.5-0.9-5.1l-18.7-4.4L80.3,108.7
    				z"/>
    		</g>
    		<g>
    			<path fill="#176655" d="M84.1,82.6l20.6,4.8c8.4-2.8,14.2-10.8,14.2-19.6c0-8.6-5.3-16.2-13.3-19.3l-27,23.6L84.1,82.6z"/>
    		</g>
    	</g>
    	<path d="M162.8,76.3c0,0.1,0,0.6,0.1,1.4c0.1,0.8,0.3,1.8,0.6,3c0.3,1.1,0.8,2.4,1.4,3.7c0.6,1.3,1.4,2.5,2.5,3.6
    		c1,1.1,2.3,2,3.8,2.7c1.5,0.7,3.4,1.1,5.6,1.1c1.8,0,3.3-0.1,4.6-0.4c1.3-0.3,2.4-0.7,3.4-1.3c1-0.6,1.9-1.3,2.7-2.2
    		c0.8-0.9,1.6-1.9,2.4-3.1c0.5-0.7,1-1.2,1.6-1.5c0.6-0.3,1.2-0.4,1.8-0.4c1,0,2,0.4,2.8,1.1c0.9,0.7,1.3,1.7,1.3,2.8
    		c0,0.7-0.4,1.7-1.1,3.1c-0.7,1.4-1.9,2.8-3.6,4.1c-1.6,1.4-3.7,2.6-6.3,3.6c-2.6,1-5.7,1.5-9.5,1.5c-3.8,0-7.2-0.7-10.2-2.1
    		c-3-1.4-5.5-3.2-7.5-5.6c-2-2.3-3.6-5-4.7-8.1c-1.1-3.1-1.6-6.3-1.6-9.7c0-3.5,0.5-6.8,1.6-9.9c1.1-3.1,2.7-5.8,4.7-8.1
    		c2-2.3,4.5-4.1,7.4-5.5c2.9-1.3,6.1-2,9.6-2c3.3,0,6.3,0.5,9.2,1.5c2.8,1,5.3,2.4,7.4,4.3c2.1,1.9,3.7,4.1,5,6.8
    		c1.2,2.7,1.8,5.8,1.8,9.2c0,2.1-0.5,3.7-1.6,4.8c-1,1.1-2.2,1.6-3.6,1.6H162.8z M170.9,56.4c-1.5,0.6-2.7,1.4-3.7,2.4
    		c-1,0.9-1.8,2-2.4,3.1c-0.6,1.1-1,2.2-1.3,3.2c-0.3,1-0.5,1.8-0.5,2.5c-0.1,0.7-0.1,1.1-0.1,1.2h27.9c0-1.8-0.3-3.5-0.9-5.1
    		c-0.6-1.6-1.5-3-2.6-4.3c-1.2-1.2-2.7-2.2-4.5-3c-1.8-0.7-4-1.1-6.5-1.1C174.2,55.5,172.4,55.8,170.9,56.4z"/>
    	<path d="M214.3,94.6c0,1.3-0.4,2.3-1.3,3.2c-0.9,0.9-1.9,1.3-3.2,1.3c-1.3,0-2.3-0.4-3.2-1.3c-0.9-0.9-1.3-2-1.3-3.2V35.1
    		c0-1.3,0.4-2.3,1.3-3.2c0.9-0.9,2-1.3,3.2-1.3c1.3,0,2.3,0.4,3.2,1.3c0.9,0.9,1.3,1.9,1.3,3.2V94.6z"/>
    	<path d="M229.8,63.5c-0.6,0.3-1.2,0.5-1.9,0.5c-1.2,0-2.2-0.4-3.2-1.1c-1-0.7-1.5-1.8-1.5-3.1c0-0.5,0.1-1.1,0.4-1.9
    		c0.5-1.2,1.2-2.4,2.1-3.6c0.9-1.2,2-2.2,3.5-3.1s3.3-1.7,5.4-2.2c2.2-0.5,4.8-0.8,7.9-0.8c5.9,0,10.5,1.2,14,3.5
    		c3.5,2.3,5.2,5.8,5.2,10.3v32.8c0,1.3-0.4,2.3-1.3,3.2c-0.9,0.9-1.9,1.3-3.2,1.3c-1.3,0-2.3-0.4-3.2-1.3c-0.9-0.9-1.3-2-1.3-3.2v-2
    		c-1.2,2-4.7,4.5-7.5,5.3c-2.8,0.8-5.7,1.2-8.8,1.2c-2,0-3.9-0.3-5.9-0.8c-2-0.5-3.8-1.4-5.3-2.5c-1.6-1.1-2.9-2.6-3.8-4.3
    		c-1-1.7-1.5-3.8-1.5-6.2c0-2.8,0.5-5.7,1.6-7.5c1.1-1.9,2.6-3.4,4.4-4.6c1.8-1.2,3.9-2.1,6.3-2.8c2.4-0.6,4.9-1.1,7.5-1.4
    		c3-0.3,5.4-0.7,7.2-1.2c1.7-0.4,3-0.9,3.9-1.5c0.9-0.6,1.4-1.2,1.6-2c0.2-0.7,0.3-1.6,0.3-2.5c0-1.1-0.3-2-0.9-2.8
    		c-0.6-0.8-1.4-1.5-2.4-2c-1-0.5-2.1-0.9-3.3-1.2s-2.4-0.4-3.5-0.4c-2.1,0-3.7,0.2-5,0.5c-1.3,0.3-2.3,0.8-3.1,1.4
    		c-0.8,0.6-1.5,1.3-1.9,2.1c-0.5,0.8-0.9,1.6-1.3,2.5C230.9,62.6,230.4,63.1,229.8,63.5z M250.6,74.4c-1.1,0.3-2.4,0.6-3.8,0.8
    		c-1.5,0.2-3,0.4-4.6,0.6c-1.6,0.2-3.1,0.5-4.6,0.9c-1.5,0.3-2.8,0.8-4,1.5c-1.2,0.7-2.2,1.5-2.9,2.5c-0.7,1-1.1,3-1.1,4.6
    		c0,1.3,0.3,2.3,0.8,3.1c0.5,0.8,1.2,1.5,2.1,2c0.9,0.5,1.8,0.8,2.9,1c1.1,0.2,2.2,0.3,3.3,0.3c1.7,0,3.3-0.2,5-0.6
    		c1.7-0.4,3.2-1,4.5-1.9s2.4-2,3.3-3.5c0.8-1.4,1.2-3.8,1.2-5.9v-6.1L250.6,74.4z"/>
    	<path d="M307.6,90.9c-1.1,2-2.7,3.6-4.6,4.8s-4.1,2.1-6.6,2.7c-2.5,0.5-5.2,0.8-7.9,0.8c-3.9,0-7.2-0.6-9.9-1.8
    		c-2.7-1.2-4.9-2.6-6.5-4.1c-1.7-1.6-2.9-3.1-3.7-4.7c-0.7-1.6-1.1-2.7-1.1-3.5c0-1.3,0.5-2.4,1.4-3.2c0.9-0.8,2-1.2,3.1-1.2
    		c0.7,0,1.3,0.2,2,0.6c0.6,0.4,1.1,1,1.5,1.9c1,2.5,2.5,4.5,4.7,6.2c2.2,1.7,5.2,2.5,9.3,2.5c1.8,0,3.4-0.2,4.7-0.6
    		c1.3-0.4,2.4-1,3.2-1.7c0.8-0.7,1.4-1.5,1.9-2.4c0.4-0.9,0.6-1.8,0.6-2.8c0-2-0.8-3.4-2.3-4.4c-1.5-1-3.5-1.7-5.8-2.3
    		c-2.3-0.6-4.8-1.1-7.5-1.6c-2.7-0.5-5.2-1.2-7.5-2.2c-2.3-0.9-4.2-2.3-5.8-4c-1.6-1.8-2.3-4.2-2.3-7.3c0-4.5,1.6-8,4.9-10.5
    		c3.3-2.5,7.8-3.8,13.7-3.8c3.3,0,6,0.3,8.3,1c2.2,0.7,4.1,1.6,5.5,2.7c0.6,0.5,1.2,1,1.8,1.7c0.6,0.7,1.2,1.4,1.8,2.2
    		c0.6,0.8,1,1.5,1.4,2.3c0.4,0.7,0.6,1.4,0.6,2c0,1.3-0.5,2.4-1.6,3.1c-1,0.8-2.2,1.2-3.4,1.2c-0.7,0-1.5-0.1-2.1-0.6
    		c-0.6-0.6-1-1.3-1.3-1.8c-0.5-1.1-1.1-2-1.7-2.8c-0.5-0.8-1.2-1.5-2-2c-0.8-0.5-1.8-0.9-3-1.2c-1.2-0.3-2.7-0.4-4.4-0.4
    		c-3.5,0-6,0.6-7.6,1.7c-1.6,1.1-2.4,2.5-2.4,4.2c0,1.3,0.5,2.3,1.4,3.1c0.9,0.8,2.1,1.4,3.7,2c1.5,0.5,3.3,1,5.2,1.4
    		c2,0.4,3.9,0.8,5.9,1.3c2,0.5,4,1.1,5.9,1.7c1.9,0.7,3.7,1.6,5.2,2.7c1.5,1.1,2.7,2.5,3.7,4.1c0.9,1.6,1.4,3.6,1.4,6
    		C309.4,86.4,308.8,88.9,307.6,90.9z"/>
    	<path d="M327.4,48.8h4.7c1.1,0,2,0.4,2.8,1.2c0.8,0.8,1.2,1.7,1.2,2.8c0,1.1-0.4,2.1-1.2,2.8s-1.7,1.1-2.8,1.1h-4.7v37.9
    		c0,1.3-0.4,2.3-1.3,3.2c-0.9,0.9-2,1.3-3.2,1.3c-1.3,0-2.3-0.4-3.2-1.3c-0.9-0.9-1.3-2-1.3-3.2V56.7h-4.6c-1.1,0-2-0.4-2.8-1.1
    		c-0.8-0.7-1.2-1.7-1.2-2.8c0-1.1,0.4-2,1.2-2.8c0.8-0.8,1.7-1.2,2.8-1.2h4.6V39c0-1.3,0.4-2.3,1.3-3.2s1.9-1.3,3.2-1.3
    		c1.3,0,2.3,0.4,3.2,1.3s1.3,1.9,1.3,3.2V48.8z"/>
    	<path d="M341.5,32.1c1-1,2.2-1.5,3.7-1.5c1.4,0,2.6,0.5,3.6,1.5c1,1,1.5,2.2,1.5,3.6c0,1.4-0.5,2.6-1.5,3.6c-1,1-2.2,1.5-3.6,1.5
    		c-1.4,0-2.7-0.5-3.7-1.5c-1-1-1.5-2.2-1.5-3.6C340,34.2,340.5,33,341.5,32.1z M349.6,94.6c0,1.3-0.4,2.3-1.3,3.2
    		c-0.9,0.9-1.9,1.3-3.2,1.3c-1.3,0-2.3-0.4-3.2-1.3c-0.9-0.9-1.3-2-1.3-3.2V53.3c0-1.3,0.4-2.3,1.3-3.2c0.9-0.9,2-1.3,3.2-1.3
    		c1.3,0,2.3,0.4,3.2,1.3c0.9,0.9,1.3,2,1.3,3.2V94.6z"/>
    	<path d="M369.1,97.3c-2.9-1.2-5.4-3-7.5-5.2c-2.1-2.2-3.8-4.9-5-8.1c-1.2-3.1-1.8-6.6-1.8-10.4c0-3.8,0.6-7.3,1.8-10.5
    		c1.2-3.1,2.9-5.8,5-8.1c2.1-2.2,4.6-4,7.5-5.2c2.9-1.2,6-1.9,9.4-1.9c3.4,0,6.4,0.5,9,1.5c2.5,1,4.6,2.2,6.2,3.6
    		c1.6,1.4,3.2,2.9,4,4.4c0.5,0.9,0.9,1.5,0.9,2.6c0,1.3-0.5,2.3-1.4,3.1c-0.9,0.7-2,1.1-3.1,1.1c-0.8,0-1.6-0.2-2.2-0.6
    		c-0.7-0.4-1.2-1.3-1.8-2.1c-1-1.4-0.5-0.6-1.1-1.5c-0.7-0.9-1.5-1.6-2.5-2.3c-1-0.7-2.2-1.2-3.5-1.6c-1.4-0.4-2.8-0.6-4.4-0.6
    		c-1.8,0-3.5,0.3-5.3,1c-1.8,0.7-3.3,1.7-4.7,3.1c-1.4,1.4-2.5,3.3-3.4,5.6s-1.3,5.1-1.3,8.4c0,3.3,0.4,6.1,1.3,8.4s2,4.2,3.4,5.6
    		c1.4,1.4,3,2.5,4.7,3.1c1.8,0.7,3.5,1,5.3,1c1.6,0,3.1-0.2,4.4-0.6c1.3-0.4,2.5-0.9,3.5-1.6c1-0.7,1.8-1.5,2.5-2.3
    		c0.7-0.9,1.1-1.8,1.4-2.7c0.3-1,0.8-1.7,1.5-2.1c0.7-0.4,1.4-0.6,2.2-0.6c1.1,0,2.2,0.4,3.1,1.1c0.9,0.7,1.4,1.7,1.4,3
    		c0,0.6-0.3,1.7-0.9,3.1c-0.6,1.5-1.6,2.9-3.1,4.4c-1.5,1.5-3.5,2.8-6.2,4c-2.6,1.1-6,1.7-10,1.7C375.1,99.2,372,98.5,369.1,97.3z"
    		/>
    </g>
</svg>
						</div>
					</a>
				</h1>
			</div>
			<nav id="nav">
				<ul>
					
					<li>
						
							
						
						<a href="/products" id="nav_products"   >Products</a>
						
						<ul class="dropdown">
							
								<li><a href="/products/elasticsearch" id="nav_elasticsearch" >elasticsearch</a></li>								
							
								<li><a href="/found" id="nav_hosted-elasticsearch" >elasticsearch as a service</a></li>								
							
								<li><a href="/products/logstash" id="nav_logstash" >logstash</a></li>								
							
								<li><a href="/products/kibana" id="nav_kibana" >kibana</a></li>								
							
								<li><a href="/products/beats" id="nav_beats" >beats</a></li>								
							
								<li><a href="/products/watcher" id="nav_watcher" >watcher</a></li>								
							
								<li><a href="/products/shield" id="nav_shield" >shield</a></li>								
							
								<li><a href="/products/marvel" id="nav_marvel" >marvel</a></li>								
							
								<li><a href="/products/hadoop" id="nav_hadoop" >hadoop</a></li>								
							
								<li><a href="/downloads" id="nav_downloads" >downloads</a></li>								
								
						</ul>							
					</li>
					
					<li>
						
							
						
						<a href="/subscriptions" id="nav_subscriptions"   >Subscriptions</a>
						
						<ul class="dropdown">
								
						</ul>							
					</li>
					
					<li>
						
							
						
						<a href="/learn" id="nav_learn"   >Learn</a>
						
						<ul class="dropdown">
							
								<li><a href="/guide" id="nav_guide" >docs</a></li>								
							
								<li><a href="/videos" id="nav_videos" >videos</a></li>								
							
								<li><a href="/training" id="nav_training" >training</a></li>								
							
								<li><a href="/services" id="nav_services" >services</a></li>								
							
								<li><a href="/blog" id="nav_learn_blog" >blog</a></li>								
							
								<li><a href="/elasticon" id="nav_learn_elasticon" >elastic{ON}</a></li>								
								
						</ul>							
					</li>
					
					<li>
						
							
						
						<a href="/community" id="nav_community"   >Community</a>
						
						<ul class="dropdown">
							
								<li><a href="/community/meetups" id="nav_meetups" >meetups</a></li>								
							
								<li><a href="https://discuss.elastic.co" id="nav_discuss" target="_blank">discuss</a></li>								
							
								<li><a href="/community/codeofconduct" id="nav_codeofconduct" >code of conduct</a></li>								
								
						</ul>							
					</li>
					
					<li>
						
							
						
						<a href="/use-cases" id="nav_usecases"   >Use Cases</a>
						
						<ul class="dropdown">
								
						</ul>							
					</li>
					
					<li>
						
							
						
						<a href="/blog" id="nav_blog"   >Blog</a>
						
						<ul class="dropdown">
							
								<li><a href="/blog/category/news" id="blog_news" >News</a></li>								
							
								<li><a href="/blog/category/engineering" id="blog_engineering" >Engineering</a></li>								
							
								<li><a href="/blog/category/user-stories" id="blog_user-stories" >User Stories</a></li>								
							
								<li><a href="/blog/category/releases" id="blog_releases" >Releases</a></li>								
							
								<li><a href="/blog/archive" id="blog_archive" >Archive</a></li>								
								
						</ul>							
					</li>
					
					<li>
						
							
						
						<a href="/about" id="nav_about"   >About</a>
						
						<ul class="dropdown">
							
								<li><a href="/about/leadership" id="nav_leadership" >leadership</a></li>								
							
								<li><a href="/about/board" id="nav_board" >board of directors</a></li>								
							
								<li><a href="/about/careers" id="nav_careers" >careers</a></li>								
							
								<li><a href="/about/partners" id="nav_partners" >partners</a></li>								
							
								<li><a href="/about/press" id="nav_press" >press</a></li>								
								
						</ul>							
					</li>
					
				</ul>
			</nav>			
			<!-- Searchbar Input box -->
			 <!-- <form method="get" action="/search" name="searchForm" class="header-search-form" id="searchMobileFrm">
			   <input type="text" id="search-header-autocomplete" name="q" class="form-control global-input" placeholder="elastic{search}">
			</form>
			<div class="mobile-auto-complete"></div> -->  
		</div>
		<div class="1u 6u(small) 6u(xsmall)">
			<div id="searchbar">
				<a href="#" class="button icon"></a>
			</div>
			<!-- <div class="nav-auto-complete"></div> -->
		</div>
	</div>
</section>
<div class="mobile-menu-wrapper">
	<div class="row 0%">
		<div class="8u 6u(small) 6u(xsmall)">
			<div id="elastic">
				<h1>
					<a href="/">
						<div id="elastic-logo">
						<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 400 130" preserveAspectRatio="xMinYMin meet" enable-background="new 0 0 400 130" xml:space="preserve">
    <g>
    	<g>
    		<path fill="#FFFFFF" d="M122.5,67.8c0-10.3-6.4-19.2-15.9-22.7c0.4-2.2,0.6-4.3,0.6-6.6c0-19.1-15.5-34.6-34.6-34.6
    			c-11.1,0-21.5,5.3-28,14.4c-3.2-2.5-7.1-3.8-11.2-3.8c-10.1,0-18.4,8.2-18.4,18.4c0,2.2,0.4,4.4,1.1,6.4C6.5,42.6,0,51.8,0,62
    			c0,10.3,6.4,19.3,16,22.8c-0.4,2.1-0.6,4.3-0.6,6.6c0,19,15.5,34.5,34.5,34.5c11.2,0,21.5-5.4,28-14.4c3.2,2.5,7.2,3.9,11.3,3.9
    			c10.1,0,18.4-8.2,18.4-18.4c0-2.2-0.4-4.4-1.1-6.4C115.9,87.2,122.5,78,122.5,67.8z"/>
    		<g>
    			<path fill="#F4BD19" d="M47.9,56.3l27.3,12.5l27.6-24.2c0.4-2,0.6-4,0.6-6.1c0-17-13.8-30.8-30.8-30.8c-10.2,0-19.7,5-25.4,13.4
    				l-4.6,23.8L47.9,56.3z"/>
    		</g>
    		<g>
    			<path fill="#3CBEB1" d="M19.6,85.2c-0.4,2-0.6,4.1-0.6,6.2c0,17,13.9,30.9,30.9,30.9c10.3,0,19.8-5.1,25.6-13.5L80,85l-6.1-11.6
    				L46.5,60.9L19.6,85.2z"/>
    		</g>
    		<g>
    			<path fill="#E9478C" d="M19.4,37.9l18.7,4.4L42.3,21c-2.6-2-5.7-3-9-3c-8.1,0-14.8,6.6-14.8,14.8C18.5,34.5,18.8,36.3,19.4,37.9z
    				"/>
    		</g>
    		<g>
    			<path fill="#2C458F" d="M17.8,42.4C9.4,45.1,3.6,53.2,3.6,62c0,8.6,5.3,16.3,13.3,19.3l26.3-23.8l-4.8-10.3L17.8,42.4z"/>
    		</g>
    		<g>
    			<path fill="#95C63D" d="M80.3,108.7c2.6,2,5.7,3.1,8.9,3.1c8.1,0,14.8-6.6,14.8-14.8c0-1.8-0.3-3.5-0.9-5.1l-18.7-4.4L80.3,108.7
    				z"/>
    		</g>
    		<g>
    			<path fill="#176655" d="M84.1,82.6l20.6,4.8c8.4-2.8,14.2-10.8,14.2-19.6c0-8.6-5.3-16.2-13.3-19.3l-27,23.6L84.1,82.6z"/>
    		</g>
    	</g>
    	<path d="M162.8,76.3c0,0.1,0,0.6,0.1,1.4c0.1,0.8,0.3,1.8,0.6,3c0.3,1.1,0.8,2.4,1.4,3.7c0.6,1.3,1.4,2.5,2.5,3.6
    		c1,1.1,2.3,2,3.8,2.7c1.5,0.7,3.4,1.1,5.6,1.1c1.8,0,3.3-0.1,4.6-0.4c1.3-0.3,2.4-0.7,3.4-1.3c1-0.6,1.9-1.3,2.7-2.2
    		c0.8-0.9,1.6-1.9,2.4-3.1c0.5-0.7,1-1.2,1.6-1.5c0.6-0.3,1.2-0.4,1.8-0.4c1,0,2,0.4,2.8,1.1c0.9,0.7,1.3,1.7,1.3,2.8
    		c0,0.7-0.4,1.7-1.1,3.1c-0.7,1.4-1.9,2.8-3.6,4.1c-1.6,1.4-3.7,2.6-6.3,3.6c-2.6,1-5.7,1.5-9.5,1.5c-3.8,0-7.2-0.7-10.2-2.1
    		c-3-1.4-5.5-3.2-7.5-5.6c-2-2.3-3.6-5-4.7-8.1c-1.1-3.1-1.6-6.3-1.6-9.7c0-3.5,0.5-6.8,1.6-9.9c1.1-3.1,2.7-5.8,4.7-8.1
    		c2-2.3,4.5-4.1,7.4-5.5c2.9-1.3,6.1-2,9.6-2c3.3,0,6.3,0.5,9.2,1.5c2.8,1,5.3,2.4,7.4,4.3c2.1,1.9,3.7,4.1,5,6.8
    		c1.2,2.7,1.8,5.8,1.8,9.2c0,2.1-0.5,3.7-1.6,4.8c-1,1.1-2.2,1.6-3.6,1.6H162.8z M170.9,56.4c-1.5,0.6-2.7,1.4-3.7,2.4
    		c-1,0.9-1.8,2-2.4,3.1c-0.6,1.1-1,2.2-1.3,3.2c-0.3,1-0.5,1.8-0.5,2.5c-0.1,0.7-0.1,1.1-0.1,1.2h27.9c0-1.8-0.3-3.5-0.9-5.1
    		c-0.6-1.6-1.5-3-2.6-4.3c-1.2-1.2-2.7-2.2-4.5-3c-1.8-0.7-4-1.1-6.5-1.1C174.2,55.5,172.4,55.8,170.9,56.4z"/>
    	<path d="M214.3,94.6c0,1.3-0.4,2.3-1.3,3.2c-0.9,0.9-1.9,1.3-3.2,1.3c-1.3,0-2.3-0.4-3.2-1.3c-0.9-0.9-1.3-2-1.3-3.2V35.1
    		c0-1.3,0.4-2.3,1.3-3.2c0.9-0.9,2-1.3,3.2-1.3c1.3,0,2.3,0.4,3.2,1.3c0.9,0.9,1.3,1.9,1.3,3.2V94.6z"/>
    	<path d="M229.8,63.5c-0.6,0.3-1.2,0.5-1.9,0.5c-1.2,0-2.2-0.4-3.2-1.1c-1-0.7-1.5-1.8-1.5-3.1c0-0.5,0.1-1.1,0.4-1.9
    		c0.5-1.2,1.2-2.4,2.1-3.6c0.9-1.2,2-2.2,3.5-3.1s3.3-1.7,5.4-2.2c2.2-0.5,4.8-0.8,7.9-0.8c5.9,0,10.5,1.2,14,3.5
    		c3.5,2.3,5.2,5.8,5.2,10.3v32.8c0,1.3-0.4,2.3-1.3,3.2c-0.9,0.9-1.9,1.3-3.2,1.3c-1.3,0-2.3-0.4-3.2-1.3c-0.9-0.9-1.3-2-1.3-3.2v-2
    		c-1.2,2-4.7,4.5-7.5,5.3c-2.8,0.8-5.7,1.2-8.8,1.2c-2,0-3.9-0.3-5.9-0.8c-2-0.5-3.8-1.4-5.3-2.5c-1.6-1.1-2.9-2.6-3.8-4.3
    		c-1-1.7-1.5-3.8-1.5-6.2c0-2.8,0.5-5.7,1.6-7.5c1.1-1.9,2.6-3.4,4.4-4.6c1.8-1.2,3.9-2.1,6.3-2.8c2.4-0.6,4.9-1.1,7.5-1.4
    		c3-0.3,5.4-0.7,7.2-1.2c1.7-0.4,3-0.9,3.9-1.5c0.9-0.6,1.4-1.2,1.6-2c0.2-0.7,0.3-1.6,0.3-2.5c0-1.1-0.3-2-0.9-2.8
    		c-0.6-0.8-1.4-1.5-2.4-2c-1-0.5-2.1-0.9-3.3-1.2s-2.4-0.4-3.5-0.4c-2.1,0-3.7,0.2-5,0.5c-1.3,0.3-2.3,0.8-3.1,1.4
    		c-0.8,0.6-1.5,1.3-1.9,2.1c-0.5,0.8-0.9,1.6-1.3,2.5C230.9,62.6,230.4,63.1,229.8,63.5z M250.6,74.4c-1.1,0.3-2.4,0.6-3.8,0.8
    		c-1.5,0.2-3,0.4-4.6,0.6c-1.6,0.2-3.1,0.5-4.6,0.9c-1.5,0.3-2.8,0.8-4,1.5c-1.2,0.7-2.2,1.5-2.9,2.5c-0.7,1-1.1,3-1.1,4.6
    		c0,1.3,0.3,2.3,0.8,3.1c0.5,0.8,1.2,1.5,2.1,2c0.9,0.5,1.8,0.8,2.9,1c1.1,0.2,2.2,0.3,3.3,0.3c1.7,0,3.3-0.2,5-0.6
    		c1.7-0.4,3.2-1,4.5-1.9s2.4-2,3.3-3.5c0.8-1.4,1.2-3.8,1.2-5.9v-6.1L250.6,74.4z"/>
    	<path d="M307.6,90.9c-1.1,2-2.7,3.6-4.6,4.8s-4.1,2.1-6.6,2.7c-2.5,0.5-5.2,0.8-7.9,0.8c-3.9,0-7.2-0.6-9.9-1.8
    		c-2.7-1.2-4.9-2.6-6.5-4.1c-1.7-1.6-2.9-3.1-3.7-4.7c-0.7-1.6-1.1-2.7-1.1-3.5c0-1.3,0.5-2.4,1.4-3.2c0.9-0.8,2-1.2,3.1-1.2
    		c0.7,0,1.3,0.2,2,0.6c0.6,0.4,1.1,1,1.5,1.9c1,2.5,2.5,4.5,4.7,6.2c2.2,1.7,5.2,2.5,9.3,2.5c1.8,0,3.4-0.2,4.7-0.6
    		c1.3-0.4,2.4-1,3.2-1.7c0.8-0.7,1.4-1.5,1.9-2.4c0.4-0.9,0.6-1.8,0.6-2.8c0-2-0.8-3.4-2.3-4.4c-1.5-1-3.5-1.7-5.8-2.3
    		c-2.3-0.6-4.8-1.1-7.5-1.6c-2.7-0.5-5.2-1.2-7.5-2.2c-2.3-0.9-4.2-2.3-5.8-4c-1.6-1.8-2.3-4.2-2.3-7.3c0-4.5,1.6-8,4.9-10.5
    		c3.3-2.5,7.8-3.8,13.7-3.8c3.3,0,6,0.3,8.3,1c2.2,0.7,4.1,1.6,5.5,2.7c0.6,0.5,1.2,1,1.8,1.7c0.6,0.7,1.2,1.4,1.8,2.2
    		c0.6,0.8,1,1.5,1.4,2.3c0.4,0.7,0.6,1.4,0.6,2c0,1.3-0.5,2.4-1.6,3.1c-1,0.8-2.2,1.2-3.4,1.2c-0.7,0-1.5-0.1-2.1-0.6
    		c-0.6-0.6-1-1.3-1.3-1.8c-0.5-1.1-1.1-2-1.7-2.8c-0.5-0.8-1.2-1.5-2-2c-0.8-0.5-1.8-0.9-3-1.2c-1.2-0.3-2.7-0.4-4.4-0.4
    		c-3.5,0-6,0.6-7.6,1.7c-1.6,1.1-2.4,2.5-2.4,4.2c0,1.3,0.5,2.3,1.4,3.1c0.9,0.8,2.1,1.4,3.7,2c1.5,0.5,3.3,1,5.2,1.4
    		c2,0.4,3.9,0.8,5.9,1.3c2,0.5,4,1.1,5.9,1.7c1.9,0.7,3.7,1.6,5.2,2.7c1.5,1.1,2.7,2.5,3.7,4.1c0.9,1.6,1.4,3.6,1.4,6
    		C309.4,86.4,308.8,88.9,307.6,90.9z"/>
    	<path d="M327.4,48.8h4.7c1.1,0,2,0.4,2.8,1.2c0.8,0.8,1.2,1.7,1.2,2.8c0,1.1-0.4,2.1-1.2,2.8s-1.7,1.1-2.8,1.1h-4.7v37.9
    		c0,1.3-0.4,2.3-1.3,3.2c-0.9,0.9-2,1.3-3.2,1.3c-1.3,0-2.3-0.4-3.2-1.3c-0.9-0.9-1.3-2-1.3-3.2V56.7h-4.6c-1.1,0-2-0.4-2.8-1.1
    		c-0.8-0.7-1.2-1.7-1.2-2.8c0-1.1,0.4-2,1.2-2.8c0.8-0.8,1.7-1.2,2.8-1.2h4.6V39c0-1.3,0.4-2.3,1.3-3.2s1.9-1.3,3.2-1.3
    		c1.3,0,2.3,0.4,3.2,1.3s1.3,1.9,1.3,3.2V48.8z"/>
    	<path d="M341.5,32.1c1-1,2.2-1.5,3.7-1.5c1.4,0,2.6,0.5,3.6,1.5c1,1,1.5,2.2,1.5,3.6c0,1.4-0.5,2.6-1.5,3.6c-1,1-2.2,1.5-3.6,1.5
    		c-1.4,0-2.7-0.5-3.7-1.5c-1-1-1.5-2.2-1.5-3.6C340,34.2,340.5,33,341.5,32.1z M349.6,94.6c0,1.3-0.4,2.3-1.3,3.2
    		c-0.9,0.9-1.9,1.3-3.2,1.3c-1.3,0-2.3-0.4-3.2-1.3c-0.9-0.9-1.3-2-1.3-3.2V53.3c0-1.3,0.4-2.3,1.3-3.2c0.9-0.9,2-1.3,3.2-1.3
    		c1.3,0,2.3,0.4,3.2,1.3c0.9,0.9,1.3,2,1.3,3.2V94.6z"/>
    	<path d="M369.1,97.3c-2.9-1.2-5.4-3-7.5-5.2c-2.1-2.2-3.8-4.9-5-8.1c-1.2-3.1-1.8-6.6-1.8-10.4c0-3.8,0.6-7.3,1.8-10.5
    		c1.2-3.1,2.9-5.8,5-8.1c2.1-2.2,4.6-4,7.5-5.2c2.9-1.2,6-1.9,9.4-1.9c3.4,0,6.4,0.5,9,1.5c2.5,1,4.6,2.2,6.2,3.6
    		c1.6,1.4,3.2,2.9,4,4.4c0.5,0.9,0.9,1.5,0.9,2.6c0,1.3-0.5,2.3-1.4,3.1c-0.9,0.7-2,1.1-3.1,1.1c-0.8,0-1.6-0.2-2.2-0.6
    		c-0.7-0.4-1.2-1.3-1.8-2.1c-1-1.4-0.5-0.6-1.1-1.5c-0.7-0.9-1.5-1.6-2.5-2.3c-1-0.7-2.2-1.2-3.5-1.6c-1.4-0.4-2.8-0.6-4.4-0.6
    		c-1.8,0-3.5,0.3-5.3,1c-1.8,0.7-3.3,1.7-4.7,3.1c-1.4,1.4-2.5,3.3-3.4,5.6s-1.3,5.1-1.3,8.4c0,3.3,0.4,6.1,1.3,8.4s2,4.2,3.4,5.6
    		c1.4,1.4,3,2.5,4.7,3.1c1.8,0.7,3.5,1,5.3,1c1.6,0,3.1-0.2,4.4-0.6c1.3-0.4,2.5-0.9,3.5-1.6c1-0.7,1.8-1.5,2.5-2.3
    		c0.7-0.9,1.1-1.8,1.4-2.7c0.3-1,0.8-1.7,1.5-2.1c0.7-0.4,1.4-0.6,2.2-0.6c1.1,0,2.2,0.4,3.1,1.1c0.9,0.7,1.4,1.7,1.4,3
    		c0,0.6-0.3,1.7-0.9,3.1c-0.6,1.5-1.6,2.9-3.1,4.4c-1.5,1.5-3.5,2.8-6.2,4c-2.6,1.1-6,1.7-10,1.7C375.1,99.2,372,98.5,369.1,97.3z"
    		/>
    </g>
</svg>
						</div>
					</a>
				</h1>
			</div>
		</div>
		<div class="4u 6u(small) 6u(xsmall) text-right">
			<!-- <div class="mobile-menu-wrapper"> -->
				<ul class="m-shortcuts">
					
					<li><a href="#" class="m-search" id="header-search"></a></li>
					
					<li><a href="/guide" class="m-docs" id="mobile-docs"></a></li>
					
					<li><a href="/contact" class="m-contact" id="mobile-contact"></a></li>
					
				</ul>	
				<nav class="nav-menu">
					<div class="menu-button">
						<span></span>
					</div>
					<div class="nav-menu-list-wrap">
						<div class="nav-menu-list">
							
								<h3><a href="/products" id="nav_products" >Products</a></h3>

								
								<ul>
									
									<li><a href="/products/elasticsearch" id="nav_elasticsearch" >elasticsearch</a></li>
									
									<li><a href="/found" id="nav_hosted-elasticsearch" >elasticsearch as a service</a></li>
									
									<li><a href="/products/logstash" id="nav_logstash" >logstash</a></li>
									
									<li><a href="/products/kibana" id="nav_kibana" >kibana</a></li>
									
									<li><a href="/products/beats" id="nav_beats" >beats</a></li>
									
									<li><a href="/products/watcher" id="nav_watcher" >watcher</a></li>
									
									<li><a href="/products/shield" id="nav_shield" >shield</a></li>
									
									<li><a href="/products/marvel" id="nav_marvel" >marvel</a></li>
									
									<li><a href="/products/hadoop" id="nav_hadoop" >hadoop</a></li>
									
									<li><a href="/downloads" id="nav_downloads" >downloads</a></li>
									
								</ul>
								
							
								<h3><a href="/subscriptions" id="nav_subscriptions" >Subscriptions</a></h3>

								
							
								<h3><a href="/learn" id="nav_learn" >Learn</a></h3>

								
								<ul>
									
									<li><a href="/guide" id="nav_guide" >docs</a></li>
									
									<li><a href="/videos" id="nav_videos" >videos</a></li>
									
									<li><a href="/training" id="nav_training" >training</a></li>
									
									<li><a href="/services" id="nav_services" >services</a></li>
									
									<li><a href="/blog" id="nav_learn_blog" >blog</a></li>
									
									<li><a href="/elasticon" id="nav_learn_elasticon" >elastic{ON}</a></li>
									
								</ul>
								
							
								<h3><a href="/community" id="nav_community" >Community</a></h3>

								
								<ul>
									
									<li><a href="/community/meetups" id="nav_meetups" >meetups</a></li>
									
									<li><a href="/https:/discuss.elastic.co" id="nav_discuss" target="_blank">discuss</a></li>
									
									<li><a href="/community/codeofconduct" id="nav_codeofconduct" >code of conduct</a></li>
									
								</ul>
								
							
								<h3><a href="/use-cases" id="nav_usecases" >Use Cases</a></h3>

								
							
								<h3><a href="/blog" id="nav_blog" >Blog</a></h3>

								
								<ul>
									
									<li><a href="/blog/category/news" id="blog_news" >News</a></li>
									
									<li><a href="/blog/category/engineering" id="blog_engineering" >Engineering</a></li>
									
									<li><a href="/blog/category/user-stories" id="blog_user-stories" >User Stories</a></li>
									
									<li><a href="/blog/category/releases" id="blog_releases" >Releases</a></li>
									
									<li><a href="/blog/archive" id="blog_archive" >Archive</a></li>
									
								</ul>
								
							
								<h3><a href="/about" id="nav_about" >About</a></h3>

								
								<ul>
									
									<li><a href="/about/leadership" id="nav_leadership" >leadership</a></li>
									
									<li><a href="/about/board" id="nav_board" >board of directors</a></li>
									
									<li><a href="/about/careers" id="nav_careers" >careers</a></li>
									
									<li><a href="/about/partners" id="nav_partners" >partners</a></li>
									
									<li><a href="/about/press" id="nav_press" >press</a></li>
									
								</ul>
								
							
						</div>
					</div>
				</nav>
			<!-- </div> -->
		</div>
	</div>
</div>
<!-- Mobile Menu -->


		</div>
	</div>
</div>
<div class="header-search-wrapper">	
	<div class="container">
		<div class="big-search">
			<i class="big-search-icon"></i>
			<form method="get" action="/search" autocomplete="on" name="searchForm" id="searchfrm">
				<ul class="tags-wrapper">
					<li class="search-field"><input type="text" class="form-control global-input" id="autocomplete" name="q"></li>
				</ul>
			</form>
			<a href="#" class="header-search-cancel"></a>
		</div>
		<div class="nav-auto-complete"></div>
	</div>
</div>
<style>	
	
	
		.m-shortcuts li a.m-search {
			background: url("https://static-www.elastic.co/assets/blt174b13be89ff803c/m-search-icon.png?q=100") no-repeat scroll center center rgba(0, 0, 0, 0);
			background-size: contain;}
	
		.m-shortcuts li a.m-docs {
			background: url("https://static-www.elastic.co/assets/blt5ba03f594a7d610a/m-guide-icon.png?q=100") no-repeat scroll center center rgba(0, 0, 0, 0);
			background-size: contain;}
	
		.m-shortcuts li a.m-contact {
			background: url("https://static-www.elastic.co/assets/blt38c3e853c4b1174d/m-contact-icon.png?q=100") no-repeat scroll center center rgba(0, 0, 0, 0);
			background-size: contain;}
		
</style>
		</div>
	</div>
  	<div id="content">
  		
  			
            <div id="pageheader">
    <div class="container">
        <header>
            <h1><a href="/learn" title="Learn">Learn</a> |</h1>
            <h2><a href="/guide" title="Docs">Docs</a></h2>
        </header>
    </div>
</div>
<section id="guide">

            <!-- start body -->
<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch: The Definitive Guide</a></span> » <span class="breadcrumb-link"><a href="search-in-depth.html">Search in Depth </a></span> » <span class="breadcrumb-node">Full-Text Search</span></div><div class="navheader"><span class="prev"><a href="structured-search.html">
              « 
              Structured Search</a>
           
        </span><span class="next">
           
          <a href="multi-field-search.html">Multifield Search
               »
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="full-text-search"></a>Full-Text Search</h2></div></div></div><p>Now that we have covered the simple case of searching for structured data,
it is time to <a id="id-1.5.4.2.1" class="indexterm"></a>explore <span class="emphasis"><em>full-text search</em></span>: how to search within full-text fields in order to find the most relevant documents.</p><p>The two most important aspects of <a id="id-1.5.4.3.1" class="indexterm"></a>full-text search are as follows:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
Relevance
</span></dt><dd>
    The ability to rank results by how relevant they are to
    the given query, whether relevance is calculated using
    TF/IDF (see <a class="xref" href="sorting.html#relevance-intro" title="Relevance가 무엇인가?">Relevance가 무엇인가?</a>), proximity to a geolocation,
    fuzzy similarity, or some other algorithm.
</dd><dt><span class="term">
Analysis
</span></dt><dd>
    The process of converting a block of text into distinct, normalized tokens
    (see <a class="xref" href="mapping-analysis.html#analysis-intro" title="Analysis and Analyzers">Analysis and Analyzers</a>) in order to (a) create an inverted index and
    (b) query the inverted index.
</dd></dl></div><p>As soon as we talk <a id="id-1.5.4.5.1" class="indexterm"></a>about either relevance or analysis, we are in the territory
of queries, rather than filters.</p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="term-vs-full-text"></a>Term-Based Versus Full-Text</h2></div></div></div><p>While all queries perform some sort of relevance calculation, not all queries
have an analysis phase.<a id="id-1.5.4.6.2.1" class="indexterm"></a>
<a id="id-1.5.4.6.2.2" class="indexterm"></a><a id="id-1.5.4.6.2.3" class="indexterm"></a> Besides specialized queries like the <code class="literal">bool</code> or
<code class="literal">function_score</code> queries, which don’t operate on text at all, textual queries can
be broken down into two families:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
Term-based queries
</span></dt><dd><p class="simpara">Queries like the <code class="literal">term</code> or <code class="literal">fuzzy</code> queries are low-level queries that have no
analysis phase.<a id="id-1.5.4.6.3.1.2.1.3" class="indexterm"></a> They operate on a single term. A <code class="literal">term</code> query for the term
<code class="literal">Foo</code> looks for that <span class="emphasis"><em>exact term</em></span> in the inverted index and calculates the
TF/IDF relevance <code class="literal">_score</code> for each document that contains the term.</p><p class="simpara">It is important to remember that the <code class="literal">term</code> query looks in the inverted index
for the exact term only; it won’t match any variants like <code class="literal">foo</code> or
<code class="literal">FOO</code>.  It doesn’t matter how the term came to be in the index, just that it
is.  If you were to index <code class="literal">["Foo","Bar"]</code> into an exact value <code class="literal">not_analyzed</code>
field, or <code class="literal">Foo Bar</code> into an analyzed field with the <code class="literal">whitespace</code> analyzer,
both would result in having the two terms <code class="literal">Foo</code> and <code class="literal">Bar</code> in the inverted
index.</p></dd><dt><span class="term">
Full-text queries
</span></dt><dd><p class="simpara">Queries like the <code class="literal">match</code> or <code class="literal">query_string</code> queries are high-level queries
that understand the mapping of a field:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
If you use them to query a <code class="literal">date</code> or <code class="literal">integer</code> field, they will treat the
   query string as a date or integer, respectively.
</li><li class="listitem">
If you query an exact value (<code class="literal">not_analyzed</code>) string field,<a id="id-1.5.4.6.3.2.2.2.2.1.2" class="indexterm"></a>
<a id="id-1.5.4.6.3.2.2.2.2.1.3" class="indexterm"></a> they will treat
   the whole query string as a single term.
</li><li class="listitem">
But if you query a full-text (<code class="literal">analyzed</code>) field,<a id="id-1.5.4.6.3.2.2.2.3.1.2" class="indexterm"></a>
<a id="id-1.5.4.6.3.2.2.2.3.1.3" class="indexterm"></a> they will first pass the
  query string through the appropriate analyzer to produce the list of terms
  to be queried.
</li></ul></div><p class="simpara">Once the query has assembled a list of terms, it executes the appropriate
low-level query for each of these terms, and then combines  their results to
produce the final relevance score for each document.</p><p class="simpara">We will discuss this process in more detail in the following chapters.</p></dd></dl></div><p>You seldom need to use the term-based queries directly. Usually you want to
query full text, not individual terms, and this is easier to do with the
high-level full-text queries (which end up using term-based queries
internally).</p><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>If you do find yourself wanting to use a query on an exact value
<code class="literal">not_analyzed</code> field, <a id="id-1.5.4.6.5.1.2" class="indexterm"></a>
<a id="id-1.5.4.6.5.1.3" class="indexterm"></a>think about whether you really want a query or a filter.</p><p>Single-term queries usually represent binary yes/no questions and are
almost always better expressed as a <a id="id-1.5.4.6.5.2.1" class="indexterm"></a>
<a id="id-1.5.4.6.5.2.2" class="indexterm"></a>filter, so that they can benefit from
<a class="link" href="structured-search.html#filter-caching" title="All About Caching">filter caching</a>:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">GET /_search
{
    "query": {
        "filtered": {
            "filter": {
                "term": { "gender": "female" }
            }
        }
    }
}</pre></div></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="match-query"></a>The match Query</h2></div></div></div><p>The <code class="literal">match</code> query is the <span class="emphasis"><em>go-to</em></span> query—the first query that you should
reach for whenever you need to query any field.<a id="id-1.5.4.7.2.3" class="indexterm"></a><a id="id-1.5.4.7.2.4" class="indexterm"></a>
<a id="id-1.5.4.7.2.5" class="indexterm"></a> It is a high-level <span class="emphasis"><em>full-text
query</em></span>, meaning that it knows how to deal with both full-text fields and exact-value fields.</p><p>That said, the main use case for the <code class="literal">match</code> query is for full-text search. So
let’s take a look at how full-text search works with a simple example.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="match-test-data"></a>Index Some Data</h3></div></div></div><p>First, we’ll create a new index and index some<a id="id-1.5.4.7.4.2.1" class="indexterm"></a>
<a id="id-1.5.4.7.4.2.2" class="indexterm"></a>
<a id="id-1.5.4.7.4.2.3" class="indexterm"></a> documents using the
<a class="link" href="data-in-data-out.html#bulk" title="비용이 저렴한 bulk"><code class="literal">bulk</code> API</a>:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">DELETE /my_index <a id="CO57-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>

PUT /my_index
{ "settings": { "number_of_shards": 1 }} <a id="CO57-2"></a><span><img src="images/icons/callouts/2.png" alt="" /></span>

POST /my_index/my_type/_bulk
{ "index": { "_id": 1 }}
{ "title": "The quick brown fox" }
{ "index": { "_id": 2 }}
{ "title": "The quick brown fox jumps over the lazy dog" }
{ "index": { "_id": 3 }}
{ "title": "The quick brown fox jumps over the quick dog" }
{ "index": { "_id": 4 }}
{ "title": "Brown fox brown dog" }</pre></div><div class="sense_widget" data-snippet="snippets/100_Full_Text_Search/05_Match_query.json"></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO57-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
Delete the index in case it already exists.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO57-2"><span><img src="images/icons/callouts/2.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
Later, in <a class="xref" href="full-text-search.html#relevance-is-broken" title="Relevance Is Broken!">Relevance Is Broken!</a>, we explain why
    we created this index with only one primary shard.
</p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_a_single_word_query"></a>A Single-Word Query</h3></div></div></div><p>Our first example explains what<a id="id-1.5.4.7.5.2.1" class="indexterm"></a>
<a id="id-1.5.4.7.5.2.2" class="indexterm"></a>
<a id="id-1.5.4.7.5.2.3" class="indexterm"></a><a id="id-1.5.4.7.5.2.4" class="indexterm"></a>
<a id="id-1.5.4.7.5.2.5" class="indexterm"></a> happens when we use the <code class="literal">match</code> query to
search within a full-text field for a single word:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">GET /my_index/my_type/_search
{
    "query": {
        "match": {
            "title": "QUICK!"
        }
    }
}</pre></div><div class="sense_widget" data-snippet="snippets/100_Full_Text_Search/05_Match_query.json"></div><p>Elasticsearch executes the preceding <code class="literal">match</code> query<a id="id-1.5.4.7.5.5.2" class="indexterm"></a>
<a id="id-1.5.4.7.5.5.3" class="indexterm"></a> as follows:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
<span class="emphasis"><em>Check the field type</em></span>.
</p><p class="simpara">The <code class="literal">title</code> field is a full-text (<code class="literal">analyzed</code>) <code class="literal">string</code> field, which means that
the query string should be analyzed too.</p></li><li class="listitem"><p class="simpara">
<span class="emphasis"><em>Analyze the query string</em></span>.
</p><p class="simpara">The query string <code class="literal">QUICK!</code> is passed through the standard analyzer, which
results in the single term <code class="literal">quick</code>. Because we have a just a single term,
the <code class="literal">match</code> query can be executed as a single low-level <code class="literal">term</code> query.</p></li><li class="listitem"><p class="simpara">
<span class="emphasis"><em>Find matching docs</em></span>.
</p><p class="simpara">The <code class="literal">term</code> query looks up <code class="literal">quick</code> in the inverted index and retrieves the
list of documents that contain that term—in this case, documents 1, 2, and
3.</p></li><li class="listitem"><p class="simpara">
<span class="emphasis"><em>Score each doc</em></span>.
</p><p class="simpara">The <code class="literal">term</code> query calculates the relevance <code class="literal">_score</code> for each matching document,
by combining the<a id="id-1.5.4.7.5.6.4.2.3" class="indexterm"></a>
<a id="id-1.5.4.7.5.6.4.2.4" class="indexterm"></a> term frequency (how often <code class="literal">quick</code> appears in the <code class="literal">title</code>
field of each document), with the inverse document frequency (how often
<code class="literal">quick</code> appears in the <code class="literal">title</code> field in <span class="emphasis"><em>all</em></span> documents in the index), and the
length of each field (shorter fields are considered more relevant).
See <a class="xref" href="sorting.html#relevance-intro" title="Relevance가 무엇인가?">Relevance가 무엇인가?</a>.</p></li></ol></div><p>This process gives us the following (abbreviated) results:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">"hits": [
 {
    "_id":      "1",
    "_score":   0.5, <a id="CO58-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
    "_source": {
       "title": "The quick brown fox"
    }
 },
 {
    "_id":      "3",
    "_score":   0.44194174, <a id="CO58-2"></a><span><img src="images/icons/callouts/2.png" alt="" /></span>
    "_source": {
       "title": "The quick brown fox jumps over the quick dog"
    }
 },
 {
    "_id":      "2",
    "_score":   0.3125, <a id="CO58-3"></a><span><img src="images/icons/callouts/3.png" alt="" /></span>
    "_source": {
       "title": "The quick brown fox jumps over the lazy dog"
    }
 }
]</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO58-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
Document 1 is most relevant because its <code class="literal">title</code> field is short, which means
    that <code class="literal">quick</code> represents a large portion of its content.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO58-2"><span><img src="images/icons/callouts/2.png" alt="" /></span></a> <a href="#CO58-3"><span><img src="images/icons/callouts/3.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
Document 3 is more relevant than document 2 because <code class="literal">quick</code> appears twice.
</p></td></tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="match-multi-word"></a>Multiword Queries</h2></div></div></div><p>If we could search for only one word at a time, full-text search would be
pretty inflexible. Fortunately, the <code class="literal">match</code> query<a id="id-1.5.4.8.2.2" class="indexterm"></a>
<a id="id-1.5.4.8.2.3" class="indexterm"></a><a id="id-1.5.4.8.2.4" class="indexterm"></a>
<a id="id-1.5.4.8.2.5" class="indexterm"></a> makes multiword queries
just as simple:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">GET /my_index/my_type/_search
{
    "query": {
        "match": {
            "title": "BROWN DOG!"
        }
    }
}</pre></div><div class="sense_widget" data-snippet="snippets/100_Full_Text_Search/05_Match_query.json"></div><p>The preceding query returns all four documents in the results list:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">{
  "hits": [
     {
        "_id":      "4",
        "_score":   0.73185337, <a id="CO59-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
        "_source": {
           "title": "Brown fox brown dog"
        }
     },
     {
        "_id":      "2",
        "_score":   0.47486103, <a id="CO59-2"></a><span><img src="images/icons/callouts/2.png" alt="" /></span>
        "_source": {
           "title": "The quick brown fox jumps over the lazy dog"
        }
     },
     {
        "_id":      "3",
        "_score":   0.47486103, <a id="CO59-3"></a><span><img src="images/icons/callouts/3.png" alt="" /></span>
        "_source": {
           "title": "The quick brown fox jumps over the quick dog"
        }
     },
     {
        "_id":      "1",
        "_score":   0.11914785, <a id="CO59-4"></a><span><img src="images/icons/callouts/4.png" alt="" /></span>
        "_source": {
           "title": "The quick brown fox"
        }
     }
  ]
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO59-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
Document 4 is the most relevant because it contains <code class="literal">"brown"</code> twice and <code class="literal">"dog"</code>
    once.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO59-2"><span><img src="images/icons/callouts/2.png" alt="" /></span></a> <a href="#CO59-3"><span><img src="images/icons/callouts/3.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
Documents 2 and 3 both contain <code class="literal">brown</code> and <code class="literal">dog</code> once each, and the <code class="literal">title</code>
    field is the same length in both docs, so they have the same score.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO59-4"><span><img src="images/icons/callouts/4.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
Document 1 matches even though it contains only <code class="literal">brown</code>, not <code class="literal">dog</code>.
</p></td></tr></table></div><p>Because the <code class="literal">match</code> query has to look for two terms—<code class="literal">["brown","dog"]</code>—internally it has to execute two <code class="literal">term</code> queries and combine their individual
results into the overall result. To do this, it wraps the two <code class="literal">term</code> queries
in a <code class="literal">bool</code> query, which we examine in detail in <a class="xref" href="full-text-search.html#bool-query" title="Combining Queries">Combining Queries</a>.</p><p>The important thing to take away from this is that any document whose
<code class="literal">title</code> field contains <span class="emphasis"><em>at least one of the specified terms</em></span> will match the
query.  The more terms that match, the more relevant the document.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="match-improving-precision"></a>Improving Precision</h3></div></div></div><p>Matching any document that contains <span class="emphasis"><em>any</em></span> of the query terms may result in  a
long tail of seemingly irrelevant results. <a id="id-1.5.4.8.10.2.2" class="indexterm"></a>
<a id="id-1.5.4.8.10.2.3" class="indexterm"></a>
<a id="id-1.5.4.8.10.2.4" class="indexterm"></a><a id="id-1.5.4.8.10.2.5" class="indexterm"></a>
<a id="id-1.5.4.8.10.2.6" class="indexterm"></a> It’s a shotgun approach to search.
Perhaps we want to show only documents that contain <span class="emphasis"><em>all</em></span> of the query terms.
In other words, instead of <code class="literal">brown OR dog</code>, we want to return only documents
that match <code class="literal">brown AND dog</code>.</p><p>The <code class="literal">match</code> query accepts an <code class="literal">operator</code> parameter<a id="id-1.5.4.8.10.3.3" class="indexterm"></a>
<a id="id-1.5.4.8.10.3.4" class="indexterm"></a><a id="id-1.5.4.8.10.3.5" class="indexterm"></a>
<a id="id-1.5.4.8.10.3.6" class="indexterm"></a><a id="id-1.5.4.8.10.3.7" class="indexterm"></a>
<a id="id-1.5.4.8.10.3.8" class="indexterm"></a> that defaults to <code class="literal">or</code>.
You can change it to <code class="literal">and</code> to require that all specified terms must match:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">GET /my_index/my_type/_search
{
    "query": {
        "match": {
            "title": {      <a id="CO60-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
                "query":    "BROWN DOG!",
                "operator": "and"
            }
        }
    }
}</pre></div><div class="sense_widget" data-snippet="snippets/100_Full_Text_Search/05_Match_query.json"></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO60-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The structure of the <code class="literal">match</code> query has to change slightly in order to
    accommodate the <code class="literal">operator</code> parameter.
</p></td></tr></table></div><p>This query would exclude document 1, which contains only one of the two terms.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="match-precision"></a>Controlling Precision</h3></div></div></div><p>The choice between <span class="emphasis"><em>all</em></span> and <span class="emphasis"><em>any</em></span> is a bit<a id="id-1.5.4.8.11.2.3" class="indexterm"></a>
<a id="id-1.5.4.8.11.2.4" class="indexterm"></a>
<a id="id-1.5.4.8.11.2.5" class="indexterm"></a> too black-or-white. What if the
user specified five query terms, and a document contains only four of them?
Setting <code class="literal">operator</code> to <code class="literal">and</code> would exclude this document.</p><p>Sometimes that is exactly what you want, but for most full-text search use
cases, you want to include documents that may be relevant but exclude those
that are unlikely to be relevant.  In other words, we need something
in-between.</p><p>The <code class="literal">match</code> query supports<a id="id-1.5.4.8.11.4.2" class="indexterm"></a>
<a id="id-1.5.4.8.11.4.3" class="indexterm"></a><a id="id-1.5.4.8.11.4.4" class="indexterm"></a> the <code class="literal">minimum_should_match</code> parameter, which allows
you to specify the number of terms that must match for a document to be considered
relevant.  While you can specify an absolute number of terms, it usually makes
sense to specify a percentage instead, as you have no control over the number of words the user may enter:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">GET /my_index/my_type/_search
{
  "query": {
    "match": {
      "title": {
        "query":                "quick brown dog",
        "minimum_should_match": "75%"
      }
    }
  }
}</pre></div><div class="sense_widget" data-snippet="snippets/100_Full_Text_Search/05_Match_query.json"></div><p>When specified as a percentage, <code class="literal">minimum_should_match</code> does the right thing:
in the preceding example with three terms, <code class="literal">75%</code> would be rounded down to <code class="literal">66.6%</code>,
or two out of the three terms. No matter what you set it to, at least one term
must match for a document to be considered a match.</p><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>The <code class="literal">minimum_should_match</code> parameter is flexible, and different rules can
be applied depending on the number of terms the user enters.  For the full
documentation see the
<a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-minimum-should-match.html#query-dsl-minimum-should-match" target="_top">https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-minimum-should-match.html#query-dsl-minimum-should-match</a></p></div></div><p>To fully understand how the <code class="literal">match</code> query handles multiword queries, we need
to look at how to combine multiple queries with the <code class="literal">bool</code> query.</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="bool-query"></a>Combining Queries</h2></div></div></div><p>In <a class="xref" href="structured-search.html#combining-filters" title="Combining Filters">Combining Filters</a> we discussed how to<a id="id-1.5.4.9.2.2" class="indexterm"></a>
<a id="id-1.5.4.9.2.3" class="indexterm"></a>, use the <code class="literal">bool</code> filter to combine
multiple filter clauses with <code class="literal">and</code>, <code class="literal">or</code>, and <code class="literal">not</code> logic.  In query land, the
<code class="literal">bool</code> query does a similar job but with one important difference.</p><p>Filters make a binary decision: should this document be included in the
results list or not? Queries, however, are more subtle. They decide not only
whether to include a document, but also how <span class="emphasis"><em>relevant</em></span> that document is.</p><p>Like the filter equivalent, the <code class="literal">bool</code> query accepts<a id="id-1.5.4.9.4.2" class="indexterm"></a> multiple query clauses
under the <code class="literal">must</code>, <code class="literal">must_not</code>, and <code class="literal">should</code> parameters.  For instance:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">GET /my_index/my_type/_search
{
  "query": {
    "bool": {
      "must":     { "match": { "title": "quick" }},
      "must_not": { "match": { "title": "lazy"  }},
      "should": [
                  { "match": { "title": "brown" }},
                  { "match": { "title": "dog"   }}
      ]
    }
  }
}</pre></div><div class="sense_widget" data-snippet="snippets/100_Full_Text_Search/15_Bool_query.json"></div><p>The results from the preceding query include any document whose <code class="literal">title</code> field
contains the term <code class="literal">quick</code>, except for those that also contain <code class="literal">lazy</code>. So
far, this is pretty similar to how the <code class="literal">bool</code> filter works.</p><p>The difference comes in with the two <code class="literal">should</code> clauses, which say that: a document
is <span class="emphasis"><em>not required</em></span> to contain <a id="id-1.5.4.9.8.3" class="indexterm"></a>
<a id="id-1.5.4.9.8.4" class="indexterm"></a>either <code class="literal">brown</code> or <code class="literal">dog</code>, but if it does, then
it should be considered <span class="emphasis"><em>more relevant</em></span>:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">{
  "hits": [
     {
        "_id":      "3",
        "_score":   0.70134366, <a id="CO61-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
        "_source": {
           "title": "The quick brown fox jumps over the quick dog"
        }
     },
     {
        "_id":      "1",
        "_score":   0.3312608,
        "_source": {
           "title": "The quick brown fox"
        }
     }
  ]
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO61-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
Document 3 scores higher because it contains both <code class="literal">brown</code> and <code class="literal">dog</code>.
</p></td></tr></table></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_score_calculation"></a>Score Calculation</h3></div></div></div><p>The <code class="literal">bool</code> query calculates<a id="id-1.5.4.9.11.2.2" class="indexterm"></a>
<a id="id-1.5.4.9.11.2.3" class="indexterm"></a><a id="id-1.5.4.9.11.2.4" class="indexterm"></a>
<a id="id-1.5.4.9.11.2.5" class="indexterm"></a> the relevance <code class="literal">_score</code> for each document by adding
together the <code class="literal">_score</code> from all of the matching <code class="literal">must</code> and <code class="literal">should</code> clauses,
and then dividing by the total number of <code class="literal">must</code> and <code class="literal">should</code> clauses.</p><p>The <code class="literal">must_not</code> clauses do not affect <a id="id-1.5.4.9.11.3.2" class="indexterm"></a>
<a id="id-1.5.4.9.11.3.3" class="indexterm"></a>the score; their only purpose is to
exclude documents that might otherwise have been included.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_controlling_precision"></a>Controlling Precision</h3></div></div></div><p>All the <code class="literal">must</code> clauses must match, and all the <code class="literal">must_not</code> clauses must not
match, but how many <code class="literal">should</code> clauses<a id="id-1.5.4.9.12.2.4" class="indexterm"></a>
<a id="id-1.5.4.9.12.2.5" class="indexterm"></a><a id="id-1.5.4.9.12.2.6" class="indexterm"></a>
<a id="id-1.5.4.9.12.2.7" class="indexterm"></a>
<a id="id-1.5.4.9.12.2.8" class="indexterm"></a><a id="id-1.5.4.9.12.2.9" class="indexterm"></a>
<a id="id-1.5.4.9.12.2.10" class="indexterm"></a> should match? By default, none of the <code class="literal">should</code> clauses are required to match, with one
exception: if there are no <code class="literal">must</code> clauses, then at least one <code class="literal">should</code> clause
must match.</p><p>Just as we can control the <a class="link" href="full-text-search.html#match-precision" title="Controlling Precision">precision of the <code class="literal">match</code> query</a>,
we can control how many <code class="literal">should</code> clauses need to match by using the
<code class="literal">minimum_should_match</code> parameter,<a id="id-1.5.4.9.12.3.4" class="indexterm"></a>
<a id="id-1.5.4.9.12.3.5" class="indexterm"></a> either as an absolute number or as a
percentage:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">GET /my_index/my_type/_search
{
  "query": {
    "bool": {
      "should": [
        { "match": { "title": "brown" }},
        { "match": { "title": "fox"   }},
        { "match": { "title": "dog"   }}
      ],
      "minimum_should_match": 2 <a id="CO62-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
    }
  }
}</pre></div><div class="sense_widget" data-snippet="snippets/100_Full_Text_Search/15_Bool_query.json"></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO62-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
This could also be expressed as a percentage.
</p></td></tr></table></div><p>The results would include only documents whose <code class="literal">title</code> field contains <code class="literal">"brown"
AND "fox"</code>, <code class="literal">"brown" AND "dog"</code>, or <code class="literal">"fox" AND "dog"</code>. If a document contains
all three, it would be considered more relevant than those that contain
just two of the three.</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_how_match_uses_bool"></a>How match Uses bool</h2></div></div></div><p>By now, you have probably realized that <a class="link" href="full-text-search.html#match-multi-word" title="Multiword Queries">multiword <code class="literal">match</code> queries</a> simply wrap<a id="id-1.5.4.10.2.2" class="indexterm"></a>
<a id="id-1.5.4.10.2.3" class="indexterm"></a><a id="id-1.5.4.10.2.4" class="indexterm"></a>
<a id="id-1.5.4.10.2.5" class="indexterm"></a><a id="id-1.5.4.10.2.6" class="indexterm"></a>
<a id="id-1.5.4.10.2.7" class="indexterm"></a> the generated <code class="literal">term</code> queries in a <code class="literal">bool</code> query. With the
default <code class="literal">or</code> operator, each <code class="literal">term</code> query is added as a <code class="literal">should</code> clause, so
at least one clause must match. These two queries are equivalent:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">{
    "match": { "title": "brown fox"}
}</pre></div><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">{
  "bool": {
    "should": [
      { "term": { "title": "brown" }},
      { "term": { "title": "fox"   }}
    ]
  }
}</pre></div><p>With the <code class="literal">and</code> operator, all the <code class="literal">term</code> queries are added as <code class="literal">must</code> clauses,
so <span class="emphasis"><em>all</em></span> clauses must match. These two queries are equivalent:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">{
    "match": {
        "title": {
            "query":    "brown fox",
            "operator": "and"
        }
    }
}</pre></div><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">{
  "bool": {
    "must": [
      { "term": { "title": "brown" }},
      { "term": { "title": "fox"   }}
    ]
  }
}</pre></div><p>And if the <code class="literal">minimum_should_match</code> parameter is<a id="id-1.5.4.10.8.2" class="indexterm"></a>
<a id="id-1.5.4.10.8.3" class="indexterm"></a> specified, it is passed
directly through to the <code class="literal">bool</code> query, making these two queries equivalent:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">{
    "match": {
        "title": {
            "query":                "quick brown fox",
            "minimum_should_match": "75%"
        }
    }
}</pre></div><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">{
  "bool": {
    "should": [
      { "term": { "title": "brown" }},
      { "term": { "title": "fox"   }},
      { "term": { "title": "quick" }}
    ],
    "minimum_should_match": 2 <a id="CO63-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO63-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
Because there are only three clauses, the <code class="literal">minimum_should_match</code>
    value of <code class="literal">75%</code> in the <code class="literal">match</code> query is rounded down to <code class="literal">2</code>.
    At least two out of the three <code class="literal">should</code>  clauses must match.
</p></td></tr></table></div><p>Of course, we would normally write these types of queries by using the <code class="literal">match</code>
query, but understanding how the <code class="literal">match</code> query works internally lets you take
control of the process when you need to. Some things can’t be
done with a single <code class="literal">match</code> query, such as give more weight to some query terms
than to others. We will look at an example of this in the next section.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_boosting_query_clauses"></a>Boosting Query Clauses</h2></div></div></div><p>Of course, the <code class="literal">bool</code> query isn’t restricted <a id="id-1.5.4.11.2.2" class="indexterm"></a>
<a id="id-1.5.4.11.2.3" class="indexterm"></a>to combining simple one-word
<code class="literal">match</code> queries. It can combine any other query, including other <code class="literal">bool</code>
queries.<a id="id-1.5.4.11.2.6" class="indexterm"></a>
<a id="id-1.5.4.11.2.7" class="indexterm"></a>  It is commonly used to fine-tune the relevance <code class="literal">_score</code> for each
document by combining the scores from several distinct queries.</p><p>Imagine that we want to search for documents<a id="id-1.5.4.11.3.1" class="indexterm"></a>
<a id="id-1.5.4.11.3.2" class="indexterm"></a><a id="id-1.5.4.11.3.3" class="indexterm"></a>
<a id="id-1.5.4.11.3.4" class="indexterm"></a> about "full-text search,"  but we
want to give more <span class="emphasis"><em>weight</em></span> to documents that also mention "Elasticsearch" or
"Lucene." By <span class="emphasis"><em>more weight</em></span>, we mean that documents mentioning
"Elasticsearch" or "Lucene" will receive a higher relevance <code class="literal">_score</code> than
those that don’t, which means that they will appear higher in the list of
results.</p><p>A simple <code class="literal">bool</code> <span class="emphasis"><em>query</em></span> allows us to write this fairly complex logic as follows:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">GET /_search
{
    "query": {
        "bool": {
            "must": {
                "match": {
                    "content": { <a id="CO64-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
                        "query":    "full text search",
                        "operator": "and"
                    }
                }
            },
            "should": [ <a id="CO64-2"></a><span><img src="images/icons/callouts/2.png" alt="" /></span>
                { "match": { "content": "Elasticsearch" }},
                { "match": { "content": "Lucene"        }}
            ]
        }
    }
}</pre></div><div class="sense_widget" data-snippet="snippets/100_Full_Text_Search/25_Boost.json"></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO64-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The <code class="literal">content</code> field must contain all of the words <code class="literal">full</code>, <code class="literal">text</code>, and <code class="literal">search</code>.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO64-2"><span><img src="images/icons/callouts/2.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
If the <code class="literal">content</code> field also contains <code class="literal">Elasticsearch</code> or <code class="literal">Lucene</code>,
    the document will receive a higher <code class="literal">_score</code>.
</p></td></tr></table></div><p>The more <code class="literal">should</code> clauses that match, the more relevant the document.  So far,
so good.</p><p>But what if we want to give more weight to the docs that contain <code class="literal">Lucene</code> and
even more weight to the docs containing <code class="literal">Elasticsearch</code>?</p><p>We can control <a id="id-1.5.4.11.10.1" class="indexterm"></a>the relative weight of any query clause by specifying a <code class="literal">boost</code>
value, which defaults to <code class="literal">1</code>. A <code class="literal">boost</code> value greater than <code class="literal">1</code> increases the
relative weight of that clause.  So we could  rewrite the preceding query as
follows:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">GET /_search
{
    "query": {
        "bool": {
            "must": {
                "match": {  <a id="CO65-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
                    "content": {
                        "query":    "full text search",
                        "operator": "and"
                    }
                }
            },
            "should": [
                { "match": {
                    "content": {
                        "query": "Elasticsearch",
                        "boost": 3 <a id="CO65-2"></a><span><img src="images/icons/callouts/2.png" alt="" /></span>
                    }
                }},
                { "match": {
                    "content": {
                        "query": "Lucene",
                        "boost": 2 <a id="CO65-3"></a><span><img src="images/icons/callouts/3.png" alt="" /></span>
                    }
                }}
            ]
        }
    }
}</pre></div><div class="sense_widget" data-snippet="snippets/100_Full_Text_Search/25_Boost.json"></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO65-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
These clauses use the default <code class="literal">boost</code> of <code class="literal">1</code>.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO65-2"><span><img src="images/icons/callouts/2.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
This clause is the most important, as it has the highest <code class="literal">boost</code>.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO65-3"><span><img src="images/icons/callouts/3.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
This clause is more important than the default, but not as important
    as the <code class="literal">Elasticsearch</code> clause.
</p></td></tr></table></div><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><a id="boost-normalization"></a><p>The <code class="literal">boost</code> parameter is used to increase<a id="id-1.5.4.11.14.1.2" class="indexterm"></a>
<a id="id-1.5.4.11.14.1.3" class="indexterm"></a> the relative weight of a clause
(with a <code class="literal">boost</code> greater than <code class="literal">1</code>) or decrease the relative weight (with a
<code class="literal">boost</code> between <code class="literal">0</code> and <code class="literal">1</code>), but the increase or decrease is not linear. In
other words, a <code class="literal">boost</code> of <code class="literal">2</code> does not result in double the <code class="literal">_score</code>.</p><p>Instead, the new <code class="literal">_score</code> is <span class="emphasis"><em>normalized</em></span> after<a id="id-1.5.4.11.14.2.3" class="indexterm"></a>
<a id="id-1.5.4.11.14.2.4" class="indexterm"></a> the boost is applied. Each
type of query has its own normalization algorithm, and the details are beyond
the scope of this book. Suffice to say that a higher <code class="literal">boost</code> value results in
a higher <code class="literal">_score</code>.</p><p>If you are implementing your own scoring model not based on TF/IDF and you
need more control over the boosting process, you can use the
<a class="link" href="controlling-relevance.html#function-score-query" title="function_score Query"><code class="literal">function_score</code> query</a> to<a id="id-1.5.4.11.14.3.2" class="indexterm"></a> manipulate a document’s
boost without the normalization step.</p></div></div><p>We present other ways of combining queries in the next chapter,
<a class="xref" href="multi-field-search.html" title="Multifield Search"><em>Multifield Search</em></a>. But first, let’s take a look at the other important
feature of queries: text analysis.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_controlling_analysis"></a>Controlling Analysis</h2></div></div></div><p>Queries can find only terms that actually <a id="id-1.5.4.12.2.1" class="indexterm"></a>
<a id="id-1.5.4.12.2.2" class="indexterm"></a><a id="id-1.5.4.12.2.3" class="indexterm"></a>
<a id="id-1.5.4.12.2.4" class="indexterm"></a>exist in the inverted index, so it
is important to ensure that the same analysis process is applied both to the
document at index time, and to the query string at search time so that the
terms in the query match the terms in the inverted index.</p><p>Although we say <span class="emphasis"><em>document</em></span>, analyzers are determined per field.<a id="id-1.5.4.12.3.2" class="indexterm"></a>
<a id="id-1.5.4.12.3.3" class="indexterm"></a> Each
field can have a different analyzer, either by configuring a specific analyzer
for that field or by falling back on the type, index, or node defaults.  At
index time, a field’s value is analyzed by using the configured or default
analyzer for that field.</p><p>For instance, let’s add a new field to <code class="literal">my_index</code>:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">PUT /my_index/_mapping/my_type
{
    "my_type": {
        "properties": {
            "english_title": {
                "type":     "string",
                "analyzer": "english"
            }
        }
    }
}</pre></div><div class="sense_widget" data-snippet="snippets/100_Full_Text_Search/30_Analysis.json"></div><p>Now we can compare how values in the <code class="literal">english_title</code> field and the <code class="literal">title</code> field are
analyzed at index time by using the <code class="literal">analyze</code> API to analyze the word <code class="literal">Foxes</code>:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">GET /my_index/_analyze?field=my_type.title   <a id="CO66-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
Foxes

GET /my_index/_analyze?field=my_type.english_title <a id="CO66-2"></a><span><img src="images/icons/callouts/2.png" alt="" /></span>
Foxes</pre></div><div class="sense_widget" data-snippet="snippets/100_Full_Text_Search/30_Analysis.json"></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO66-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
Field <code class="literal">title</code>, which uses the default <code class="literal">standard</code> analyzer, will return the
    term <code class="literal">foxes</code>.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO66-2"><span><img src="images/icons/callouts/2.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
Field <code class="literal">english_title</code>, which uses the <code class="literal">english</code> analyzer, will return the term
    <code class="literal">fox</code>.
</p></td></tr></table></div><p>This means that, were we to run a low-level <code class="literal">term</code> query for the exact term
<code class="literal">fox</code>, the <code class="literal">english_title</code> field would match but the <code class="literal">title</code> field would
not.</p><p>High-level queries like the <code class="literal">match</code> query understand field mappings and can
apply the correct analyzer for each field being queried.<a id="id-1.5.4.12.12.2" class="indexterm"></a>
<a id="id-1.5.4.12.12.3" class="indexterm"></a> We can see this
in action with <a id="id-1.5.4.12.12.4" class="indexterm"></a>the <code class="literal">validate-query</code> API:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">GET /my_index/my_type/_validate/query?explain
{
    "query": {
        "bool": {
            "should": [
                { "match": { "title":         "Foxes"}},
                { "match": { "english_title": "Foxes"}}
            ]
        }
    }
}</pre></div><div class="sense_widget" data-snippet="snippets/100_Full_Text_Search/30_Analysis.json"></div><p>which returns this <code class="literal">explanation</code>:</p><pre class="literallayout">(title:foxes english_title:fox)</pre><p>The <code class="literal">match</code> query uses the appropriate analyzer for each field to ensure
that it looks for each term in the correct format for that field.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_default_analyzers"></a>Default Analyzers</h3></div></div></div><p>While we can specify an analyzer at the field level,<a id="id-1.5.4.12.18.2.1" class="indexterm"></a>
<a id="id-1.5.4.12.18.2.2" class="indexterm"></a>
<a id="id-1.5.4.12.18.2.3" class="indexterm"></a><a id="id-1.5.4.12.18.2.4" class="indexterm"></a>
<a id="id-1.5.4.12.18.2.5" class="indexterm"></a> how do we determine which
analyzer is used for a field if none is specified at the field level?</p><p>Analyzers can be specified at several levels.  Elasticsearch works through
each level until it finds an analyzer that it can use.  At index time, the
order <a id="id-1.5.4.12.18.3.1" class="indexterm"></a>
<a id="id-1.5.4.12.18.3.2" class="indexterm"></a>is as follows:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
The <code class="literal">analyzer</code> defined in the field mapping, else
</li><li class="listitem">
<span class="emphasis"><em>The analyzer defined in the <code class="literal">_analyzer</code> field of the document, else</em></span>
</li><li class="listitem">
The default <code class="literal">analyzer</code> for the <code class="literal">type</code>, which defaults to
</li><li class="listitem">
The analyzer named <code class="literal">default</code> in the index settings, which defaults to
</li><li class="listitem">
The analyzer named <code class="literal">default</code> at node level, which defaults to
</li><li class="listitem">
The <code class="literal">standard</code> analyzer
</li></ul></div><p>At search time, the <a id="id-1.5.4.12.18.5.1" class="indexterm"></a>
<a id="id-1.5.4.12.18.5.2" class="indexterm"></a>sequence is slightly different:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<span class="emphasis"><em>The <code class="literal">analyzer</code> defined in the query itself, else</em></span>
</li><li class="listitem">
The <code class="literal">analyzer</code> defined in the field mapping, else
</li><li class="listitem">
The default <code class="literal">analyzer</code> for the <code class="literal">type</code>, which defaults to
</li><li class="listitem">
The analyzer named <code class="literal">default</code> in the index settings, which defaults to
</li><li class="listitem">
The analyzer named <code class="literal">default</code> at node level, which defaults to
</li><li class="listitem">
The <code class="literal">standard</code> analyzer
</li></ul></div><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>The two lines in italics in the preceding lists highlight differences in the index time sequence and the search time sequence.  The <code class="literal">_analyzer</code> field allows you to specify a default analyzer for each document (for example, <code class="literal">english</code>, <code class="literal">french</code>, <code class="literal">spanish</code>) while the <code class="literal">analyzer</code> parameter in the query specifies which analyzer to use on the query string. However, this is not the best way to handle multiple languages
in a single index because of the pitfalls highlighted in <a class="xref" href="languages.html" title="인간의 언어를 다루어보자">인간의 언어를 다루어보자 </a>.</p></div></div><p>Occasionally, it makes sense to use a different analyzer at index and search
time.<a id="id-1.5.4.12.18.8.1" class="indexterm"></a>
<a id="id-1.5.4.12.18.8.2" class="indexterm"></a> For instance, at index time we may want to index synonyms (for example, for every
occurrence of <code class="literal">quick</code>, we also index <code class="literal">fast</code>, <code class="literal">rapid</code>, and <code class="literal">speedy</code>). But at
search time, we don’t need to search for all of these synonyms.  Instead we
can just look up the single word that the user has entered, be it <code class="literal">quick</code>,
<code class="literal">fast</code>, <code class="literal">rapid</code>, or <code class="literal">speedy</code>.</p><p>To enable this distinction, Elasticsearch also supports <a id="id-1.5.4.12.18.9.1" class="indexterm"></a><a id="id-1.5.4.12.18.9.2" class="indexterm"></a>the <code class="literal">index_analyzer</code>
and <code class="literal">search_analyzer</code> parameters, and<a id="id-1.5.4.12.18.9.5" class="indexterm"></a> <a id="id-1.5.4.12.18.9.6" class="indexterm"></a>analyzers named <code class="literal">default_index</code> and
<code class="literal">default_search</code>.</p><p>Taking these extra parameters into account, the <span class="emphasis"><em>full</em></span> sequence at index time
really looks like this:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
The <code class="literal">index_analyzer</code> defined in the field mapping, else
</li><li class="listitem">
The <code class="literal">analyzer</code> defined in the field mapping, else
</li><li class="listitem">
The analyzer defined in the <code class="literal">_analyzer</code> field of the document, else
</li><li class="listitem">
The default <code class="literal">index_analyzer</code> for the <code class="literal">type</code>, which defaults to
</li><li class="listitem">
The default <code class="literal">analyzer</code> for the <code class="literal">type</code>, which defaults to
</li><li class="listitem">
The analyzer named <code class="literal">default_index</code> in the index settings, which defaults to
</li><li class="listitem">
The analyzer named <code class="literal">default</code> in the index settings, which defaults to
</li><li class="listitem">
The analyzer named <code class="literal">default_index</code> at node level, which defaults to
</li><li class="listitem">
The analyzer named <code class="literal">default</code> at node level, which defaults to
</li><li class="listitem">
The <code class="literal">standard</code> analyzer
</li></ul></div><p>And at search time:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
The <code class="literal">analyzer</code> defined in the query itself, else
</li><li class="listitem">
The <code class="literal">search_analyzer</code> defined in the field mapping, else
</li><li class="listitem">
The <code class="literal">analyzer</code> defined in the field mapping, else
</li><li class="listitem">
The default <code class="literal">search_analyzer</code> for the <code class="literal">type</code>, which defaults to
</li><li class="listitem">
The default <code class="literal">analyzer</code> for the <code class="literal">type</code>, which defaults to
</li><li class="listitem">
The analyzer named <code class="literal">default_search</code> in the index settings, which defaults to
</li><li class="listitem">
The analyzer named <code class="literal">default</code> in the index settings, which defaults to
</li><li class="listitem">
The analyzer named <code class="literal">default_search</code> at node level, which defaults to
</li><li class="listitem">
The analyzer named <code class="literal">default</code> at node level, which defaults to
</li><li class="listitem">
The <code class="literal">standard</code> analyzer
</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_configuring_analyzers_in_practice"></a>Configuring Analyzers in Practice</h3></div></div></div><p>The sheer number of places where you can specify an analyzer is quite
overwhelming.<a id="id-1.5.4.12.19.2.1" class="indexterm"></a>
<a id="id-1.5.4.12.19.2.2" class="indexterm"></a>
<a id="id-1.5.4.12.19.2.3" class="indexterm"></a><a id="id-1.5.4.12.19.2.4" class="indexterm"></a>
<a id="id-1.5.4.12.19.2.5" class="indexterm"></a>  In practice, though, it is pretty simple.</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_use_index_settings_not_config_files"></a>Use index settings, not config files</h4></div></div></div><p>The first thing to remember is that, even though you may start out using
Elasticsearch for a single purpose or a single application such as logging,
chances are that you will find more use cases and end up running several
distinct applications on the same cluster.  Each index needs to be independent
and independently configurable. You don’t want to set defaults for one use
case, only to have to override them for another use case later.</p><p>This rules out configuring analyzers at the node level.  Additionally,
configuring analyzers at the node level requires changing the config file on every
node and restarting every node, which becomes a maintenance nightmare. It’s a
much better idea to keep Elasticsearch running and to manage settings only via
the API.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_keep_it_simple"></a>Keep it simple</h4></div></div></div><p>Most of the time, you will know what fields your documents will contain ahead
of time.  The simplest approach is to set the analyzer for each full-text
field when you create your index or add type mappings.  While this approach is
slightly more verbose, it enables you to easily see which analyzer is being applied
to each field.</p><p>Typically, most of your string fields will be exact-value <code class="literal">not_analyzed</code>
fields such as tags or enums, plus a handful of full-text fields that will
use some default analyzer like <code class="literal">standard</code> or <code class="literal">english</code> or some other language.
Then you may have one or two fields that need custom analysis: perhaps the
<code class="literal">title</code> field needs to be indexed in a way that supports <span class="emphasis"><em>find-as-you-type</em></span>.</p><p>You can set the <code class="literal">default</code> analyzer in the index to the analyzer you want to
use for almost all full-text fields, and just configure the specialized
analyzer on the one or two fields that need it.  If, in your model, you need
a different default analyzer per type, then use the type level <code class="literal">analyzer</code>
setting instead.</p><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>A common work flow for time based data like logging is to create a new index
per day on the fly by just indexing into it.  While this work flow prevents
you from creating your index up front, you can still use
<a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/indices-templates.html" target="_top">index templates</a>
to specify the settings and mappings that a new index should have.</p></div></div></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="relevance-is-broken"></a>Relevance Is Broken!</h2></div></div></div><p>Before we move on to discussing more-complex queries in
<a class="xref" href="multi-field-search.html" title="Multifield Search"><em>Multifield Search</em></a>, let’s make a quick detour to explain why we
<a class="link" href="full-text-search.html#match-test-data" title="Index Some Data">created our test index</a> with just one primary shard.</p><p>Every now and again a new user opens an issue claiming that sorting by
relevance<a id="id-1.5.4.13.3.1" class="indexterm"></a>
<a id="id-1.5.4.13.3.2" class="indexterm"></a> is broken and offering a short reproduction: the user indexes a few
documents, runs a simple query, and finds apparently less-relevant results
appearing above more-relevant results.</p><p>To understand why this happens, let’s imagine that we create an index with two
primary shards and we index ten documents, six of which contain the word <code class="literal">foo</code>.
It may happen that shard 1 contains three of the <code class="literal">foo</code> documents and shard
2 contains the other three.  In other words, our documents are well distributed.</p><p>In <a class="xref" href="sorting.html#relevance-intro" title="Relevance가 무엇인가?">Relevance가 무엇인가?</a>, we described the default similarity algorithm used in
Elasticsearch, <a id="id-1.5.4.13.5.2" class="indexterm"></a>called <span class="emphasis"><em>term frequency / inverse document frequency</em></span> or TF/IDF.
Term frequency counts the number of times a term appears within the field we are
querying in the current document.  The more times it appears, the more
relevant is this document. The <span class="emphasis"><em>inverse document frequency</em></span> takes<a id="id-1.5.4.13.5.5" class="indexterm"></a><a id="id-1.5.4.13.5.6" class="indexterm"></a> into account
how often a term appears as a percentage of <span class="emphasis"><em>all the documents in the index</em></span>.
The more frequently the term appears, the less weight it has.</p><p>However, for performance reasons, Elasticsearch doesn’t calculate the IDF
across all documents in the index.<a id="id-1.5.4.13.6.1" class="indexterm"></a>
<a id="id-1.5.4.13.6.2" class="indexterm"></a> Instead, each shard calculates a local IDF
for the documents contained <span class="emphasis"><em>in that shard</em></span>.</p><p>Because our documents are well distributed, the IDF for both shards will be
the same.  Now imagine instead that five of the <code class="literal">foo</code> documents are on shard 1,
and the sixth document is on shard 2.  In this scenario, the term <code class="literal">foo</code> is
very common on one shard (and so of little importance), but rare on the other
shard (and so much more important). These differences in IDF can produce
incorrect results.</p><p>In practice, this is not a problem. The differences between local and  global
IDF diminish the more documents that you add to the index. With real-world
volumes of data, the local IDFs soon even out. The problem is not that
relevance is broken but that there is too little data.</p><p>For testing purposes, there are two ways we can work around this issue. The
first is to create an index with one primary shard, as we did in the section
introducing the <a class="link" href="full-text-search.html#match-query" title="The match Query"><code class="literal">match</code> query</a>. If you have only one shard, then
the local IDF <span class="emphasis"><em>is</em></span> the global IDF.</p><p>The second workaround is to add <code class="literal">?search_type=dfs_query_then_fetch</code> to your
search requests. The <code class="literal">dfs</code> stands<a id="id-1.5.4.13.10.3" class="indexterm"></a>
<a id="id-1.5.4.13.10.4" class="indexterm"></a><a id="id-1.5.4.13.10.5" class="indexterm"></a><a id="id-1.5.4.13.10.6" class="indexterm"></a> for <span class="emphasis"><em>Distributed Frequency Search</em></span>, and it
tells Elasticsearch to first retrieve the local IDF from each shard in order
to calculate the global IDF across the whole index.</p><div class="tip admon"><div class="icon"><img alt="Tip" src="images/icons/tip.png" /></div><div class="admon_content"><p>Don’t use <code class="literal">dfs_query_then_fetch</code> in production.  It really isn’t
required. Just having enough data will ensure that your term frequencies are
well distributed. There is no reason to add this extra DFS step to every query
that you run.</p></div></div></div></div><div class="navfooter"><span class="prev"><a href="structured-search.html">
              « 
              Structured Search</a>
           
        </span><span class="next">
           
          <a href="multi-field-search.html">Multifield Search
               »
            </a></span></div>
<!-- end body -->

            </section>

            <div id="rtpcontainer"
        >
	<h3>Top Videos</h3>
	<ul class="lists">
		<li><a href="https://www.elastic.co/webinars/get-started-with-elasticsearch/?baymax=default&elektra=docs&storm=top-video">Getting Started</a></li>
		<li><a href="http://www.elastic.co/webinars/elasticsearch-performance-optimization-tale-two-tickets/?elektra=docs">Scaling</a></li>
		<li><a href="http://www.elastic.co/webinars/shield-securing-your-data-in-elasticsearch/?elektra=docs">Security</a></li>
	</ul>
</div>


	  	




<script src="//app-lon02.marketo.com/js/forms2/js/forms2.min.js"></script>
	<!-- subscribe-newsletter -->
	<div id="subscribe-newsletter">
		<div class="container">
			<div class="row">
				<div class="12u">
					<div class="subscribe-wrapper" id="rtp-newsletter">
						<header>
							<h3>Subscribe to our newsletter</h3>
						</header>
						<div class="subscribe-form">
							<form id="mktoForm_1398" class="container"></form>
							<div class="form_thanks hide">
								
									<p>Thanks for subscribing! We'll keep you updated with new releases.</p>
								
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

  	<!-- Footer -->
	<div id="footer-wrapper">
		<section id="footer" class="container">
			<div class="row">
				<div class="12u">
					<!-- Copyright -->
					<div id="copyright">
	<p>
		© 2016. All Rights Reserved - Elasticsearch
	</p>
	<ul class="links">
		<li>Elasticsearch is a trademark of Elasticsearch BV, registered in the U.S. and in other countries</li>
		<li><a href="/legal/trademarks" id="footer_trademarks">Trademarks</a></li>
		<li><a href="/legal/terms-of-use" id="footer_terms">Terms</a></li>
		<li><a href="/legal/privacy-policy" id="footer_privacy">Privacy</a></li>
	</ul>
	<p>
		Apache, Apache Lucene, Apache Hadoop, Hadoop, HDFS and the yellow elephant logo are trademarks of the <a href="http://www.apache.org/" target="_blank">Apache Software Foundation</a> in the United States and/or other&nbsp;countries.
	</p>
</div><!--<div class="row">
{replace4}
</div>-->
				</div>
			</div>					
		</section>
	</div>
			
	<!-- Social Media -->
	<div id="socialmedia-wrapper">
		<section id="socialmedia" class="container">
			<!-- social icons -->
			<div id="social">
				<ul class="links">
					
						<li class="facebook grayscale"><a href="http://www.facebook.com/elastic.co" target="_blank" id="footer_facebook"></a></li>
					
						<li class="twitter grayscale"><a href="https://www.twitter.com/elastic" target="_blank" id="footer_twitter"></a></li>
					
						<li class="linkedin grayscale"><a href="https://www.linkedin.com/company/elastic-co" target="_blank" id="footer_linkedin"></a></li>
					
						<li class="xing grayscale"><a href="https://www.xing.com/companies/elastic.co" target="_blank" id="footer_xing"></a></li>
					
						<li class="youtube grayscale"><a href="https://www.youtube.com/user/elasticsearch" target="_blank" id="footer_youtube"></a></li>
					
				</ul>
			</div>
		</section>
	</div>


<style type="text/css">
	
		.facebook{background:url("https://static-www.elastic.co/assets/bltda40eebd7c7cae9a/facebook.svg?q=100") no-repeat;}		
	
		.twitter{background:url("https://static-www.elastic.co/assets/bltfd3b1511512f4632/twitter.svg?q=100") no-repeat;}		
	
		.linkedin{background:url("https://static-www.elastic.co/assets/blt6b4f6f8d6b96f814/linkedin.svg?q=100") no-repeat;}		
	
		.xing{background:url("https://static-www.elastic.co/assets/blta76b2ae2b2f10a98/xing.svg?q=100") no-repeat;}		
	
		.youtube{background:url("https://static-www.elastic.co/assets/blt5761648c9581fb53/youtube.svg?q=100") no-repeat;}		
	
</style>

<script>
MktoForms2.loadForm("//app-lon02.marketo.com", "813-MAM-392", 1398,function(form){
	form.onSuccess(function(form){
		$('#mktoForm_1398').css('display','none');
		$('#subscribe-newsletter header').hide();
		$('#mktoForm_1398').siblings('.form_thanks').removeClass('hide')
		dataLayer.push({'event': 'mktoFormSubmit'});
	    return false;
  	});
});
</script>	

  	</div>
  	<!-- <div class="preloader">
    	<div class="status"></div>
	</div> -->
  	<style></style>
   	<script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";	
</script>
<script src="https://static-www.elastic.co/static/js/jquery.autocomplete.js?q=100"></script>
<script src="https://static-www.elastic.co/static/js/script.js?q=100"></script>


   	
   	
   	
   	<script type="application/ld+json">
	
		
	
	{
	  	"@context": "http://schema.org",
	  	"@type": "Organization",
	  	"name" : "Elastic",
	  	"url": "https://www.elastic.co/",
	  	"logo": "https://www.elastic.co/static/img/elastic-logo-200.png",
		"sameAs" : [ "https://www.facebook.com/elastic.co",
			"https://twitter.com/elastic",
			"https://plus.google.com/105178019064686397293",
			"https://www.youtube.com/user/elasticsearch",
			"https://www.linkedin.com/company/elasticsearch"
		],
	  	"potentialAction": {
	    	"@type": "SearchAction",
	    	"target": "https://www.elastic.co/search?q={query_string}",
	    	"query-input": "required name=query_string"
	  	}
	}
</script>	

            <script type="text/javascript" src="docs.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script type='text/javascript' src='https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js'></script>

            </body>
        


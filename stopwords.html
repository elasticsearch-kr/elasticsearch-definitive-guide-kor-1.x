
<!DOCTYPE HTML>
<html lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Stopwords: Performance Versus Precision</title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearch: The Definitive Guide" /><link rel="up" href="languages.html" title="인간의 언어를 다루어보자" /><link rel="prev" href="stemming.html" title="Reducing Words to Their Root Form" /><link rel="next" href="synonyms.html" title="Synonyms" />
  
 	<meta http-equiv="content-type" content="text/html; charset=utf-8" />

 	<!-- RTP tag --> 
	<script type='text/javascript' async>
	(function(c,h,a,f,i,e){c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
	 c[a].a=i;c[a].e=e;var g=h.createElement("script");g.async=true;g.type="text/javascript";
	 g.src=f+'?aid='+i;var b=h.getElementsByTagName("script")[0];b.parentNode.insertBefore(g,b);
	 })(window,document,"rtp","//sjrtp2-cdn.marketo.com/rtp-api/v1/rtp.js","elasticco");
	 
	rtp('send','view');
	rtp('get', 'campaign',true);
	</script>
	<!-- End of RTP tag -->
	
	
 	<link rel="apple-touch-icon" sizes="57x57"  href="https://www.elastic.co/apple-icon-57x57.png?change=123">
<link rel="apple-touch-icon" sizes="60x60"  href="https://www.elastic.co/apple-icon-60x60.png?change=123">
<link rel="apple-touch-icon" sizes="72x72"  href="https://www.elastic.co/apple-icon-72x72.png?change=123">
<link rel="apple-touch-icon" sizes="76x76"  href="https://www.elastic.co/apple-icon-76x76.png?change=123">
<link rel="apple-touch-icon" sizes="114x114"  href="https://www.elastic.co/apple-icon-114x114.png?change=123">
<link rel="apple-touch-icon" sizes="120x120"  href="https://www.elastic.co/apple-icon-120x120.png?change=123">
<link rel="apple-touch-icon" sizes="144x144"  href="https://www.elastic.co/apple-icon-144x144.png?change=123">
<link rel="apple-touch-icon" sizes="152x152"  href="https://www.elastic.co/apple-icon-152x152.png?change=123">
<link rel="apple-touch-icon" sizes="180x180"  href="https://www.elastic.co/apple-icon-180x180.png?change=123">
<link rel="icon" type="image/png" sizes="192x192"   href="https://www.elastic.co/android-icon-192x192.png?change=123">
<link rel="icon" type="image/png" sizes="32x32"  href="https://www.elastic.co/favicon-32x32.png?change=123">
<link rel="icon" type="image/png" sizes="96x96"  href="https://www.elastic.co/favicon-96x96.png?change=123">
<link rel="icon" type="image/png" sizes="16x16"  href="https://www.elastic.co/favicon-16x16.png?change=123">
<link rel="manifest"  href="https://www.elastic.co/manifest.json">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">

<!-- DC tags section -->
<link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" >
<link rel="schema.DCTERMS" href="http://purl.org/dc/terms/" >
<meta name="DC.title" content="Guide template" >

<!-- end DC tags -->

	<meta name="description" content="" />

	<link rel="canonical" href="" />

	<meta property="og:image" content="https://www.elastic.co/static/img/elastic-logo-200.png" />
	


	
	<link type="text/css" rel="stylesheet" href="https://static-www.elastic.co/static/css/skel.css?q=100" />
	<link type="text/css" rel="stylesheet" href="https://static-www.elastic.co/static/css/style.css?q=100" />	
	<script src="https://static-www.elastic.co/static/js/skel.min.js?q=100"></script>
	
		<script type="text/javascript">form_name = "" ; cdn_url="https://static-www.elastic.co";cdn_slug = "100"</script>
	
	<script src="https://static-www.elastic.co/static/js/init.js?q=100"></script>
	<script src="https://static-www.elastic.co/static/js/jquery.min.js?q=100"></script>
	<script src="https://static-www.elastic.co/static/js/jquery.cookie.js?q=100"></script>
	<!--<script type="text/javascript">
	    (function() {
	        var path = '//easy.myfonts.net/v2/js?sid=10336(font-family=Avenir+35+Light)&sid=10338(font-family=Avenir+55+Roman)&sid=10340(font-family=Avenir+85+Heavy)&sid=10344(font-family=Avenir+65+Medium)&key=nAD6PCOPrX',
	            protocol = ('https:' == document.location.protocol ? 'https:' : 'http:'),
	            trial = document.createElement('script');
	        trial.type = 'text/javascript';
	        trial.async = true;
	        trial.src = protocol + path;
	        var head = document.getElementsByTagName("head")[0];
	        head.appendChild(trial);
	    })();
	</script>-->

	
	<link type="text/css" rel="stylesheet"  href="https://www.elastic.co/static/css/prettify.css" />
	<script type="text/javascript"  src="https://www.elastic.co/static/js/prettify.js"></script>



<link rel="stylesheet" type="text/css" href="styles.css" />

</head>
<body >
	<!-- Google Tag Manager -->
	<script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5"
													  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
	<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
			new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
			j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
			'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-58RLH5');</script>
	<!-- End Google Tag Manager -->
	
	<div class="header-cont">
		<div id="header-wrapper">
			


	<script  src="https://www.elastic.co/static/js/jquery.tokeninput.js?change=123"></script>
	<link rel="stylesheet" type="text/css"  href="https://www.elastic.co/static/css/token-input.css">

<div class="shortcuts-wrapper">
	<div class="container">
		<!-- Shortcuts -->
		<nav id="shortcuts">
			<ul class="links">
				
					<li class="shortcut-1">
						<a href="/downloads" id="header_downloads" >
							<span class="txt">downloads</span>	
						</a>
					</li>
				
					<li class="shortcut-2">
						<a href="/guide" id="header_guide" >
							<span class="txt">docs</span>	
						</a>
					</li>
				
					<li class="shortcut-3">
						<a href="/subscriptions" id="header_subscriptions" >
							<span class="txt">support</span>	
						</a>
					</li>
				
					<li class="shortcut-4">
						<a href="https://discuss.elastic.co" id="header_discuss" target="_blank">
							<span class="txt">discuss</span>	
						</a>
					</li>
				
					<li class="shortcut-5">
						<a href="/contact" id="header_contact" >
							<span class="txt">contact</span>	
						</a>
					</li>
				
			</ul>
		</nav>
		<div class="languages-wrapper">
			<div class="global-language">
				<ul class="language">
					<!-- <li class="active-language"><a class="active" href="#">EN</a></li> -->
					
						<li><a href="#">EN</a></li>
					
				</ul>
				<ul class="all-languages">
					
						
						<li><a href="/guide_template">English</a></li>
					
						
						<li><a href="/fr/guide_template">French</a></li>
					
						
						<li><a href="/de/guide_template">German</a></li>
					
						
						<li><a href="/jp/guide_template">Japanese</a></li>
					
						
						<li><a href="/kr/guide_template">Korean</a></li>
					
				</ul>
			</div>
		</div>
	</div>
</div>
<div class="container w100">
	<div class="row 0%">
		<div class="12u">
			

<section class="first-container desktop-main-nav">
	<div class="row 0%">
		<div class="11u 6u(small) 6u(xsmall)">
			<div id="elastic">
				<h1>
					<a href="/">
						<div id="elastic-logo">
						<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 400 130" preserveAspectRatio="xMinYMin meet" enable-background="new 0 0 400 130" xml:space="preserve">
    <g>
    	<g>
    		<path fill="#FFFFFF" d="M122.5,67.8c0-10.3-6.4-19.2-15.9-22.7c0.4-2.2,0.6-4.3,0.6-6.6c0-19.1-15.5-34.6-34.6-34.6
    			c-11.1,0-21.5,5.3-28,14.4c-3.2-2.5-7.1-3.8-11.2-3.8c-10.1,0-18.4,8.2-18.4,18.4c0,2.2,0.4,4.4,1.1,6.4C6.5,42.6,0,51.8,0,62
    			c0,10.3,6.4,19.3,16,22.8c-0.4,2.1-0.6,4.3-0.6,6.6c0,19,15.5,34.5,34.5,34.5c11.2,0,21.5-5.4,28-14.4c3.2,2.5,7.2,3.9,11.3,3.9
    			c10.1,0,18.4-8.2,18.4-18.4c0-2.2-0.4-4.4-1.1-6.4C115.9,87.2,122.5,78,122.5,67.8z"/>
    		<g>
    			<path fill="#F4BD19" d="M47.9,56.3l27.3,12.5l27.6-24.2c0.4-2,0.6-4,0.6-6.1c0-17-13.8-30.8-30.8-30.8c-10.2,0-19.7,5-25.4,13.4
    				l-4.6,23.8L47.9,56.3z"/>
    		</g>
    		<g>
    			<path fill="#3CBEB1" d="M19.6,85.2c-0.4,2-0.6,4.1-0.6,6.2c0,17,13.9,30.9,30.9,30.9c10.3,0,19.8-5.1,25.6-13.5L80,85l-6.1-11.6
    				L46.5,60.9L19.6,85.2z"/>
    		</g>
    		<g>
    			<path fill="#E9478C" d="M19.4,37.9l18.7,4.4L42.3,21c-2.6-2-5.7-3-9-3c-8.1,0-14.8,6.6-14.8,14.8C18.5,34.5,18.8,36.3,19.4,37.9z
    				"/>
    		</g>
    		<g>
    			<path fill="#2C458F" d="M17.8,42.4C9.4,45.1,3.6,53.2,3.6,62c0,8.6,5.3,16.3,13.3,19.3l26.3-23.8l-4.8-10.3L17.8,42.4z"/>
    		</g>
    		<g>
    			<path fill="#95C63D" d="M80.3,108.7c2.6,2,5.7,3.1,8.9,3.1c8.1,0,14.8-6.6,14.8-14.8c0-1.8-0.3-3.5-0.9-5.1l-18.7-4.4L80.3,108.7
    				z"/>
    		</g>
    		<g>
    			<path fill="#176655" d="M84.1,82.6l20.6,4.8c8.4-2.8,14.2-10.8,14.2-19.6c0-8.6-5.3-16.2-13.3-19.3l-27,23.6L84.1,82.6z"/>
    		</g>
    	</g>
    	<path d="M162.8,76.3c0,0.1,0,0.6,0.1,1.4c0.1,0.8,0.3,1.8,0.6,3c0.3,1.1,0.8,2.4,1.4,3.7c0.6,1.3,1.4,2.5,2.5,3.6
    		c1,1.1,2.3,2,3.8,2.7c1.5,0.7,3.4,1.1,5.6,1.1c1.8,0,3.3-0.1,4.6-0.4c1.3-0.3,2.4-0.7,3.4-1.3c1-0.6,1.9-1.3,2.7-2.2
    		c0.8-0.9,1.6-1.9,2.4-3.1c0.5-0.7,1-1.2,1.6-1.5c0.6-0.3,1.2-0.4,1.8-0.4c1,0,2,0.4,2.8,1.1c0.9,0.7,1.3,1.7,1.3,2.8
    		c0,0.7-0.4,1.7-1.1,3.1c-0.7,1.4-1.9,2.8-3.6,4.1c-1.6,1.4-3.7,2.6-6.3,3.6c-2.6,1-5.7,1.5-9.5,1.5c-3.8,0-7.2-0.7-10.2-2.1
    		c-3-1.4-5.5-3.2-7.5-5.6c-2-2.3-3.6-5-4.7-8.1c-1.1-3.1-1.6-6.3-1.6-9.7c0-3.5,0.5-6.8,1.6-9.9c1.1-3.1,2.7-5.8,4.7-8.1
    		c2-2.3,4.5-4.1,7.4-5.5c2.9-1.3,6.1-2,9.6-2c3.3,0,6.3,0.5,9.2,1.5c2.8,1,5.3,2.4,7.4,4.3c2.1,1.9,3.7,4.1,5,6.8
    		c1.2,2.7,1.8,5.8,1.8,9.2c0,2.1-0.5,3.7-1.6,4.8c-1,1.1-2.2,1.6-3.6,1.6H162.8z M170.9,56.4c-1.5,0.6-2.7,1.4-3.7,2.4
    		c-1,0.9-1.8,2-2.4,3.1c-0.6,1.1-1,2.2-1.3,3.2c-0.3,1-0.5,1.8-0.5,2.5c-0.1,0.7-0.1,1.1-0.1,1.2h27.9c0-1.8-0.3-3.5-0.9-5.1
    		c-0.6-1.6-1.5-3-2.6-4.3c-1.2-1.2-2.7-2.2-4.5-3c-1.8-0.7-4-1.1-6.5-1.1C174.2,55.5,172.4,55.8,170.9,56.4z"/>
    	<path d="M214.3,94.6c0,1.3-0.4,2.3-1.3,3.2c-0.9,0.9-1.9,1.3-3.2,1.3c-1.3,0-2.3-0.4-3.2-1.3c-0.9-0.9-1.3-2-1.3-3.2V35.1
    		c0-1.3,0.4-2.3,1.3-3.2c0.9-0.9,2-1.3,3.2-1.3c1.3,0,2.3,0.4,3.2,1.3c0.9,0.9,1.3,1.9,1.3,3.2V94.6z"/>
    	<path d="M229.8,63.5c-0.6,0.3-1.2,0.5-1.9,0.5c-1.2,0-2.2-0.4-3.2-1.1c-1-0.7-1.5-1.8-1.5-3.1c0-0.5,0.1-1.1,0.4-1.9
    		c0.5-1.2,1.2-2.4,2.1-3.6c0.9-1.2,2-2.2,3.5-3.1s3.3-1.7,5.4-2.2c2.2-0.5,4.8-0.8,7.9-0.8c5.9,0,10.5,1.2,14,3.5
    		c3.5,2.3,5.2,5.8,5.2,10.3v32.8c0,1.3-0.4,2.3-1.3,3.2c-0.9,0.9-1.9,1.3-3.2,1.3c-1.3,0-2.3-0.4-3.2-1.3c-0.9-0.9-1.3-2-1.3-3.2v-2
    		c-1.2,2-4.7,4.5-7.5,5.3c-2.8,0.8-5.7,1.2-8.8,1.2c-2,0-3.9-0.3-5.9-0.8c-2-0.5-3.8-1.4-5.3-2.5c-1.6-1.1-2.9-2.6-3.8-4.3
    		c-1-1.7-1.5-3.8-1.5-6.2c0-2.8,0.5-5.7,1.6-7.5c1.1-1.9,2.6-3.4,4.4-4.6c1.8-1.2,3.9-2.1,6.3-2.8c2.4-0.6,4.9-1.1,7.5-1.4
    		c3-0.3,5.4-0.7,7.2-1.2c1.7-0.4,3-0.9,3.9-1.5c0.9-0.6,1.4-1.2,1.6-2c0.2-0.7,0.3-1.6,0.3-2.5c0-1.1-0.3-2-0.9-2.8
    		c-0.6-0.8-1.4-1.5-2.4-2c-1-0.5-2.1-0.9-3.3-1.2s-2.4-0.4-3.5-0.4c-2.1,0-3.7,0.2-5,0.5c-1.3,0.3-2.3,0.8-3.1,1.4
    		c-0.8,0.6-1.5,1.3-1.9,2.1c-0.5,0.8-0.9,1.6-1.3,2.5C230.9,62.6,230.4,63.1,229.8,63.5z M250.6,74.4c-1.1,0.3-2.4,0.6-3.8,0.8
    		c-1.5,0.2-3,0.4-4.6,0.6c-1.6,0.2-3.1,0.5-4.6,0.9c-1.5,0.3-2.8,0.8-4,1.5c-1.2,0.7-2.2,1.5-2.9,2.5c-0.7,1-1.1,3-1.1,4.6
    		c0,1.3,0.3,2.3,0.8,3.1c0.5,0.8,1.2,1.5,2.1,2c0.9,0.5,1.8,0.8,2.9,1c1.1,0.2,2.2,0.3,3.3,0.3c1.7,0,3.3-0.2,5-0.6
    		c1.7-0.4,3.2-1,4.5-1.9s2.4-2,3.3-3.5c0.8-1.4,1.2-3.8,1.2-5.9v-6.1L250.6,74.4z"/>
    	<path d="M307.6,90.9c-1.1,2-2.7,3.6-4.6,4.8s-4.1,2.1-6.6,2.7c-2.5,0.5-5.2,0.8-7.9,0.8c-3.9,0-7.2-0.6-9.9-1.8
    		c-2.7-1.2-4.9-2.6-6.5-4.1c-1.7-1.6-2.9-3.1-3.7-4.7c-0.7-1.6-1.1-2.7-1.1-3.5c0-1.3,0.5-2.4,1.4-3.2c0.9-0.8,2-1.2,3.1-1.2
    		c0.7,0,1.3,0.2,2,0.6c0.6,0.4,1.1,1,1.5,1.9c1,2.5,2.5,4.5,4.7,6.2c2.2,1.7,5.2,2.5,9.3,2.5c1.8,0,3.4-0.2,4.7-0.6
    		c1.3-0.4,2.4-1,3.2-1.7c0.8-0.7,1.4-1.5,1.9-2.4c0.4-0.9,0.6-1.8,0.6-2.8c0-2-0.8-3.4-2.3-4.4c-1.5-1-3.5-1.7-5.8-2.3
    		c-2.3-0.6-4.8-1.1-7.5-1.6c-2.7-0.5-5.2-1.2-7.5-2.2c-2.3-0.9-4.2-2.3-5.8-4c-1.6-1.8-2.3-4.2-2.3-7.3c0-4.5,1.6-8,4.9-10.5
    		c3.3-2.5,7.8-3.8,13.7-3.8c3.3,0,6,0.3,8.3,1c2.2,0.7,4.1,1.6,5.5,2.7c0.6,0.5,1.2,1,1.8,1.7c0.6,0.7,1.2,1.4,1.8,2.2
    		c0.6,0.8,1,1.5,1.4,2.3c0.4,0.7,0.6,1.4,0.6,2c0,1.3-0.5,2.4-1.6,3.1c-1,0.8-2.2,1.2-3.4,1.2c-0.7,0-1.5-0.1-2.1-0.6
    		c-0.6-0.6-1-1.3-1.3-1.8c-0.5-1.1-1.1-2-1.7-2.8c-0.5-0.8-1.2-1.5-2-2c-0.8-0.5-1.8-0.9-3-1.2c-1.2-0.3-2.7-0.4-4.4-0.4
    		c-3.5,0-6,0.6-7.6,1.7c-1.6,1.1-2.4,2.5-2.4,4.2c0,1.3,0.5,2.3,1.4,3.1c0.9,0.8,2.1,1.4,3.7,2c1.5,0.5,3.3,1,5.2,1.4
    		c2,0.4,3.9,0.8,5.9,1.3c2,0.5,4,1.1,5.9,1.7c1.9,0.7,3.7,1.6,5.2,2.7c1.5,1.1,2.7,2.5,3.7,4.1c0.9,1.6,1.4,3.6,1.4,6
    		C309.4,86.4,308.8,88.9,307.6,90.9z"/>
    	<path d="M327.4,48.8h4.7c1.1,0,2,0.4,2.8,1.2c0.8,0.8,1.2,1.7,1.2,2.8c0,1.1-0.4,2.1-1.2,2.8s-1.7,1.1-2.8,1.1h-4.7v37.9
    		c0,1.3-0.4,2.3-1.3,3.2c-0.9,0.9-2,1.3-3.2,1.3c-1.3,0-2.3-0.4-3.2-1.3c-0.9-0.9-1.3-2-1.3-3.2V56.7h-4.6c-1.1,0-2-0.4-2.8-1.1
    		c-0.8-0.7-1.2-1.7-1.2-2.8c0-1.1,0.4-2,1.2-2.8c0.8-0.8,1.7-1.2,2.8-1.2h4.6V39c0-1.3,0.4-2.3,1.3-3.2s1.9-1.3,3.2-1.3
    		c1.3,0,2.3,0.4,3.2,1.3s1.3,1.9,1.3,3.2V48.8z"/>
    	<path d="M341.5,32.1c1-1,2.2-1.5,3.7-1.5c1.4,0,2.6,0.5,3.6,1.5c1,1,1.5,2.2,1.5,3.6c0,1.4-0.5,2.6-1.5,3.6c-1,1-2.2,1.5-3.6,1.5
    		c-1.4,0-2.7-0.5-3.7-1.5c-1-1-1.5-2.2-1.5-3.6C340,34.2,340.5,33,341.5,32.1z M349.6,94.6c0,1.3-0.4,2.3-1.3,3.2
    		c-0.9,0.9-1.9,1.3-3.2,1.3c-1.3,0-2.3-0.4-3.2-1.3c-0.9-0.9-1.3-2-1.3-3.2V53.3c0-1.3,0.4-2.3,1.3-3.2c0.9-0.9,2-1.3,3.2-1.3
    		c1.3,0,2.3,0.4,3.2,1.3c0.9,0.9,1.3,2,1.3,3.2V94.6z"/>
    	<path d="M369.1,97.3c-2.9-1.2-5.4-3-7.5-5.2c-2.1-2.2-3.8-4.9-5-8.1c-1.2-3.1-1.8-6.6-1.8-10.4c0-3.8,0.6-7.3,1.8-10.5
    		c1.2-3.1,2.9-5.8,5-8.1c2.1-2.2,4.6-4,7.5-5.2c2.9-1.2,6-1.9,9.4-1.9c3.4,0,6.4,0.5,9,1.5c2.5,1,4.6,2.2,6.2,3.6
    		c1.6,1.4,3.2,2.9,4,4.4c0.5,0.9,0.9,1.5,0.9,2.6c0,1.3-0.5,2.3-1.4,3.1c-0.9,0.7-2,1.1-3.1,1.1c-0.8,0-1.6-0.2-2.2-0.6
    		c-0.7-0.4-1.2-1.3-1.8-2.1c-1-1.4-0.5-0.6-1.1-1.5c-0.7-0.9-1.5-1.6-2.5-2.3c-1-0.7-2.2-1.2-3.5-1.6c-1.4-0.4-2.8-0.6-4.4-0.6
    		c-1.8,0-3.5,0.3-5.3,1c-1.8,0.7-3.3,1.7-4.7,3.1c-1.4,1.4-2.5,3.3-3.4,5.6s-1.3,5.1-1.3,8.4c0,3.3,0.4,6.1,1.3,8.4s2,4.2,3.4,5.6
    		c1.4,1.4,3,2.5,4.7,3.1c1.8,0.7,3.5,1,5.3,1c1.6,0,3.1-0.2,4.4-0.6c1.3-0.4,2.5-0.9,3.5-1.6c1-0.7,1.8-1.5,2.5-2.3
    		c0.7-0.9,1.1-1.8,1.4-2.7c0.3-1,0.8-1.7,1.5-2.1c0.7-0.4,1.4-0.6,2.2-0.6c1.1,0,2.2,0.4,3.1,1.1c0.9,0.7,1.4,1.7,1.4,3
    		c0,0.6-0.3,1.7-0.9,3.1c-0.6,1.5-1.6,2.9-3.1,4.4c-1.5,1.5-3.5,2.8-6.2,4c-2.6,1.1-6,1.7-10,1.7C375.1,99.2,372,98.5,369.1,97.3z"
    		/>
    </g>
</svg>
						</div>
					</a>
				</h1>
			</div>
			<nav id="nav">
				<ul>
					
					<li>
						
							
						
						<a href="/products" id="nav_products"   >Products</a>
						
						<ul class="dropdown">
							
								<li><a href="/products/elasticsearch" id="nav_elasticsearch" >elasticsearch</a></li>								
							
								<li><a href="/found" id="nav_hosted-elasticsearch" >elasticsearch as a service</a></li>								
							
								<li><a href="/products/logstash" id="nav_logstash" >logstash</a></li>								
							
								<li><a href="/products/kibana" id="nav_kibana" >kibana</a></li>								
							
								<li><a href="/products/beats" id="nav_beats" >beats</a></li>								
							
								<li><a href="/products/watcher" id="nav_watcher" >watcher</a></li>								
							
								<li><a href="/products/shield" id="nav_shield" >shield</a></li>								
							
								<li><a href="/products/marvel" id="nav_marvel" >marvel</a></li>								
							
								<li><a href="/products/hadoop" id="nav_hadoop" >hadoop</a></li>								
							
								<li><a href="/downloads" id="nav_downloads" >downloads</a></li>								
								
						</ul>							
					</li>
					
					<li>
						
							
						
						<a href="/subscriptions" id="nav_subscriptions"   >Subscriptions</a>
						
						<ul class="dropdown">
								
						</ul>							
					</li>
					
					<li>
						
							
						
						<a href="/learn" id="nav_learn"   >Learn</a>
						
						<ul class="dropdown">
							
								<li><a href="/guide" id="nav_guide" >docs</a></li>								
							
								<li><a href="/videos" id="nav_videos" >videos</a></li>								
							
								<li><a href="/training" id="nav_training" >training</a></li>								
							
								<li><a href="/services" id="nav_services" >services</a></li>								
							
								<li><a href="/blog" id="nav_learn_blog" >blog</a></li>								
							
								<li><a href="/elasticon" id="nav_learn_elasticon" >elastic{ON}</a></li>								
								
						</ul>							
					</li>
					
					<li>
						
							
						
						<a href="/community" id="nav_community"   >Community</a>
						
						<ul class="dropdown">
							
								<li><a href="/community/meetups" id="nav_meetups" >meetups</a></li>								
							
								<li><a href="https://discuss.elastic.co" id="nav_discuss" target="_blank">discuss</a></li>								
							
								<li><a href="/community/codeofconduct" id="nav_codeofconduct" >code of conduct</a></li>								
								
						</ul>							
					</li>
					
					<li>
						
							
						
						<a href="/use-cases" id="nav_usecases"   >Use Cases</a>
						
						<ul class="dropdown">
								
						</ul>							
					</li>
					
					<li>
						
							
						
						<a href="/blog" id="nav_blog"   >Blog</a>
						
						<ul class="dropdown">
							
								<li><a href="/blog/category/news" id="blog_news" >News</a></li>								
							
								<li><a href="/blog/category/engineering" id="blog_engineering" >Engineering</a></li>								
							
								<li><a href="/blog/category/user-stories" id="blog_user-stories" >User Stories</a></li>								
							
								<li><a href="/blog/category/releases" id="blog_releases" >Releases</a></li>								
							
								<li><a href="/blog/archive" id="blog_archive" >Archive</a></li>								
								
						</ul>							
					</li>
					
					<li>
						
							
						
						<a href="/about" id="nav_about"   >About</a>
						
						<ul class="dropdown">
							
								<li><a href="/about/leadership" id="nav_leadership" >leadership</a></li>								
							
								<li><a href="/about/board" id="nav_board" >board of directors</a></li>								
							
								<li><a href="/about/careers" id="nav_careers" >careers</a></li>								
							
								<li><a href="/about/partners" id="nav_partners" >partners</a></li>								
							
								<li><a href="/about/press" id="nav_press" >press</a></li>								
								
						</ul>							
					</li>
					
				</ul>
			</nav>			
			<!-- Searchbar Input box -->
			 <!-- <form method="get" action="/search" name="searchForm" class="header-search-form" id="searchMobileFrm">
			   <input type="text" id="search-header-autocomplete" name="q" class="form-control global-input" placeholder="elastic{search}">
			</form>
			<div class="mobile-auto-complete"></div> -->  
		</div>
		<div class="1u 6u(small) 6u(xsmall)">
			<div id="searchbar">
				<a href="#" class="button icon"></a>
			</div>
			<!-- <div class="nav-auto-complete"></div> -->
		</div>
	</div>
</section>
<div class="mobile-menu-wrapper">
	<div class="row 0%">
		<div class="8u 6u(small) 6u(xsmall)">
			<div id="elastic">
				<h1>
					<a href="/">
						<div id="elastic-logo">
						<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 400 130" preserveAspectRatio="xMinYMin meet" enable-background="new 0 0 400 130" xml:space="preserve">
    <g>
    	<g>
    		<path fill="#FFFFFF" d="M122.5,67.8c0-10.3-6.4-19.2-15.9-22.7c0.4-2.2,0.6-4.3,0.6-6.6c0-19.1-15.5-34.6-34.6-34.6
    			c-11.1,0-21.5,5.3-28,14.4c-3.2-2.5-7.1-3.8-11.2-3.8c-10.1,0-18.4,8.2-18.4,18.4c0,2.2,0.4,4.4,1.1,6.4C6.5,42.6,0,51.8,0,62
    			c0,10.3,6.4,19.3,16,22.8c-0.4,2.1-0.6,4.3-0.6,6.6c0,19,15.5,34.5,34.5,34.5c11.2,0,21.5-5.4,28-14.4c3.2,2.5,7.2,3.9,11.3,3.9
    			c10.1,0,18.4-8.2,18.4-18.4c0-2.2-0.4-4.4-1.1-6.4C115.9,87.2,122.5,78,122.5,67.8z"/>
    		<g>
    			<path fill="#F4BD19" d="M47.9,56.3l27.3,12.5l27.6-24.2c0.4-2,0.6-4,0.6-6.1c0-17-13.8-30.8-30.8-30.8c-10.2,0-19.7,5-25.4,13.4
    				l-4.6,23.8L47.9,56.3z"/>
    		</g>
    		<g>
    			<path fill="#3CBEB1" d="M19.6,85.2c-0.4,2-0.6,4.1-0.6,6.2c0,17,13.9,30.9,30.9,30.9c10.3,0,19.8-5.1,25.6-13.5L80,85l-6.1-11.6
    				L46.5,60.9L19.6,85.2z"/>
    		</g>
    		<g>
    			<path fill="#E9478C" d="M19.4,37.9l18.7,4.4L42.3,21c-2.6-2-5.7-3-9-3c-8.1,0-14.8,6.6-14.8,14.8C18.5,34.5,18.8,36.3,19.4,37.9z
    				"/>
    		</g>
    		<g>
    			<path fill="#2C458F" d="M17.8,42.4C9.4,45.1,3.6,53.2,3.6,62c0,8.6,5.3,16.3,13.3,19.3l26.3-23.8l-4.8-10.3L17.8,42.4z"/>
    		</g>
    		<g>
    			<path fill="#95C63D" d="M80.3,108.7c2.6,2,5.7,3.1,8.9,3.1c8.1,0,14.8-6.6,14.8-14.8c0-1.8-0.3-3.5-0.9-5.1l-18.7-4.4L80.3,108.7
    				z"/>
    		</g>
    		<g>
    			<path fill="#176655" d="M84.1,82.6l20.6,4.8c8.4-2.8,14.2-10.8,14.2-19.6c0-8.6-5.3-16.2-13.3-19.3l-27,23.6L84.1,82.6z"/>
    		</g>
    	</g>
    	<path d="M162.8,76.3c0,0.1,0,0.6,0.1,1.4c0.1,0.8,0.3,1.8,0.6,3c0.3,1.1,0.8,2.4,1.4,3.7c0.6,1.3,1.4,2.5,2.5,3.6
    		c1,1.1,2.3,2,3.8,2.7c1.5,0.7,3.4,1.1,5.6,1.1c1.8,0,3.3-0.1,4.6-0.4c1.3-0.3,2.4-0.7,3.4-1.3c1-0.6,1.9-1.3,2.7-2.2
    		c0.8-0.9,1.6-1.9,2.4-3.1c0.5-0.7,1-1.2,1.6-1.5c0.6-0.3,1.2-0.4,1.8-0.4c1,0,2,0.4,2.8,1.1c0.9,0.7,1.3,1.7,1.3,2.8
    		c0,0.7-0.4,1.7-1.1,3.1c-0.7,1.4-1.9,2.8-3.6,4.1c-1.6,1.4-3.7,2.6-6.3,3.6c-2.6,1-5.7,1.5-9.5,1.5c-3.8,0-7.2-0.7-10.2-2.1
    		c-3-1.4-5.5-3.2-7.5-5.6c-2-2.3-3.6-5-4.7-8.1c-1.1-3.1-1.6-6.3-1.6-9.7c0-3.5,0.5-6.8,1.6-9.9c1.1-3.1,2.7-5.8,4.7-8.1
    		c2-2.3,4.5-4.1,7.4-5.5c2.9-1.3,6.1-2,9.6-2c3.3,0,6.3,0.5,9.2,1.5c2.8,1,5.3,2.4,7.4,4.3c2.1,1.9,3.7,4.1,5,6.8
    		c1.2,2.7,1.8,5.8,1.8,9.2c0,2.1-0.5,3.7-1.6,4.8c-1,1.1-2.2,1.6-3.6,1.6H162.8z M170.9,56.4c-1.5,0.6-2.7,1.4-3.7,2.4
    		c-1,0.9-1.8,2-2.4,3.1c-0.6,1.1-1,2.2-1.3,3.2c-0.3,1-0.5,1.8-0.5,2.5c-0.1,0.7-0.1,1.1-0.1,1.2h27.9c0-1.8-0.3-3.5-0.9-5.1
    		c-0.6-1.6-1.5-3-2.6-4.3c-1.2-1.2-2.7-2.2-4.5-3c-1.8-0.7-4-1.1-6.5-1.1C174.2,55.5,172.4,55.8,170.9,56.4z"/>
    	<path d="M214.3,94.6c0,1.3-0.4,2.3-1.3,3.2c-0.9,0.9-1.9,1.3-3.2,1.3c-1.3,0-2.3-0.4-3.2-1.3c-0.9-0.9-1.3-2-1.3-3.2V35.1
    		c0-1.3,0.4-2.3,1.3-3.2c0.9-0.9,2-1.3,3.2-1.3c1.3,0,2.3,0.4,3.2,1.3c0.9,0.9,1.3,1.9,1.3,3.2V94.6z"/>
    	<path d="M229.8,63.5c-0.6,0.3-1.2,0.5-1.9,0.5c-1.2,0-2.2-0.4-3.2-1.1c-1-0.7-1.5-1.8-1.5-3.1c0-0.5,0.1-1.1,0.4-1.9
    		c0.5-1.2,1.2-2.4,2.1-3.6c0.9-1.2,2-2.2,3.5-3.1s3.3-1.7,5.4-2.2c2.2-0.5,4.8-0.8,7.9-0.8c5.9,0,10.5,1.2,14,3.5
    		c3.5,2.3,5.2,5.8,5.2,10.3v32.8c0,1.3-0.4,2.3-1.3,3.2c-0.9,0.9-1.9,1.3-3.2,1.3c-1.3,0-2.3-0.4-3.2-1.3c-0.9-0.9-1.3-2-1.3-3.2v-2
    		c-1.2,2-4.7,4.5-7.5,5.3c-2.8,0.8-5.7,1.2-8.8,1.2c-2,0-3.9-0.3-5.9-0.8c-2-0.5-3.8-1.4-5.3-2.5c-1.6-1.1-2.9-2.6-3.8-4.3
    		c-1-1.7-1.5-3.8-1.5-6.2c0-2.8,0.5-5.7,1.6-7.5c1.1-1.9,2.6-3.4,4.4-4.6c1.8-1.2,3.9-2.1,6.3-2.8c2.4-0.6,4.9-1.1,7.5-1.4
    		c3-0.3,5.4-0.7,7.2-1.2c1.7-0.4,3-0.9,3.9-1.5c0.9-0.6,1.4-1.2,1.6-2c0.2-0.7,0.3-1.6,0.3-2.5c0-1.1-0.3-2-0.9-2.8
    		c-0.6-0.8-1.4-1.5-2.4-2c-1-0.5-2.1-0.9-3.3-1.2s-2.4-0.4-3.5-0.4c-2.1,0-3.7,0.2-5,0.5c-1.3,0.3-2.3,0.8-3.1,1.4
    		c-0.8,0.6-1.5,1.3-1.9,2.1c-0.5,0.8-0.9,1.6-1.3,2.5C230.9,62.6,230.4,63.1,229.8,63.5z M250.6,74.4c-1.1,0.3-2.4,0.6-3.8,0.8
    		c-1.5,0.2-3,0.4-4.6,0.6c-1.6,0.2-3.1,0.5-4.6,0.9c-1.5,0.3-2.8,0.8-4,1.5c-1.2,0.7-2.2,1.5-2.9,2.5c-0.7,1-1.1,3-1.1,4.6
    		c0,1.3,0.3,2.3,0.8,3.1c0.5,0.8,1.2,1.5,2.1,2c0.9,0.5,1.8,0.8,2.9,1c1.1,0.2,2.2,0.3,3.3,0.3c1.7,0,3.3-0.2,5-0.6
    		c1.7-0.4,3.2-1,4.5-1.9s2.4-2,3.3-3.5c0.8-1.4,1.2-3.8,1.2-5.9v-6.1L250.6,74.4z"/>
    	<path d="M307.6,90.9c-1.1,2-2.7,3.6-4.6,4.8s-4.1,2.1-6.6,2.7c-2.5,0.5-5.2,0.8-7.9,0.8c-3.9,0-7.2-0.6-9.9-1.8
    		c-2.7-1.2-4.9-2.6-6.5-4.1c-1.7-1.6-2.9-3.1-3.7-4.7c-0.7-1.6-1.1-2.7-1.1-3.5c0-1.3,0.5-2.4,1.4-3.2c0.9-0.8,2-1.2,3.1-1.2
    		c0.7,0,1.3,0.2,2,0.6c0.6,0.4,1.1,1,1.5,1.9c1,2.5,2.5,4.5,4.7,6.2c2.2,1.7,5.2,2.5,9.3,2.5c1.8,0,3.4-0.2,4.7-0.6
    		c1.3-0.4,2.4-1,3.2-1.7c0.8-0.7,1.4-1.5,1.9-2.4c0.4-0.9,0.6-1.8,0.6-2.8c0-2-0.8-3.4-2.3-4.4c-1.5-1-3.5-1.7-5.8-2.3
    		c-2.3-0.6-4.8-1.1-7.5-1.6c-2.7-0.5-5.2-1.2-7.5-2.2c-2.3-0.9-4.2-2.3-5.8-4c-1.6-1.8-2.3-4.2-2.3-7.3c0-4.5,1.6-8,4.9-10.5
    		c3.3-2.5,7.8-3.8,13.7-3.8c3.3,0,6,0.3,8.3,1c2.2,0.7,4.1,1.6,5.5,2.7c0.6,0.5,1.2,1,1.8,1.7c0.6,0.7,1.2,1.4,1.8,2.2
    		c0.6,0.8,1,1.5,1.4,2.3c0.4,0.7,0.6,1.4,0.6,2c0,1.3-0.5,2.4-1.6,3.1c-1,0.8-2.2,1.2-3.4,1.2c-0.7,0-1.5-0.1-2.1-0.6
    		c-0.6-0.6-1-1.3-1.3-1.8c-0.5-1.1-1.1-2-1.7-2.8c-0.5-0.8-1.2-1.5-2-2c-0.8-0.5-1.8-0.9-3-1.2c-1.2-0.3-2.7-0.4-4.4-0.4
    		c-3.5,0-6,0.6-7.6,1.7c-1.6,1.1-2.4,2.5-2.4,4.2c0,1.3,0.5,2.3,1.4,3.1c0.9,0.8,2.1,1.4,3.7,2c1.5,0.5,3.3,1,5.2,1.4
    		c2,0.4,3.9,0.8,5.9,1.3c2,0.5,4,1.1,5.9,1.7c1.9,0.7,3.7,1.6,5.2,2.7c1.5,1.1,2.7,2.5,3.7,4.1c0.9,1.6,1.4,3.6,1.4,6
    		C309.4,86.4,308.8,88.9,307.6,90.9z"/>
    	<path d="M327.4,48.8h4.7c1.1,0,2,0.4,2.8,1.2c0.8,0.8,1.2,1.7,1.2,2.8c0,1.1-0.4,2.1-1.2,2.8s-1.7,1.1-2.8,1.1h-4.7v37.9
    		c0,1.3-0.4,2.3-1.3,3.2c-0.9,0.9-2,1.3-3.2,1.3c-1.3,0-2.3-0.4-3.2-1.3c-0.9-0.9-1.3-2-1.3-3.2V56.7h-4.6c-1.1,0-2-0.4-2.8-1.1
    		c-0.8-0.7-1.2-1.7-1.2-2.8c0-1.1,0.4-2,1.2-2.8c0.8-0.8,1.7-1.2,2.8-1.2h4.6V39c0-1.3,0.4-2.3,1.3-3.2s1.9-1.3,3.2-1.3
    		c1.3,0,2.3,0.4,3.2,1.3s1.3,1.9,1.3,3.2V48.8z"/>
    	<path d="M341.5,32.1c1-1,2.2-1.5,3.7-1.5c1.4,0,2.6,0.5,3.6,1.5c1,1,1.5,2.2,1.5,3.6c0,1.4-0.5,2.6-1.5,3.6c-1,1-2.2,1.5-3.6,1.5
    		c-1.4,0-2.7-0.5-3.7-1.5c-1-1-1.5-2.2-1.5-3.6C340,34.2,340.5,33,341.5,32.1z M349.6,94.6c0,1.3-0.4,2.3-1.3,3.2
    		c-0.9,0.9-1.9,1.3-3.2,1.3c-1.3,0-2.3-0.4-3.2-1.3c-0.9-0.9-1.3-2-1.3-3.2V53.3c0-1.3,0.4-2.3,1.3-3.2c0.9-0.9,2-1.3,3.2-1.3
    		c1.3,0,2.3,0.4,3.2,1.3c0.9,0.9,1.3,2,1.3,3.2V94.6z"/>
    	<path d="M369.1,97.3c-2.9-1.2-5.4-3-7.5-5.2c-2.1-2.2-3.8-4.9-5-8.1c-1.2-3.1-1.8-6.6-1.8-10.4c0-3.8,0.6-7.3,1.8-10.5
    		c1.2-3.1,2.9-5.8,5-8.1c2.1-2.2,4.6-4,7.5-5.2c2.9-1.2,6-1.9,9.4-1.9c3.4,0,6.4,0.5,9,1.5c2.5,1,4.6,2.2,6.2,3.6
    		c1.6,1.4,3.2,2.9,4,4.4c0.5,0.9,0.9,1.5,0.9,2.6c0,1.3-0.5,2.3-1.4,3.1c-0.9,0.7-2,1.1-3.1,1.1c-0.8,0-1.6-0.2-2.2-0.6
    		c-0.7-0.4-1.2-1.3-1.8-2.1c-1-1.4-0.5-0.6-1.1-1.5c-0.7-0.9-1.5-1.6-2.5-2.3c-1-0.7-2.2-1.2-3.5-1.6c-1.4-0.4-2.8-0.6-4.4-0.6
    		c-1.8,0-3.5,0.3-5.3,1c-1.8,0.7-3.3,1.7-4.7,3.1c-1.4,1.4-2.5,3.3-3.4,5.6s-1.3,5.1-1.3,8.4c0,3.3,0.4,6.1,1.3,8.4s2,4.2,3.4,5.6
    		c1.4,1.4,3,2.5,4.7,3.1c1.8,0.7,3.5,1,5.3,1c1.6,0,3.1-0.2,4.4-0.6c1.3-0.4,2.5-0.9,3.5-1.6c1-0.7,1.8-1.5,2.5-2.3
    		c0.7-0.9,1.1-1.8,1.4-2.7c0.3-1,0.8-1.7,1.5-2.1c0.7-0.4,1.4-0.6,2.2-0.6c1.1,0,2.2,0.4,3.1,1.1c0.9,0.7,1.4,1.7,1.4,3
    		c0,0.6-0.3,1.7-0.9,3.1c-0.6,1.5-1.6,2.9-3.1,4.4c-1.5,1.5-3.5,2.8-6.2,4c-2.6,1.1-6,1.7-10,1.7C375.1,99.2,372,98.5,369.1,97.3z"
    		/>
    </g>
</svg>
						</div>
					</a>
				</h1>
			</div>
		</div>
		<div class="4u 6u(small) 6u(xsmall) text-right">
			<!-- <div class="mobile-menu-wrapper"> -->
				<ul class="m-shortcuts">
					
					<li><a href="#" class="m-search" id="header-search"></a></li>
					
					<li><a href="/guide" class="m-docs" id="mobile-docs"></a></li>
					
					<li><a href="/contact" class="m-contact" id="mobile-contact"></a></li>
					
				</ul>	
				<nav class="nav-menu">
					<div class="menu-button">
						<span></span>
					</div>
					<div class="nav-menu-list-wrap">
						<div class="nav-menu-list">
							
								<h3><a href="/products" id="nav_products" >Products</a></h3>

								
								<ul>
									
									<li><a href="/products/elasticsearch" id="nav_elasticsearch" >elasticsearch</a></li>
									
									<li><a href="/found" id="nav_hosted-elasticsearch" >elasticsearch as a service</a></li>
									
									<li><a href="/products/logstash" id="nav_logstash" >logstash</a></li>
									
									<li><a href="/products/kibana" id="nav_kibana" >kibana</a></li>
									
									<li><a href="/products/beats" id="nav_beats" >beats</a></li>
									
									<li><a href="/products/watcher" id="nav_watcher" >watcher</a></li>
									
									<li><a href="/products/shield" id="nav_shield" >shield</a></li>
									
									<li><a href="/products/marvel" id="nav_marvel" >marvel</a></li>
									
									<li><a href="/products/hadoop" id="nav_hadoop" >hadoop</a></li>
									
									<li><a href="/downloads" id="nav_downloads" >downloads</a></li>
									
								</ul>
								
							
								<h3><a href="/subscriptions" id="nav_subscriptions" >Subscriptions</a></h3>

								
							
								<h3><a href="/learn" id="nav_learn" >Learn</a></h3>

								
								<ul>
									
									<li><a href="/guide" id="nav_guide" >docs</a></li>
									
									<li><a href="/videos" id="nav_videos" >videos</a></li>
									
									<li><a href="/training" id="nav_training" >training</a></li>
									
									<li><a href="/services" id="nav_services" >services</a></li>
									
									<li><a href="/blog" id="nav_learn_blog" >blog</a></li>
									
									<li><a href="/elasticon" id="nav_learn_elasticon" >elastic{ON}</a></li>
									
								</ul>
								
							
								<h3><a href="/community" id="nav_community" >Community</a></h3>

								
								<ul>
									
									<li><a href="/community/meetups" id="nav_meetups" >meetups</a></li>
									
									<li><a href="/https:/discuss.elastic.co" id="nav_discuss" target="_blank">discuss</a></li>
									
									<li><a href="/community/codeofconduct" id="nav_codeofconduct" >code of conduct</a></li>
									
								</ul>
								
							
								<h3><a href="/use-cases" id="nav_usecases" >Use Cases</a></h3>

								
							
								<h3><a href="/blog" id="nav_blog" >Blog</a></h3>

								
								<ul>
									
									<li><a href="/blog/category/news" id="blog_news" >News</a></li>
									
									<li><a href="/blog/category/engineering" id="blog_engineering" >Engineering</a></li>
									
									<li><a href="/blog/category/user-stories" id="blog_user-stories" >User Stories</a></li>
									
									<li><a href="/blog/category/releases" id="blog_releases" >Releases</a></li>
									
									<li><a href="/blog/archive" id="blog_archive" >Archive</a></li>
									
								</ul>
								
							
								<h3><a href="/about" id="nav_about" >About</a></h3>

								
								<ul>
									
									<li><a href="/about/leadership" id="nav_leadership" >leadership</a></li>
									
									<li><a href="/about/board" id="nav_board" >board of directors</a></li>
									
									<li><a href="/about/careers" id="nav_careers" >careers</a></li>
									
									<li><a href="/about/partners" id="nav_partners" >partners</a></li>
									
									<li><a href="/about/press" id="nav_press" >press</a></li>
									
								</ul>
								
							
						</div>
					</div>
				</nav>
			<!-- </div> -->
		</div>
	</div>
</div>
<!-- Mobile Menu -->


		</div>
	</div>
</div>
<div class="header-search-wrapper">	
	<div class="container">
		<div class="big-search">
			<i class="big-search-icon"></i>
			<form method="get" action="/search" autocomplete="on" name="searchForm" id="searchfrm">
				<ul class="tags-wrapper">
					<li class="search-field"><input type="text" class="form-control global-input" id="autocomplete" name="q"></li>
				</ul>
			</form>
			<a href="#" class="header-search-cancel"></a>
		</div>
		<div class="nav-auto-complete"></div>
	</div>
</div>
<style>	
	
	
		.m-shortcuts li a.m-search {
			background: url("https://static-www.elastic.co/assets/blt174b13be89ff803c/m-search-icon.png?q=100") no-repeat scroll center center rgba(0, 0, 0, 0);
			background-size: contain;}
	
		.m-shortcuts li a.m-docs {
			background: url("https://static-www.elastic.co/assets/blt5ba03f594a7d610a/m-guide-icon.png?q=100") no-repeat scroll center center rgba(0, 0, 0, 0);
			background-size: contain;}
	
		.m-shortcuts li a.m-contact {
			background: url("https://static-www.elastic.co/assets/blt38c3e853c4b1174d/m-contact-icon.png?q=100") no-repeat scroll center center rgba(0, 0, 0, 0);
			background-size: contain;}
		
</style>
		</div>
	</div>
  	<div id="content">
  		
  			
            <div id="pageheader">
    <div class="container">
        <header>
            <h1><a href="/learn" title="Learn">Learn</a> |</h1>
            <h2><a href="/guide" title="Docs">Docs</a></h2>
        </header>
    </div>
</div>
<section id="guide">

            <!-- start body -->
<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch: The Definitive Guide</a></span> » <span class="breadcrumb-link"><a href="languages.html">인간의 언어를 다루어보자 </a></span> » <span class="breadcrumb-node">Stopwords: Performance Versus Precision</span></div><div class="navheader"><span class="prev"><a href="stemming.html">
              « 
              Reducing Words to Their Root Form</a>
           
        </span><span class="next">
           
          <a href="synonyms.html">Synonyms
               »
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="stopwords"></a>Stopwords: Performance Versus Precision</h2></div></div></div><p>Back in the early days of information retrieval,<a id="id-1.6.7.2.1" class="indexterm"></a>
<a id="id-1.6.7.2.2" class="indexterm"></a>  disk space and memory were
limited to a tiny fraction of what we are accustomed to today. It was
essential to make your index as small as possible.  Every kilobyte saved meant
a significant improvement in performance. Stemming (see <a class="xref" href="stemming.html" title="Reducing Words to Their Root Form"><em>Reducing Words to Their Root Form</em></a>) was
important, not just for making searches broader and increasing retrieval in
the same way that we use it today, but also as a tool for compressing index
size.</p><p>Another way to reduce index size is simply to <span class="emphasis"><em>index fewer words</em></span>.  For search
purposes, some words are more important than others. A significant reduction
in index size can be achieved by indexing only the more important terms.</p><p>So which terms can be left out? <a id="id-1.6.7.4.1" class="indexterm"></a>
<a id="id-1.6.7.4.2" class="indexterm"></a> We can divide terms roughly into two groups:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
Low-frequency terms
</span></dt><dd>
Words that appear in relatively few documents in the collection.  Because of their
rarity,<a id="id-1.6.7.5.1.2.1.1" class="indexterm"></a>
<a id="id-1.6.7.5.1.2.1.2" class="indexterm"></a> they have a high value, or <span class="emphasis"><em>weight</em></span>.
</dd><dt><span class="term">
High-frequency terms
</span></dt><dd>
Common words that appear in many documents in the index, such as <code class="literal">the</code>, <code class="literal">and</code>, and
<code class="literal">is</code>. These words  have a low weight and contribute little to the relevance
score.
</dd></dl></div><div class="tip admon"><div class="icon"><img alt="Tip" src="images/icons/tip.png" /></div><div class="admon_content"><p>Of course, frequency is really a scale rather than just two points labeled
<span class="emphasis"><em>low</em></span> and <span class="emphasis"><em>high</em></span>. We just draw a line at some arbitrary point and say that any
terms below that line are low frequency and above the line are high frequency.</p></div></div><p>Which terms are low or high frequency depend on the documents themselves.  The
word <code class="literal">and</code> may be a low-frequency term if all the documents are in Chinese.
In a collection of documents about databases, the word <code class="literal">database</code> may be a
high-frequency term with little value as a search term for that particular
collection.</p><p>That said, for any language there are words that occur very
commonly and that seldom add value to a search.<a id="id-1.6.7.8.1" class="indexterm"></a>
<a id="id-1.6.7.8.2" class="indexterm"></a>  The default English
stopwords used in Elasticsearch are as follows:</p><pre class="literallayout">a, an, and, are, as, at, be, but, by, for, if, in, into, is, it,
no, not, of, on, or, such, that, the, their, then, there, these,
they, this, to, was, will, with</pre><p>These <span class="emphasis"><em>stopwords</em></span> can usually be filtered out before indexing with little
negative impact on retrieval. But is it a good idea to do so?</p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="pros-cons-stopwords"></a>Pros and Cons of Stopwords</h2></div></div></div><p>We have more disk space, more RAM, and <a id="id-1.6.7.11.2.1" class="indexterm"></a>
<a id="id-1.6.7.11.2.2" class="indexterm"></a>better compression algorithms than
existed back in the day. Excluding the preceding 33 common words from the index
will save only about 4MB per million documents.  Using stopwords for the sake
of reducing index size is no longer a valid reason. (However, there is one
caveat to this statement, which we discuss in <a class="xref" href="stopwords.html#stopwords-phrases" title="Stopwords and Phrase Queries">Stopwords and Phrase Queries</a>.)</p><p>On top of that, by removing words from the index, we are reducing our ability
to perform certain types of searches.  Filtering out the words listed previously
prevents us from doing the following:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Distinguishing <span class="emphasis"><em>happy</em></span> from <span class="emphasis"><em>not happy</em></span>.
</li><li class="listitem">
Searching for the band The The.
</li><li class="listitem">
Finding Shakespeare’s quotation “To be, or not to be”
</li><li class="listitem">
Using the country code for Norway: <code class="literal">no</code>
</li></ul></div><p>The primary advantage of removing stopwords is performance.  Imagine that we
search an index with one million documents for the word <code class="literal">fox</code>.  Perhaps <code class="literal">fox</code>
appears in only 20 of them, which means that Elastisearch has to calculate the
relevance <code class="literal">_score</code> for 20 documents in order to return the top 10. Now, we
change that to a search for <code class="literal">the OR fox</code>. The word <code class="literal">the</code> probably occurs in
almost all the documents, which means that Elasticsearch has to calculate
the <code class="literal">_score</code> for all one million documents.  This second query simply cannot
perform as well as the first.</p><p>Fortunately, there are techniques that we can use to keep common words
searchable, while still maintaining good performance. First, we’ll start with
how to use stopwords.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="using-stopwords"></a>Using Stopwords</h2></div></div></div><p>The removal of stopwords is <a id="id-1.6.7.12.2.1" class="indexterm"></a>
<a id="id-1.6.7.12.2.2" class="indexterm"></a>handled by the
<a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-stop-tokenfilter.html" target="_top"><code class="literal">stop</code> token filter</a> which can be used
when <a id="id-1.6.7.12.2.4" class="indexterm"></a>creating a <code class="literal">custom</code> analyzer (see <a class="xref" href="stopwords.html#stop-token-filter" title="Using the stop Token Filter">Using the stop Token Filter</a>).
However, some out-of-the-box analyzers<a id="id-1.6.7.12.2.7" class="indexterm"></a>
<a id="id-1.6.7.12.2.8" class="indexterm"></a><a id="id-1.6.7.12.2.9" class="indexterm"></a>
<a id="id-1.6.7.12.2.10" class="indexterm"></a><a id="id-1.6.7.12.2.11" class="indexterm"></a>
<a id="id-1.6.7.12.2.12" class="indexterm"></a><a id="id-1.6.7.12.2.13" class="indexterm"></a>
<a id="id-1.6.7.12.2.14" class="indexterm"></a> come with the <code class="literal">stop</code> filter pre-integrated:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-lang-analyzer.html" target="_top">Language analyzers</a>
</span></dt><dd>
    Each language analyzer defaults to using the appropriate stopwords list
    for that language. For instance, the <code class="literal">english</code> analyzer uses the
    <code class="literal">_english_</code> stopwords list.
</dd><dt><span class="term">
<a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-standard-analyzer.html" target="_top"><code class="literal">standard</code> analyzer</a>
</span></dt><dd>
    Defaults to the empty stopwords list: <code class="literal">_none_</code>, essentially disabling
    stopwords.
</dd><dt><span class="term">
<a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-pattern-analyzer.html" target="_top"><code class="literal">pattern</code> analyzer</a>
</span></dt><dd>
    Defaults to <code class="literal">_none_</code>, like the <code class="literal">standard</code> analyzer.
</dd></dl></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_stopwords_and_the_standard_analyzer"></a>Stopwords and the Standard Analyzer</h3></div></div></div><p>To use custom stopwords in conjunction with <a id="id-1.6.7.12.4.2.1" class="indexterm"></a>
<a id="id-1.6.7.12.4.2.2" class="indexterm"></a><a id="id-1.6.7.12.4.2.3" class="indexterm"></a>
<a id="id-1.6.7.12.4.2.4" class="indexterm"></a>the <code class="literal">standard</code> analyzer, all we
need to do is to create a configured version of the analyzer and pass in the
list of <code class="literal">stopwords</code> that we require:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-json">PUT /my_index
{
  "settings": {
    "analysis": {
      "analyzer": {
        "my_analyzer": { <a id="CO167-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
          "type": "standard", <a id="CO167-2"></a><span><img src="images/icons/callouts/2.png" alt="" /></span>
          "stopwords": [ "and", "the" ] <a id="CO167-3"></a><span><img src="images/icons/callouts/3.png" alt="" /></span>
        }
      }
    }
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO167-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
This is a custom analyzer called <code class="literal">my_analyzer</code>.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO167-2"><span><img src="images/icons/callouts/2.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
This analyzer is the <code class="literal">standard</code> analyzer with some custom configuration.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO167-3"><span><img src="images/icons/callouts/3.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The stopwords to filter out are <code class="literal">and</code> and <code class="literal">the</code>.
</p></td></tr></table></div><div class="tip admon"><div class="icon"><img alt="Tip" src="images/icons/tip.png" /></div><div class="admon_content"><p>This same technique can be used to configure custom stopword lists for
any of the language analyzers.</p></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="maintaining-positions"></a>Maintaining Positions</h3></div></div></div><p>The output from the <code class="literal">analyze</code> API<a id="id-1.6.7.12.5.2.2" class="indexterm"></a>
<a id="id-1.6.7.12.5.2.3" class="indexterm"></a> is quite interesting:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-json">GET /my_index/_analyze?analyzer=my_analyzer
The quick and the dead</pre></div><div class="pre_wrapper"><pre class="programlisting prettyprint lang-json">{
   "tokens": [
      {
         "token":        "quick",
         "start_offset": 4,
         "end_offset":   9,
         "type":         "&lt;ALPHANUM&gt;",
         "position":     2 <a id="CO168-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
      },
      {
         "token":        "dead",
         "start_offset": 18,
         "end_offset":   22,
         "type":         "&lt;ALPHANUM&gt;",
         "position":     5 <a id="CO168-2"></a><span><img src="images/icons/callouts/2.png" alt="" /></span>
      }
   ]
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO168-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> <a href="#CO168-2"><span><img src="images/icons/callouts/2.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
Note the <code class="literal">position</code> of each token.
</p></td></tr></table></div><p>The stopwords have been filtered out, as expected, but the interesting part is
that the <code class="literal">position</code> of the<a id="id-1.6.7.12.5.6.2" class="indexterm"></a>
<a id="id-1.6.7.12.5.6.3" class="indexterm"></a>
<a id="id-1.6.7.12.5.6.4" class="indexterm"></a> two remaining terms is unchanged: <code class="literal">quick</code> is the
second word in the original sentence, and <code class="literal">dead</code> is the fifth. This is
important for phrase queries—if the positions of each term had been
adjusted, a phrase query for <code class="literal">quick dead</code> would have matched the preceding
example incorrectly.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="specifying-stopwords"></a>Specifying Stopwords</h3></div></div></div><p>Stopwords can be passed inline, as we did in <a id="id-1.6.7.12.6.2.1" class="indexterm"></a>
<a id="id-1.6.7.12.6.2.2" class="indexterm"></a>the previous example, by
specifying an array:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-json">"stopwords": [ "and", "the" ]</pre></div><p>The default stopword list for a particular language can be specified using the
<code class="literal">_lang_</code> notation:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-json">"stopwords": "_english_"</pre></div><div class="tip admon"><div class="icon"><img alt="Tip" src="images/icons/tip.png" /></div><div class="admon_content"><p>The predefined language-specific stopword<a id="id-1.6.7.12.6.6.1.1" class="indexterm"></a>
<a id="id-1.6.7.12.6.6.1.2" class="indexterm"></a> lists available in
Elasticsearch can be found in the
<a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-stop-tokenfilter.html" target="_top"><code class="literal">stop</code> token filter</a> documentation.</p></div></div><p>Stopwords can be disabled by <a id="id-1.6.7.12.6.7.1" class="indexterm"></a>
<a id="id-1.6.7.12.6.7.2" class="indexterm"></a>specifying the special list: <code class="literal">_none_</code>.  For
instance, to use the <code class="literal">english</code> analyzer<a id="id-1.6.7.12.6.7.5" class="indexterm"></a>
<a id="id-1.6.7.12.6.7.6" class="indexterm"></a> without stopwords, you can do the
following:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-json">PUT /my_index
{
  "settings": {
    "analysis": {
      "analyzer": {
        "my_english": {
          "type":      "english", <a id="CO169-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
          "stopwords": "_none_" <a id="CO169-2"></a><span><img src="images/icons/callouts/2.png" alt="" /></span>
        }
      }
    }
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO169-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The <code class="literal">my_english</code> analyzer is based on the <code class="literal">english</code> analyzer.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO169-2"><span><img src="images/icons/callouts/2.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
But stopwords are disabled.
</p></td></tr></table></div><p>Finally, stopwords can also be listed in a file with one word per line.  The
file must be present on all nodes in the cluster, and the path can be
specified<a id="id-1.6.7.12.6.10.1" class="indexterm"></a> with the <code class="literal">stopwords_path</code> parameter:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-json">PUT /my_index
{
  "settings": {
    "analysis": {
      "analyzer": {
        "my_english": {
          "type":           "english",
          "stopwords_path": "stopwords/english.txt" <a id="CO170-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
        }
      }
    }
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO170-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The path to the stopwords file, relative to the Elasticsearch <code class="literal">config</code>
    directory
</p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="stop-token-filter"></a>Using the stop Token Filter</h3></div></div></div><p>The <a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-stop-tokenfilter.html" target="_top"><code class="literal">stop</code> token filter</a> can be combined
with a tokenizer<a id="id-1.6.7.12.7.2.2" class="indexterm"></a>
<a id="id-1.6.7.12.7.2.3" class="indexterm"></a><a id="id-1.6.7.12.7.2.4" class="indexterm"></a>
<a id="id-1.6.7.12.7.2.5" class="indexterm"></a> and other token filters when you need to create a <code class="literal">custom</code>
analyzer.  For instance, let’s say that we wanted to <a id="id-1.6.7.12.7.2.7" class="indexterm"></a>
<a id="id-1.6.7.12.7.2.8" class="indexterm"></a><a id="id-1.6.7.12.7.2.9" class="indexterm"></a>create a Spanish analyzer
with the following:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
A custom stopwords list
</li><li class="listitem">
The <code class="literal">light_spanish</code> stemmer
</li><li class="listitem">
The <a class="link" href="token-normalization.html#asciifolding-token-filter" title="You Have an Accent"><code class="literal">asciifolding</code> filter</a> to remove diacritics
</li></ul></div><p>We could set that up as follows:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-json">PUT /my_index
{
  "settings": {
    "analysis": {
      "filter": {
        "spanish_stop": {
          "type":        "stop",
          "stopwords": [ "si", "esta", "el", "la" ]  <a id="CO171-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
        },
        "light_spanish": { <a id="CO171-2"></a><span><img src="images/icons/callouts/2.png" alt="" /></span>
          "type":     "stemmer",
          "language": "light_spanish"
        }
      },
      "analyzer": {
        "my_spanish": {
          "tokenizer": "spanish",
          "filter": [ <a id="CO171-3"></a><span><img src="images/icons/callouts/3.png" alt="" /></span>
            "lowercase",
            "asciifolding",
            "spanish_stop",
            "light_spanish"
          ]
        }
      }
    }
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO171-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The <code class="literal">stop</code> token filter takes the same <code class="literal">stopwords</code> and <code class="literal">stopwords_path</code>
    parameters as the <code class="literal">standard</code> analyzer.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO171-2"><span><img src="images/icons/callouts/2.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
See <a class="xref" href="stemming.html#algorithmic-stemmers" title="Algorithmic Stemmers">Algorithmic Stemmers</a>.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO171-3"><span><img src="images/icons/callouts/3.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The order of token filters is important, as explained next.
</p></td></tr></table></div><p>We have placed the <code class="literal">spanish_stop</code> filter after the <code class="literal">asciifolding</code> filter.<a id="id-1.6.7.12.7.7.3" class="indexterm"></a>
<a id="id-1.6.7.12.7.7.4" class="indexterm"></a> This
means that <code class="literal">esta</code>, <code class="literal">ésta</code>, and <code class="literal">está</code> will first have their diacritics
removed to become just <code class="literal">esta</code>, which will then be removed as a stopword. If,
instead, we wanted to remove <code class="literal">esta</code> and <code class="literal">ésta</code>, but not <code class="literal">está</code>, we
would have to put the <code class="literal">spanish_stop</code> filter <span class="emphasis"><em>before</em></span> the <code class="literal">asciifolding</code>
filter, and specify both words in the stopwords list.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="updating-stopwords"></a>Updating Stopwords</h3></div></div></div><p>A few techniques can be used to update the list of stopwords
used by an analyzer.<a id="id-1.6.7.12.8.2.1" class="indexterm"></a>
<a id="id-1.6.7.12.8.2.2" class="indexterm"></a><a id="id-1.6.7.12.8.2.3" class="indexterm"></a>
<a id="id-1.6.7.12.8.2.4" class="indexterm"></a> Analyzers are instantiated at index creation time, when a
node is restarted, or when a closed index is reopened.</p><p>If you specify stopwords inline with the <code class="literal">stopwords</code> parameter, your
only option is to close the index and update the analyzer configuration with the
<a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/indices-update-settings.html#update-settings-analysis" target="_top">update index settings API</a>, then reopen
the index.</p><p>Updating stopwords is easier if you specify them in a file with the
<code class="literal">stopwords_path</code> parameter.<a id="id-1.6.7.12.8.4.2" class="indexterm"></a>  You can just update the file (on every node in
the cluster) and then force the analyzers to be re-created by either of these actions:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Closing and reopening the index
  (see <a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/indices-open-close.html" target="_top">open/close index</a>), or
</li><li class="listitem">
Restarting each node in the cluster, one by one
</li></ul></div><p>Of course, updating the stopwords list will not change any documents that have
already been indexed. It will apply only to searches and to new or updated
documents.  To apply the changes to existing documents, you will need to
reindex your data. See <a class="xref" href="index-management.html#reindex" title="Reindexing Your Data">Reindexing Your Data</a>.</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="stopwords-performance"></a>Stopwords and Performance</h2></div></div></div><p>The biggest disadvantage of keeping stopwords is that of performance. When
Elasticsearch performs a <a id="id-1.6.7.13.2.1" class="indexterm"></a>
<a id="id-1.6.7.13.2.2" class="indexterm"></a>full-text search, it has to calculate the relevance
<code class="literal">_score</code> on all matching documents in order to return the top 10 matches.</p><p>While most words typically occur in much fewer than 0.1% of all documents, a
few words such as <code class="literal">the</code> may occur in almost all of them.  Imagine you have an
index of one million documents.  A query for <code class="literal">quick brown fox</code> may match  fewer
than 1,000 documents.  But a query for <code class="literal">the quick brown fox</code> has to score and
sort almost all of the one million documents in your index, just in order to
return the top 10!</p><p>The problem is that <code class="literal">the quick brown fox</code> is really a query for <code class="literal">the OR quick
OR brown OR fox</code>—any document that contains nothing more than the almost
meaningless term <code class="literal">the</code> is included in the result set.  What we need is a way of
reducing the number of documents that need to be scored.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="stopwords-and"></a>and Operator</h3></div></div></div><p>The easiest way to reduce the number of documents is simply to use the
<a class="link" href="full-text-search.html#match-improving-precision" title="Improving Precision"><code class="literal">and</code> operator</a> with the <code class="literal">match</code> query, in order
to make all <a id="id-1.6.7.13.5.2.3" class="indexterm"></a>
<a id="id-1.6.7.13.5.2.4" class="indexterm"></a>
<a id="id-1.6.7.13.5.2.5" class="indexterm"></a><a id="id-1.6.7.13.5.2.6" class="indexterm"></a>
<a id="id-1.6.7.13.5.2.7" class="indexterm"></a>words required.</p><p>A <code class="literal">match</code> query like this:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-json">{
    "match": {
        "text": {
            "query":    "the quick brown fox",
            "operator": "and"
        }
    }
}</pre></div><p>is rewritten as a <code class="literal">bool</code> query like this:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-json">{
    "bool": {
        "must": [
            { "term": { "text": "the" }},
            { "term": { "text": "quick" }},
            { "term": { "text": "brown" }},
            { "term": { "text": "fox" }}
        ]
    }
}</pre></div><p>The <code class="literal">bool</code> query is intelligent enough to execute each <code class="literal">term</code> query in the
optimal order—it starts with the least frequent term.  Because all terms
are required, only documents that contain the least frequent term can possibly
match. Using the <code class="literal">and</code> operator greatly speeds up multiterm queries.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_minimum_should_match"></a>minimum_should_match</h3></div></div></div><p>In <a class="xref" href="full-text-search.html#match-precision" title="Controlling Precision">Controlling Precision</a>, we discussed using the <code class="literal">minimum_should_match</code> operator
to trim the long tail of less-relevant results.<a id="id-1.6.7.13.6.2.3" class="indexterm"></a>
<a id="id-1.6.7.13.6.2.4" class="indexterm"></a>
<a id="id-1.6.7.13.6.2.5" class="indexterm"></a><a id="id-1.6.7.13.6.2.6" class="indexterm"></a>  It is useful for this purpose
alone but, as a nice side effect, it offers a similar performance benefit to
the <code class="literal">and</code> operator:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-json">{
    "match": {
        "text": {
            "query": "the quick brown fox",
            "minimum_should_match": "75%"
        }
    }
}</pre></div><p>In this example, at least three out of the four terms must match. This means
that the only docs that need to be considered are those that contain either the least or second least frequent terms.</p><p>This offers a huge performance gain over a simple query with the default <code class="literal">or</code>
operator!  But we can do better yet…</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="common-terms"></a>Divide and Conquer</h2></div></div></div><p>The terms in a query string can be divided into more-important (low-frequency)
and less-important (high-frequency) terms.<a id="id-1.6.7.14.2.1" class="indexterm"></a>
<a id="id-1.6.7.14.2.2" class="indexterm"></a> Documents that match only the less
important terms are probably of very little interest.  Really, we want
documents that match as many of the more important terms as possible.</p><p>The <code class="literal">match</code> query accepts <a id="id-1.6.7.14.3.2" class="indexterm"></a><a id="id-1.6.7.14.3.3" class="indexterm"></a>
<a id="id-1.6.7.14.3.4" class="indexterm"></a>a <code class="literal">cutoff_frequency</code> parameter, which allows it to
divide the terms in the query string into a low-frequency and high-frequency
group.<a id="id-1.6.7.14.3.6" class="indexterm"></a>
<a id="id-1.6.7.14.3.7" class="indexterm"></a> The low-frequency group (more-important terms) form the bulk of the
query, while the high-frequency group (less-important terms) is used only for
scoring, not for matching. By treating these two groups differently, we can
gain a real boost of speed on previously slow queries.</p><div class="sidebar"><div class="titlepage"><div><div><p class="title"><strong>Domain-Specific Stopwords</strong></p></div></div></div><p>One of the benefits of <code class="literal">cutoff_frequency</code> is that you get <span class="emphasis"><em>domain-specific</em></span>
stopwords for free.<a id="id-1.6.7.14.4.2.3" class="indexterm"></a><a id="id-1.6.7.14.4.2.4" class="indexterm"></a>
<a id="id-1.6.7.14.4.2.5" class="indexterm"></a> For instance, a website about movies may use the words
<span class="emphasis"><em>movie</em></span>, <span class="emphasis"><em>color</em></span>, <span class="emphasis"><em>black</em></span>, and <span class="emphasis"><em>white</em></span> so often that they could be
considered almost meaningless.  With the <code class="literal">stop</code> token filter, these domain-specific terms would have to be added to the stopwords list manually. However,
because the <code class="literal">cutoff_frequency</code> looks at the actual frequency of terms in the
index,  these words would be classified as <span class="emphasis"><em>high frequency</em></span> automatically.</p></div><p>Take this query as an example:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-json">{
  "match": {
    "text": {
      "query": "Quick and the dead",
      "cutoff_frequency": 0.01 <a id="CO172-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
    }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO172-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
Any term that occurs in more than 1% of documents is considered to be high
    frequency. The <code class="literal">cutoff_frequency</code> can be specified as a fraction (<code class="literal">0.01</code>)
    or as an absolute number (<code class="literal">5</code>).
</p></td></tr></table></div><p>This query uses the <code class="literal">cutoff_frequency</code> to first divide the query terms into a
low-frequency group (<code class="literal">quick</code>, <code class="literal">dead</code>) and a high-frequency group (<code class="literal">and</code>,
<code class="literal">the</code>). Then, the query is rewritten to produce the following <code class="literal">bool</code> query:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-json">{
  "bool": {
    "must": { <a id="CO173-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
      "bool": {
        "should": [
          { "term": { "text": "quick" }},
          { "term": { "text": "dead"  }}
        ]
      }
    },
    "should": { <a id="CO173-2"></a><span><img src="images/icons/callouts/2.png" alt="" /></span>
      "bool": {
        "should": [
          { "term": { "text": "and" }},
          { "term": { "text": "the" }}
        ]
      }
    }
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO173-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
At least one low-frequency/high-importance term <span class="emphasis"><em>must</em></span> match.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO173-2"><span><img src="images/icons/callouts/2.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
High-frequency/low-importance terms are entirely optional.
</p></td></tr></table></div><p>The <code class="literal">must</code> clause means that at least one of the low-frequency terms—<code class="literal">quick</code> or <code class="literal">dead</code>—_must_ be present for a document to be considered a
match. All other documents are excluded.  The <code class="literal">should</code> clause then looks for
the high-frequency terms <code class="literal">and</code> and <code class="literal">the</code>,  but only in the documents collected
by the <code class="literal">must</code> clause. The sole job of the <code class="literal">should</code> clause is to score a
document like “Quick <span class="emphasis"><em>and the</em></span> dead” higher than “_The_ quick but
dead”.  This approach greatly reduces the number of documents that need to be
examined and scored.</p><div class="tip admon"><div class="icon"><img alt="Tip" src="images/icons/tip.png" /></div><div class="admon_content"><p>Setting the operator parameter to <code class="literal">and</code> would make <span class="emphasis"><em>all</em></span> low-frequency terms
required, and score documents that contain <span class="emphasis"><em>all</em></span> high-frequency terms higher.
However, matching documents would not be required to contain all high-frequency terms.  If you would prefer all low- and high-frequency terms to be
required, you should use a <code class="literal">bool</code> query instead.   As we saw in
<a class="xref" href="stopwords.html#stopwords-and" title="and Operator">and Operator</a>, this is already an efficient query.</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_controlling_precision_2"></a>Controlling Precision</h3></div></div></div><p>The <code class="literal">minimum_should_match</code> parameter can be combined with <code class="literal">cutoff_frequency</code>
but it applies to only the low-frequency terms.<a id="id-1.6.7.14.13.2.3" class="indexterm"></a>
<a id="id-1.6.7.14.13.2.4" class="indexterm"></a>
<a id="id-1.6.7.14.13.2.5" class="indexterm"></a><a id="id-1.6.7.14.13.2.6" class="indexterm"></a>
<a id="id-1.6.7.14.13.2.7" class="indexterm"></a>  This query:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-json">{
  "match": {
    "text": {
      "query": "Quick and the dead",
      "cutoff_frequency": 0.01,
      "minimum_should_match": "75%"
    }
}</pre></div><p>would be rewritten as follows:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-json">{
  "bool": {
    "must": {
      "bool": {
        "should": [
          { "term": { "text": "quick" }},
          { "term": { "text": "dead"  }}
        ],
        "minimum_should_match": 1 <a id="CO174-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
      }
    },
    "should": { <a id="CO174-2"></a><span><img src="images/icons/callouts/2.png" alt="" /></span>
      "bool": {
        "should": [
          { "term": { "text": "and" }},
          { "term": { "text": "the" }}
        ]
      }
    }
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO174-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
Because there are only two terms, the original 75% is rounded down
    to <code class="literal">1</code>, that is: <span class="emphasis"><em>one out of two low-terms must match</em></span>.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO174-2"><span><img src="images/icons/callouts/2.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The high-frequency terms are still optional and used only for scoring.
</p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_only_high_frequency_terms"></a>Only High-Frequency Terms</h3></div></div></div><p>An ‘or` query for high-frequency<a id="id-1.6.7.14.14.2.1" class="indexterm"></a>
<a id="id-1.6.7.14.14.2.2" class="indexterm"></a>
<a id="id-1.6.7.14.14.2.3" class="indexterm"></a> terms only—``To be, or not to be’'—is
the worst case for performance. It is pointless to score <span class="emphasis"><em>all</em></span> the
documents that contain only one of these terms in order to return just the top
10 matches. We are really interested only in documents in which the terms all occur
together, so in the case where there are no low-frequency terms, the query is
rewritten to make all high-frequency terms required:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-json">{
  "bool": {
    "must": [
      { "term": { "text": "to" }},
      { "term": { "text": "be" }},
      { "term": { "text": "or" }},
      { "term": { "text": "not" }},
      { "term": { "text": "to" }},
      { "term": { "text": "be" }}
    ]
  }
}</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_more_control_with_common_terms"></a>More Control with Common Terms</h3></div></div></div><p>While the high/low frequency functionality in the <code class="literal">match</code> query is useful,
sometimes you want more control<a id="id-1.6.7.14.15.2.2" class="indexterm"></a>
<a id="id-1.6.7.14.15.2.3" class="indexterm"></a>
<a id="id-1.6.7.14.15.2.4" class="indexterm"></a> over how the high- and low-frequency groups
should be handled.  The <code class="literal">match</code> query exposes a subset of the
functionality available in the <code class="literal">common</code> terms query.<a id="id-1.6.7.14.15.2.7" class="indexterm"></a></p><p>For instance, we could make all low-frequency terms required, and score only
documents that have 75% of all high-frequency terms with a query like this:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-json">{
  "common": {
    "text": {
      "query":                  "Quick and the dead",
      "cutoff_frequency":       0.01,
      "low_freq_operator":      "and",
      "minimum_should_match": {
        "high_freq":            "75%"
      }
    }
  }
}</pre></div><p>See the <a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-common-terms-query.html" target="_top"><code class="literal">common</code> terms query</a> reference page for more options.</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="stopwords-phrases"></a>Stopwords and Phrase Queries</h2></div></div></div><p>About 5% of all queries are <a id="id-1.6.7.15.2.1" class="indexterm"></a>
<a id="id-1.6.7.15.2.2" class="indexterm"></a><a id="id-1.6.7.15.2.3" class="indexterm"></a>
<a id="id-1.6.7.15.2.4" class="indexterm"></a>phrase queries (see <a class="xref" href="proximity-matching.html#phrase-matching" title="Phrase Matching">Phrase Matching</a>), but they
often account for the majority of slow queries. Phrase queries can perform
poorly, especially if the phrase includes very common words; a phrase like
“To be, or not to be” could be considered pathological. The reason for this
has to do with the amount of data that is necessary to support proximity
matching.</p><p>In <a class="xref" href="stopwords.html#pros-cons-stopwords" title="Pros and Cons of Stopwords">Pros and Cons of Stopwords</a>, we said that removing stopwords saves only a small
amount of space in the inverted index.<a id="id-1.6.7.15.3.2" class="indexterm"></a>
<a id="id-1.6.7.15.3.3" class="indexterm"></a>  That was only partially true.  A
typical index may contain, among other data, some or all of the following:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
Terms dictionary
</span></dt><dd>
    A sorted list of all terms that appear in the documents in the index,
    and a count of the number of documents that contain each term.
</dd><dt><span class="term">
Postings list
</span></dt><dd>
    A list of which documents contain each term.
</dd><dt><span class="term">
Term frequency
</span></dt><dd>
    How often each term appears in each document.
</dd><dt><span class="term">
Positions
</span></dt><dd>
    The position of each term within each document, for phrase and proximity
    queries.
</dd><dt><span class="term">
Offsets
</span></dt><dd>
    The start and end character offsets of each term in each document, for
    snippet highlighting. Disabled by default.
</dd><dt><span class="term">
Norms
</span></dt><dd>
    A factor used to normalize fields of different lengths, to give shorter
    fields more weight.
</dd></dl></div><p>Removing stopwords from the index may save a small amount of space in the
<span class="emphasis"><em>terms dictionary</em></span> and the <span class="emphasis"><em>postings list</em></span>, but <span class="emphasis"><em>positions</em></span> and <span class="emphasis"><em>offsets</em></span> are
another matter. Positions and offsets data can easily double, triple, or
quadruple index size.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_positions_data"></a>Positions Data</h3></div></div></div><p>Positions are enabled on <code class="literal">analyzed</code> string fields by default,<a id="id-1.6.7.15.6.2.2" class="indexterm"></a>
<a id="id-1.6.7.15.6.2.3" class="indexterm"></a>
<a id="id-1.6.7.15.6.2.4" class="indexterm"></a><a id="id-1.6.7.15.6.2.5" class="indexterm"></a>
<a id="id-1.6.7.15.6.2.6" class="indexterm"></a>
<a id="id-1.6.7.15.6.2.7" class="indexterm"></a> so that phrase
queries will work out of the box. The more often that a term appears, the more
space is needed to store its position data. Very common words, by
definition, appear very commonly, and their positions data can run to megabytes
or gigabytes on large collections.</p><p>Running a phrase query on a high-frequency word like <code class="literal">the</code> might result in
gigabytes of data being read from disk. That data will be stored in the kernel
filesystem cache to speed up later access, which seems like a good thing, but
it might cause other data to be evicted from the cache, which will slow
subsequent queries.</p><p>This is clearly a problem that needs solving.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="index-options"></a>Index Options</h3></div></div></div><p>The first question you should <a id="id-1.6.7.15.7.2.1" class="indexterm"></a>
<a id="id-1.6.7.15.7.2.2" class="indexterm"></a>
<a id="id-1.6.7.15.7.2.3" class="indexterm"></a><a id="id-1.6.7.15.7.2.4" class="indexterm"></a>
<a id="id-1.6.7.15.7.2.5" class="indexterm"></a>
<a id="id-1.6.7.15.7.2.6" class="indexterm"></a>ask yourself is: <span class="emphasis"><em>Do you need phrase or
proximity queries?</em></span></p><p>Often, the answer is no.  For many use cases, such as logging, you need to
know <span class="emphasis"><em>whether</em></span> a term appears in a document — information that is provided
by the postings list—but not <span class="emphasis"><em>where</em></span> it appears. Or perhaps you need to use
phrase queries on one or two fields, but you can disable positions data on all
of the other analyzed <code class="literal">string</code> fields.</p><p>The <code class="literal">index_options</code> parameter <a id="id-1.6.7.15.7.4.2" class="indexterm"></a>allows you to control what information is stored
in the index for each field.<a id="id-1.6.7.15.7.4.3" class="indexterm"></a>
<a id="id-1.6.7.15.7.4.4" class="indexterm"></a>  Valid values are as follows:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">docs</code>
</span></dt><dd>
    Only store which documents contain which terms. This is the default for
    <code class="literal">not_analyzed</code> string fields.
</dd><dt><span class="term">
<code class="literal">freqs</code>
</span></dt><dd>
    Store <code class="literal">docs</code> information, plus how often each term appears in each
    document. Term frequencies are needed for complete <a class="link" href="sorting.html#relevance-intro" title="Relevance가 무엇인가?">TF/IDF</a>
    relevance calculations, but they are not required if you just need to know
    whether a document contains a particular term.
</dd><dt><span class="term">
<code class="literal">positions</code>
</span></dt><dd>
    Store <code class="literal">docs</code> and <code class="literal">freqs</code>, plus the position of each term in each document.
    This is the default for <code class="literal">analyzed</code> string fields, but can be disabled if
    phrase/proximity matching is not needed.
</dd><dt><span class="term">
<code class="literal">offsets</code>
</span></dt><dd>
    Store <code class="literal">docs</code>, <code class="literal">freqs</code>, <code class="literal">positions</code>, and the start and end character offsets
    of each term in the original string.  This information is used by the
    <a class="ulink" href="http://www.elastic.co/guide/en/elasticsearch/reference/current/search-request-highlighting.html#postings-highlighter" target="_top"><code class="literal">postings</code> highlighter</a>
    but is disabled by default.
</dd></dl></div><p>You can set <code class="literal">index_options</code> on fields added at index creation time, or when
adding new fields by using<a id="id-1.6.7.15.7.6.2" class="indexterm"></a> the <code class="literal">put-mapping</code> API. This setting can’t be changed
on existing fields:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-json">PUT /my_index
{
  "mappings": {
    "my_type": {
      "properties": {
        "title": { <a id="CO175-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
          "type":          "string"
       },
        "content": { <a id="CO175-2"></a><span><img src="images/icons/callouts/2.png" alt="" /></span>
          "type":          "string",
          "index_options": "freqs"
      }
    }
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO175-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The <code class="literal">title</code> field uses the default setting of <code class="literal">positions</code>, so
    it is suitable for phrase/proximity queries.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO175-2"><span><img src="images/icons/callouts/2.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The <code class="literal">content</code> field has positions disabled and so cannot be used
    for phrase/proximity queries.
</p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_stopwords"></a>Stopwords</h3></div></div></div><p>Removing stopwords is one way of reducing the size of the positions data quite
dramatically.<a id="id-1.6.7.15.8.2.1" class="indexterm"></a>
<a id="id-1.6.7.15.8.2.2" class="indexterm"></a>
<a id="id-1.6.7.15.8.2.3" class="indexterm"></a>   An index with stopwords removed can still be used for phrase
queries because the original positions of the remaining terms are maintained,
as we saw in <a class="xref" href="stopwords.html#maintaining-positions" title="Maintaining Positions">Maintaining Positions</a>. But of course, excluding terms from
the index reduces searchability. We wouldn’t be able to differentiate between
the two phrases <span class="emphasis"><em>Man in the moon</em></span> and <span class="emphasis"><em>Man on the moon</em></span>.</p><p>Fortunately, there is a way to have our cake and eat it: the
<a class="link" href="stopwords.html#common-grams" title="common_grams Token Filter"><code class="literal">common_grams</code> token filter</a>.</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="common-grams"></a>common_grams Token Filter</h2></div></div></div><p>The <code class="literal">common_grams</code> token filter is designed to make phrase queries with
stopwords more efficient. <a id="id-1.6.7.16.2.2" class="indexterm"></a>
<a id="id-1.6.7.16.2.3" class="indexterm"></a>
<a id="id-1.6.7.16.2.4" class="indexterm"></a><a id="id-1.6.7.16.2.5" class="indexterm"></a><a id="id-1.6.7.16.2.6" class="indexterm"></a>
<a id="id-1.6.7.16.2.7" class="indexterm"></a>
<a id="id-1.6.7.16.2.8" class="indexterm"></a>It is similar to the <code class="literal">shingles</code> token <a id="id-1.6.7.16.2.10" class="indexterm"></a>
<a id="id-1.6.7.16.2.11" class="indexterm"></a>filter (see
<a class="xref" href="proximity-matching.html#shingles" title="Finding Associated Words">Finding Associated Words</a>), which creates <span class="emphasis"><em>bigrams</em></span> out of every pair of adjacent words. It
is most easily explained by example.<a id="id-1.6.7.16.2.14" class="indexterm"></a></p><p>The <code class="literal">common_grams</code> token filter produces different output depending on whether
<code class="literal">query_mode</code> is set to <code class="literal">false</code> (for indexing) or to <code class="literal">true</code> (for searching), so
we have to create two separate analyzers:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-json">PUT /my_index
{
  "settings": {
    "analysis": {
      "filter": {
        "index_filter": { <a id="CO176-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
          "type":         "common_grams",
          "common_words": "_english_" <a id="CO176-2"></a><span><img src="images/icons/callouts/2.png" alt="" /></span>
        },
        "search_filter": { <a id="CO176-3"></a><span><img src="images/icons/callouts/3.png" alt="" /></span>
          "type":         "common_grams",
          "common_words": "_english_", <a id="CO176-4"></a><span><img src="images/icons/callouts/4.png" alt="" /></span>
          "query_mode":   true
        }
      },
      "analyzer": {
        "index_grams": { <a id="CO176-5"></a><span><img src="images/icons/callouts/5.png" alt="" /></span>
          "tokenizer":  "standard",
          "filter":   [ "lowercase", "index_filter" ]
        },
        "search_grams": { <a id="CO176-6"></a><span><img src="images/icons/callouts/6.png" alt="" /></span>
          "tokenizer": "standard",
          "filter":  [ "lowercase", "search_filter" ]
        }
      }
    }
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO176-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> <a href="#CO176-3"><span><img src="images/icons/callouts/3.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
First we create two token filters based on the <code class="literal">common_grams</code> token
    filter: <code class="literal">index_filter</code> for index time (with <code class="literal">query_mode</code> set to the
    default <code class="literal">false</code>), and <code class="literal">search_filter</code> for query time (with <code class="literal">query_mode</code>
    set to <code class="literal">true</code>).
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO176-2"><span><img src="images/icons/callouts/2.png" alt="" /></span></a> <a href="#CO176-4"><span><img src="images/icons/callouts/4.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The <code class="literal">common_words</code> parameter accepts the same options as the <code class="literal">stopwords</code>
    parameter (see <a class="xref" href="stopwords.html#specifying-stopwords" title="Specifying Stopwords">Specifying Stopwords</a>).  The filter also
    accepts a <code class="literal">common_words_path</code> parameter, which allows you to maintain the
    common words list in a file.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO176-5"><span><img src="images/icons/callouts/5.png" alt="" /></span></a> <a href="#CO176-6"><span><img src="images/icons/callouts/6.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
Then we use each filter to create an analyzer for index time and another
    for query time.
</p></td></tr></table></div><p>With our custom analyzers in place, we can create a field that will use the
<code class="literal">index_grams</code> analyzer at index time:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-json">PUT /my_index/_mapping/my_type
{
  "properties": {
    "text": {
      "type":            "string",
      "index_analyzer":  "index_grams", <a id="CO177-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
      "search_analyzer": "standard" <a id="CO177-2"></a><span><img src="images/icons/callouts/2.png" alt="" /></span>
    }
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO177-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> <a href="#CO177-2"><span><img src="images/icons/callouts/2.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The <code class="literal">text</code> field uses the <code class="literal">index_grams</code> analyzer at index time, but
    defaults to using the <code class="literal">standard</code> analyzer at search time, for reasons we
    will explain next.
</p></td></tr></table></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_at_index_time_2"></a>At Index Time</h3></div></div></div><p>If we were to <a id="id-1.6.7.16.9.2.1" class="indexterm"></a>
<a id="id-1.6.7.16.9.2.2" class="indexterm"></a>analyze the phrase <span class="emphasis"><em>The quick and brown fox</em></span> with shingles, it
would produce these terms:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-text">Pos 1: the_quick
Pos 2: quick_and
Pos 3: and_brown
Pos 4: brown_fox</pre></div><p>Our new <code class="literal">index_grams</code> analyzer produces the following terms instead:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-text">Pos 1: the, the_quick
Pos 2: quick, quick_and
Pos 3: and, and_brown
Pos 4: brown
Pos 5: fox</pre></div><p>All terms are output as unigrams—<code class="literal">the</code>, <code class="literal">quick</code>, and so forth—but if a word is a
common word or is followed by a common word, then it also outputs a bigram in
the same position as the unigram—<code class="literal">the_quick</code>, <code class="literal">quick_and</code>, <code class="literal">and_brown</code>.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_unigram_queries"></a>Unigram Queries</h3></div></div></div><p>Because the index contains unigrams,<a id="id-1.6.7.16.10.2.1" class="indexterm"></a>
<a id="id-1.6.7.16.10.2.2" class="indexterm"></a><a id="id-1.6.7.16.10.2.3" class="indexterm"></a>
<a id="id-1.6.7.16.10.2.4" class="indexterm"></a> the field can be queried using the same
techniques that we have used for any other field, for example:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-json">GET /my_index/_search
{
  "query": {
    "match": {
      "text": {
        "query": "the quick and brown fox",
        "cutoff_frequency": 0.01
      }
    }
  }
}</pre></div><p>The preceding query string is analyzed by the <code class="literal">search_analyzer</code> configured for the
<code class="literal">text</code> field—the <code class="literal">standard</code> analyzer in this example—to produce the
terms  <code class="literal">the</code>, <code class="literal">quick</code>, <code class="literal">and</code>, <code class="literal">brown</code>, <code class="literal">fox</code>.</p><p>Because the index for the <code class="literal">text</code> field contains the same unigrams as produced
by the <code class="literal">standard</code> analyzer, search functions as it would for any normal
field.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_bigram_phrase_queries"></a>Bigram Phrase Queries</h3></div></div></div><p>However, when we come to do phrase queries,<a id="id-1.6.7.16.11.2.1" class="indexterm"></a>
<a id="id-1.6.7.16.11.2.2" class="indexterm"></a><a id="id-1.6.7.16.11.2.3" class="indexterm"></a>
<a id="id-1.6.7.16.11.2.4" class="indexterm"></a> we can use the specialized
<code class="literal">search_grams</code> analyzer to make the process much more efficient:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-json">GET /my_index/_search
{
  "query": {
    "match_phrase": {
      "text": {
        "query":    "The quick and brown fox",
        "analyzer": "search_grams" <a id="CO178-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
      }
    }
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO178-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
For phrase queries, we override the default <code class="literal">search_analyzer</code> and use the
    <code class="literal">search_grams</code> analyzer instead.
</p></td></tr></table></div><p>The <code class="literal">search_grams</code> analyzer would produce the following terms:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-text">Pos 1: the_quick
Pos 2: quick_and
Pos 3: and_brown
Pos 4: brown
Pos 5: fox</pre></div><p>The analyzer has stripped out all of the common word unigrams, leaving the common word
bigrams and the low-frequency unigrams.  Bigrams like <code class="literal">the_quick</code> are much
less common than the single term <code class="literal">the</code>.  This has two advantages:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
The positions data for <code class="literal">the_quick</code> is much smaller than for <code class="literal">the</code>, so it is
  faster to read from disk and has less of an impact on the filesystem cache.
</li><li class="listitem">
The term <code class="literal">the_quick</code> is much less common than <code class="literal">the</code>, so it drastically
  decreases the number of documents that have to be examined.
</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_two_word_phrases"></a>Two-Word Phrases</h3></div></div></div><p>There is one further optimization. <a id="id-1.6.7.16.12.2.1" class="indexterm"></a>
<a id="id-1.6.7.16.12.2.2" class="indexterm"></a> By far the majority of phrase queries
consist of only two words.  If one of those words happens to be a common word,
such as</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-json">GET /my_index/_search
{
  "query": {
    "match_phrase": {
      "text": {
        "query":    "The quick",
        "analyzer": "search_grams"
      }
    }
  }
}</pre></div><p>then the <code class="literal">search_grams</code> analyzer outputs a single token: <code class="literal">the_quick</code>.  This
transforms what originally could have been an expensive phrase query for <code class="literal">the</code>
and <code class="literal">quick</code> into a very efficient single-term lookup.</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="stopwords-relavance"></a>Stopwords and Relevance</h2></div></div></div><p>The last topic to cover before moving on from stopwords<a id="id-1.6.7.17.2.1" class="indexterm"></a>
<a id="id-1.6.7.17.2.2" class="indexterm"></a><a id="id-1.6.7.17.2.3" class="indexterm"></a>
<a id="id-1.6.7.17.2.4" class="indexterm"></a> is that of relevance.
Leaving stopwords in your index could make the relevance calculation
less accurate, especially if your documents are very long.</p><p>As we have already discussed in <a class="xref" href="controlling-relevance.html#bm25-saturation" title="Term-frequency saturation">Term-frequency saturation</a>, the<a id="id-1.6.7.17.3.2" class="indexterm"></a>
<a id="id-1.6.7.17.3.3" class="indexterm"></a> reason for this is
that <a class="link" href="controlling-relevance.html#tfidf" title="Term Frequency/Inverse Document Frequency (TF/IDF)">term-frequency/inverse document frequency</a> doesn’t impose an
upper limit on the impact of term frequency.<a id="id-1.6.7.17.3.5" class="indexterm"></a>
<a id="id-1.6.7.17.3.6" class="indexterm"></a>  Very common words may have a low
weight because of inverse document frequency but, in long documents, the sheer
number of occurrences of stopwords in a single document may lead to their
weight being artificially boosted.</p><p>You may want to consider using the <a class="link" href="controlling-relevance.html#bm25" title="Okapi BM25">Okapi BM25</a> similarity on long
fields that include stopwords instead of the default Lucene similarity.</p></div></div><div class="navfooter"><span class="prev"><a href="stemming.html">
              « 
              Reducing Words to Their Root Form</a>
           
        </span><span class="next">
           
          <a href="synonyms.html">Synonyms
               »
            </a></span></div>
<!-- end body -->

            </section>

            <div id="rtpcontainer"
        >
	<h3>Top Videos</h3>
	<ul class="lists">
		<li><a href="https://www.elastic.co/webinars/get-started-with-elasticsearch/?baymax=default&elektra=docs&storm=top-video">Getting Started</a></li>
		<li><a href="http://www.elastic.co/webinars/elasticsearch-performance-optimization-tale-two-tickets/?elektra=docs">Scaling</a></li>
		<li><a href="http://www.elastic.co/webinars/shield-securing-your-data-in-elasticsearch/?elektra=docs">Security</a></li>
	</ul>
</div>


	  	




<script src="//app-lon02.marketo.com/js/forms2/js/forms2.min.js"></script>
	<!-- subscribe-newsletter -->
	<div id="subscribe-newsletter">
		<div class="container">
			<div class="row">
				<div class="12u">
					<div class="subscribe-wrapper" id="rtp-newsletter">
						<header>
							<h3>Subscribe to our newsletter</h3>
						</header>
						<div class="subscribe-form">
							<form id="mktoForm_1398" class="container"></form>
							<div class="form_thanks hide">
								
									<p>Thanks for subscribing! We'll keep you updated with new releases.</p>
								
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

  	<!-- Footer -->
	<div id="footer-wrapper">
		<section id="footer" class="container">
			<div class="row">
				<div class="12u">
					<!-- Copyright -->
					<div id="copyright">
	<p>
		© 2016. All Rights Reserved - Elasticsearch
	</p>
	<ul class="links">
		<li>Elasticsearch is a trademark of Elasticsearch BV, registered in the U.S. and in other countries</li>
		<li><a href="/legal/trademarks" id="footer_trademarks">Trademarks</a></li>
		<li><a href="/legal/terms-of-use" id="footer_terms">Terms</a></li>
		<li><a href="/legal/privacy-policy" id="footer_privacy">Privacy</a></li>
	</ul>
	<p>
		Apache, Apache Lucene, Apache Hadoop, Hadoop, HDFS and the yellow elephant logo are trademarks of the <a href="http://www.apache.org/" target="_blank">Apache Software Foundation</a> in the United States and/or other&nbsp;countries.
	</p>
</div><!--<div class="row">
{replace4}
</div>-->
				</div>
			</div>					
		</section>
	</div>
			
	<!-- Social Media -->
	<div id="socialmedia-wrapper">
		<section id="socialmedia" class="container">
			<!-- social icons -->
			<div id="social">
				<ul class="links">
					
						<li class="facebook grayscale"><a href="http://www.facebook.com/elastic.co" target="_blank" id="footer_facebook"></a></li>
					
						<li class="twitter grayscale"><a href="https://www.twitter.com/elastic" target="_blank" id="footer_twitter"></a></li>
					
						<li class="linkedin grayscale"><a href="https://www.linkedin.com/company/elastic-co" target="_blank" id="footer_linkedin"></a></li>
					
						<li class="xing grayscale"><a href="https://www.xing.com/companies/elastic.co" target="_blank" id="footer_xing"></a></li>
					
						<li class="youtube grayscale"><a href="https://www.youtube.com/user/elasticsearch" target="_blank" id="footer_youtube"></a></li>
					
				</ul>
			</div>
		</section>
	</div>


<style type="text/css">
	
		.facebook{background:url("https://static-www.elastic.co/assets/bltda40eebd7c7cae9a/facebook.svg?q=100") no-repeat;}		
	
		.twitter{background:url("https://static-www.elastic.co/assets/bltfd3b1511512f4632/twitter.svg?q=100") no-repeat;}		
	
		.linkedin{background:url("https://static-www.elastic.co/assets/blt6b4f6f8d6b96f814/linkedin.svg?q=100") no-repeat;}		
	
		.xing{background:url("https://static-www.elastic.co/assets/blta76b2ae2b2f10a98/xing.svg?q=100") no-repeat;}		
	
		.youtube{background:url("https://static-www.elastic.co/assets/blt5761648c9581fb53/youtube.svg?q=100") no-repeat;}		
	
</style>

<script>
MktoForms2.loadForm("//app-lon02.marketo.com", "813-MAM-392", 1398,function(form){
	form.onSuccess(function(form){
		$('#mktoForm_1398').css('display','none');
		$('#subscribe-newsletter header').hide();
		$('#mktoForm_1398').siblings('.form_thanks').removeClass('hide')
		dataLayer.push({'event': 'mktoFormSubmit'});
	    return false;
  	});
});
</script>	

  	</div>
  	<!-- <div class="preloader">
    	<div class="status"></div>
	</div> -->
  	<style></style>
   	<script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";	
</script>
<script src="https://static-www.elastic.co/static/js/jquery.autocomplete.js?q=100"></script>
<script src="https://static-www.elastic.co/static/js/script.js?q=100"></script>


   	
   	
   	
   	<script type="application/ld+json">
	
		
	
	{
	  	"@context": "http://schema.org",
	  	"@type": "Organization",
	  	"name" : "Elastic",
	  	"url": "https://www.elastic.co/",
	  	"logo": "https://www.elastic.co/static/img/elastic-logo-200.png",
		"sameAs" : [ "https://www.facebook.com/elastic.co",
			"https://twitter.com/elastic",
			"https://plus.google.com/105178019064686397293",
			"https://www.youtube.com/user/elasticsearch",
			"https://www.linkedin.com/company/elasticsearch"
		],
	  	"potentialAction": {
	    	"@type": "SearchAction",
	    	"target": "https://www.elastic.co/search?q={query_string}",
	    	"query-input": "required name=query_string"
	  	}
	}
</script>	

            <script type="text/javascript" src="docs.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script type='text/javascript' src='https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js'></script>

            </body>
        


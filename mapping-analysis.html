
<!DOCTYPE HTML>
<html lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Mapping and Analysis</title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearch: The Definitive Guide" /><link rel="up" href="getting-started.html" title="Getting Started" /><link rel="prev" href="search.html" title="Searching—The Basic Tools" /><link rel="next" href="full-body-search.html" title="Full-Body Search" />
  
 	<meta http-equiv="content-type" content="text/html; charset=utf-8" />

 	<!-- RTP tag --> 
	<script type='text/javascript' async>
	(function(c,h,a,f,i,e){c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
	 c[a].a=i;c[a].e=e;var g=h.createElement("script");g.async=true;g.type="text/javascript";
	 g.src=f+'?aid='+i;var b=h.getElementsByTagName("script")[0];b.parentNode.insertBefore(g,b);
	 })(window,document,"rtp","//sjrtp2-cdn.marketo.com/rtp-api/v1/rtp.js","elasticco");
	 
	rtp('send','view');
	rtp('get', 'campaign',true);
	</script>
	<!-- End of RTP tag -->
	
	
 	<link rel="apple-touch-icon" sizes="57x57"  href="https://www.elastic.co/apple-icon-57x57.png?change=123">
<link rel="apple-touch-icon" sizes="60x60"  href="https://www.elastic.co/apple-icon-60x60.png?change=123">
<link rel="apple-touch-icon" sizes="72x72"  href="https://www.elastic.co/apple-icon-72x72.png?change=123">
<link rel="apple-touch-icon" sizes="76x76"  href="https://www.elastic.co/apple-icon-76x76.png?change=123">
<link rel="apple-touch-icon" sizes="114x114"  href="https://www.elastic.co/apple-icon-114x114.png?change=123">
<link rel="apple-touch-icon" sizes="120x120"  href="https://www.elastic.co/apple-icon-120x120.png?change=123">
<link rel="apple-touch-icon" sizes="144x144"  href="https://www.elastic.co/apple-icon-144x144.png?change=123">
<link rel="apple-touch-icon" sizes="152x152"  href="https://www.elastic.co/apple-icon-152x152.png?change=123">
<link rel="apple-touch-icon" sizes="180x180"  href="https://www.elastic.co/apple-icon-180x180.png?change=123">
<link rel="icon" type="image/png" sizes="192x192"   href="https://www.elastic.co/android-icon-192x192.png?change=123">
<link rel="icon" type="image/png" sizes="32x32"  href="https://www.elastic.co/favicon-32x32.png?change=123">
<link rel="icon" type="image/png" sizes="96x96"  href="https://www.elastic.co/favicon-96x96.png?change=123">
<link rel="icon" type="image/png" sizes="16x16"  href="https://www.elastic.co/favicon-16x16.png?change=123">
<link rel="manifest"  href="https://www.elastic.co/manifest.json">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">

<!-- DC tags section -->
<link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" >
<link rel="schema.DCTERMS" href="http://purl.org/dc/terms/" >
<meta name="DC.title" content="Guide template" >

<!-- end DC tags -->

	<meta name="description" content="" />

	<link rel="canonical" href="" />

	<meta property="og:image" content="https://www.elastic.co/static/img/elastic-logo-200.png" />
	


	
	<link type="text/css" rel="stylesheet" href="https://static-www.elastic.co/static/css/skel.css?q=100" />
	<link type="text/css" rel="stylesheet" href="https://static-www.elastic.co/static/css/style.css?q=100" />	
	<script src="https://static-www.elastic.co/static/js/skel.min.js?q=100"></script>
	
		<script type="text/javascript">form_name = "" ; cdn_url="https://static-www.elastic.co";cdn_slug = "100"</script>
	
	<script src="https://static-www.elastic.co/static/js/init.js?q=100"></script>
	<script src="https://static-www.elastic.co/static/js/jquery.min.js?q=100"></script>
	<script src="https://static-www.elastic.co/static/js/jquery.cookie.js?q=100"></script>
	<!--<script type="text/javascript">
	    (function() {
	        var path = '//easy.myfonts.net/v2/js?sid=10336(font-family=Avenir+35+Light)&sid=10338(font-family=Avenir+55+Roman)&sid=10340(font-family=Avenir+85+Heavy)&sid=10344(font-family=Avenir+65+Medium)&key=nAD6PCOPrX',
	            protocol = ('https:' == document.location.protocol ? 'https:' : 'http:'),
	            trial = document.createElement('script');
	        trial.type = 'text/javascript';
	        trial.async = true;
	        trial.src = protocol + path;
	        var head = document.getElementsByTagName("head")[0];
	        head.appendChild(trial);
	    })();
	</script>-->

	
	<link type="text/css" rel="stylesheet"  href="https://www.elastic.co/static/css/prettify.css" />
	<script type="text/javascript"  src="https://www.elastic.co/static/js/prettify.js"></script>



<link rel="stylesheet" type="text/css" href="styles.css" />

</head>
<body >
	<!-- Google Tag Manager -->
	<script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5"
													  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
	<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
			new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
			j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
			'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-58RLH5');</script>
	<!-- End Google Tag Manager -->
	
	<div class="header-cont">
		<div id="header-wrapper">
			


	<script  src="https://www.elastic.co/static/js/jquery.tokeninput.js?change=123"></script>
	<link rel="stylesheet" type="text/css"  href="https://www.elastic.co/static/css/token-input.css">

<div class="shortcuts-wrapper">
	<div class="container">
		<!-- Shortcuts -->
		<nav id="shortcuts">
			<ul class="links">
				
					<li class="shortcut-1">
						<a href="/downloads" id="header_downloads" >
							<span class="txt">downloads</span>	
						</a>
					</li>
				
					<li class="shortcut-2">
						<a href="/guide" id="header_guide" >
							<span class="txt">docs</span>	
						</a>
					</li>
				
					<li class="shortcut-3">
						<a href="/subscriptions" id="header_subscriptions" >
							<span class="txt">support</span>	
						</a>
					</li>
				
					<li class="shortcut-4">
						<a href="https://discuss.elastic.co" id="header_discuss" target="_blank">
							<span class="txt">discuss</span>	
						</a>
					</li>
				
					<li class="shortcut-5">
						<a href="/contact" id="header_contact" >
							<span class="txt">contact</span>	
						</a>
					</li>
				
			</ul>
		</nav>
		<div class="languages-wrapper">
			<div class="global-language">
				<ul class="language">
					<!-- <li class="active-language"><a class="active" href="#">EN</a></li> -->
					
						<li><a href="#">EN</a></li>
					
				</ul>
				<ul class="all-languages">
					
						
						<li><a href="/guide_template">English</a></li>
					
						
						<li><a href="/fr/guide_template">French</a></li>
					
						
						<li><a href="/de/guide_template">German</a></li>
					
						
						<li><a href="/jp/guide_template">Japanese</a></li>
					
						
						<li><a href="/kr/guide_template">Korean</a></li>
					
				</ul>
			</div>
		</div>
	</div>
</div>
<div class="container w100">
	<div class="row 0%">
		<div class="12u">
			

<section class="first-container desktop-main-nav">
	<div class="row 0%">
		<div class="11u 6u(small) 6u(xsmall)">
			<div id="elastic">
				<h1>
					<a href="/">
						<div id="elastic-logo">
						<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 400 130" preserveAspectRatio="xMinYMin meet" enable-background="new 0 0 400 130" xml:space="preserve">
    <g>
    	<g>
    		<path fill="#FFFFFF" d="M122.5,67.8c0-10.3-6.4-19.2-15.9-22.7c0.4-2.2,0.6-4.3,0.6-6.6c0-19.1-15.5-34.6-34.6-34.6
    			c-11.1,0-21.5,5.3-28,14.4c-3.2-2.5-7.1-3.8-11.2-3.8c-10.1,0-18.4,8.2-18.4,18.4c0,2.2,0.4,4.4,1.1,6.4C6.5,42.6,0,51.8,0,62
    			c0,10.3,6.4,19.3,16,22.8c-0.4,2.1-0.6,4.3-0.6,6.6c0,19,15.5,34.5,34.5,34.5c11.2,0,21.5-5.4,28-14.4c3.2,2.5,7.2,3.9,11.3,3.9
    			c10.1,0,18.4-8.2,18.4-18.4c0-2.2-0.4-4.4-1.1-6.4C115.9,87.2,122.5,78,122.5,67.8z"/>
    		<g>
    			<path fill="#F4BD19" d="M47.9,56.3l27.3,12.5l27.6-24.2c0.4-2,0.6-4,0.6-6.1c0-17-13.8-30.8-30.8-30.8c-10.2,0-19.7,5-25.4,13.4
    				l-4.6,23.8L47.9,56.3z"/>
    		</g>
    		<g>
    			<path fill="#3CBEB1" d="M19.6,85.2c-0.4,2-0.6,4.1-0.6,6.2c0,17,13.9,30.9,30.9,30.9c10.3,0,19.8-5.1,25.6-13.5L80,85l-6.1-11.6
    				L46.5,60.9L19.6,85.2z"/>
    		</g>
    		<g>
    			<path fill="#E9478C" d="M19.4,37.9l18.7,4.4L42.3,21c-2.6-2-5.7-3-9-3c-8.1,0-14.8,6.6-14.8,14.8C18.5,34.5,18.8,36.3,19.4,37.9z
    				"/>
    		</g>
    		<g>
    			<path fill="#2C458F" d="M17.8,42.4C9.4,45.1,3.6,53.2,3.6,62c0,8.6,5.3,16.3,13.3,19.3l26.3-23.8l-4.8-10.3L17.8,42.4z"/>
    		</g>
    		<g>
    			<path fill="#95C63D" d="M80.3,108.7c2.6,2,5.7,3.1,8.9,3.1c8.1,0,14.8-6.6,14.8-14.8c0-1.8-0.3-3.5-0.9-5.1l-18.7-4.4L80.3,108.7
    				z"/>
    		</g>
    		<g>
    			<path fill="#176655" d="M84.1,82.6l20.6,4.8c8.4-2.8,14.2-10.8,14.2-19.6c0-8.6-5.3-16.2-13.3-19.3l-27,23.6L84.1,82.6z"/>
    		</g>
    	</g>
    	<path d="M162.8,76.3c0,0.1,0,0.6,0.1,1.4c0.1,0.8,0.3,1.8,0.6,3c0.3,1.1,0.8,2.4,1.4,3.7c0.6,1.3,1.4,2.5,2.5,3.6
    		c1,1.1,2.3,2,3.8,2.7c1.5,0.7,3.4,1.1,5.6,1.1c1.8,0,3.3-0.1,4.6-0.4c1.3-0.3,2.4-0.7,3.4-1.3c1-0.6,1.9-1.3,2.7-2.2
    		c0.8-0.9,1.6-1.9,2.4-3.1c0.5-0.7,1-1.2,1.6-1.5c0.6-0.3,1.2-0.4,1.8-0.4c1,0,2,0.4,2.8,1.1c0.9,0.7,1.3,1.7,1.3,2.8
    		c0,0.7-0.4,1.7-1.1,3.1c-0.7,1.4-1.9,2.8-3.6,4.1c-1.6,1.4-3.7,2.6-6.3,3.6c-2.6,1-5.7,1.5-9.5,1.5c-3.8,0-7.2-0.7-10.2-2.1
    		c-3-1.4-5.5-3.2-7.5-5.6c-2-2.3-3.6-5-4.7-8.1c-1.1-3.1-1.6-6.3-1.6-9.7c0-3.5,0.5-6.8,1.6-9.9c1.1-3.1,2.7-5.8,4.7-8.1
    		c2-2.3,4.5-4.1,7.4-5.5c2.9-1.3,6.1-2,9.6-2c3.3,0,6.3,0.5,9.2,1.5c2.8,1,5.3,2.4,7.4,4.3c2.1,1.9,3.7,4.1,5,6.8
    		c1.2,2.7,1.8,5.8,1.8,9.2c0,2.1-0.5,3.7-1.6,4.8c-1,1.1-2.2,1.6-3.6,1.6H162.8z M170.9,56.4c-1.5,0.6-2.7,1.4-3.7,2.4
    		c-1,0.9-1.8,2-2.4,3.1c-0.6,1.1-1,2.2-1.3,3.2c-0.3,1-0.5,1.8-0.5,2.5c-0.1,0.7-0.1,1.1-0.1,1.2h27.9c0-1.8-0.3-3.5-0.9-5.1
    		c-0.6-1.6-1.5-3-2.6-4.3c-1.2-1.2-2.7-2.2-4.5-3c-1.8-0.7-4-1.1-6.5-1.1C174.2,55.5,172.4,55.8,170.9,56.4z"/>
    	<path d="M214.3,94.6c0,1.3-0.4,2.3-1.3,3.2c-0.9,0.9-1.9,1.3-3.2,1.3c-1.3,0-2.3-0.4-3.2-1.3c-0.9-0.9-1.3-2-1.3-3.2V35.1
    		c0-1.3,0.4-2.3,1.3-3.2c0.9-0.9,2-1.3,3.2-1.3c1.3,0,2.3,0.4,3.2,1.3c0.9,0.9,1.3,1.9,1.3,3.2V94.6z"/>
    	<path d="M229.8,63.5c-0.6,0.3-1.2,0.5-1.9,0.5c-1.2,0-2.2-0.4-3.2-1.1c-1-0.7-1.5-1.8-1.5-3.1c0-0.5,0.1-1.1,0.4-1.9
    		c0.5-1.2,1.2-2.4,2.1-3.6c0.9-1.2,2-2.2,3.5-3.1s3.3-1.7,5.4-2.2c2.2-0.5,4.8-0.8,7.9-0.8c5.9,0,10.5,1.2,14,3.5
    		c3.5,2.3,5.2,5.8,5.2,10.3v32.8c0,1.3-0.4,2.3-1.3,3.2c-0.9,0.9-1.9,1.3-3.2,1.3c-1.3,0-2.3-0.4-3.2-1.3c-0.9-0.9-1.3-2-1.3-3.2v-2
    		c-1.2,2-4.7,4.5-7.5,5.3c-2.8,0.8-5.7,1.2-8.8,1.2c-2,0-3.9-0.3-5.9-0.8c-2-0.5-3.8-1.4-5.3-2.5c-1.6-1.1-2.9-2.6-3.8-4.3
    		c-1-1.7-1.5-3.8-1.5-6.2c0-2.8,0.5-5.7,1.6-7.5c1.1-1.9,2.6-3.4,4.4-4.6c1.8-1.2,3.9-2.1,6.3-2.8c2.4-0.6,4.9-1.1,7.5-1.4
    		c3-0.3,5.4-0.7,7.2-1.2c1.7-0.4,3-0.9,3.9-1.5c0.9-0.6,1.4-1.2,1.6-2c0.2-0.7,0.3-1.6,0.3-2.5c0-1.1-0.3-2-0.9-2.8
    		c-0.6-0.8-1.4-1.5-2.4-2c-1-0.5-2.1-0.9-3.3-1.2s-2.4-0.4-3.5-0.4c-2.1,0-3.7,0.2-5,0.5c-1.3,0.3-2.3,0.8-3.1,1.4
    		c-0.8,0.6-1.5,1.3-1.9,2.1c-0.5,0.8-0.9,1.6-1.3,2.5C230.9,62.6,230.4,63.1,229.8,63.5z M250.6,74.4c-1.1,0.3-2.4,0.6-3.8,0.8
    		c-1.5,0.2-3,0.4-4.6,0.6c-1.6,0.2-3.1,0.5-4.6,0.9c-1.5,0.3-2.8,0.8-4,1.5c-1.2,0.7-2.2,1.5-2.9,2.5c-0.7,1-1.1,3-1.1,4.6
    		c0,1.3,0.3,2.3,0.8,3.1c0.5,0.8,1.2,1.5,2.1,2c0.9,0.5,1.8,0.8,2.9,1c1.1,0.2,2.2,0.3,3.3,0.3c1.7,0,3.3-0.2,5-0.6
    		c1.7-0.4,3.2-1,4.5-1.9s2.4-2,3.3-3.5c0.8-1.4,1.2-3.8,1.2-5.9v-6.1L250.6,74.4z"/>
    	<path d="M307.6,90.9c-1.1,2-2.7,3.6-4.6,4.8s-4.1,2.1-6.6,2.7c-2.5,0.5-5.2,0.8-7.9,0.8c-3.9,0-7.2-0.6-9.9-1.8
    		c-2.7-1.2-4.9-2.6-6.5-4.1c-1.7-1.6-2.9-3.1-3.7-4.7c-0.7-1.6-1.1-2.7-1.1-3.5c0-1.3,0.5-2.4,1.4-3.2c0.9-0.8,2-1.2,3.1-1.2
    		c0.7,0,1.3,0.2,2,0.6c0.6,0.4,1.1,1,1.5,1.9c1,2.5,2.5,4.5,4.7,6.2c2.2,1.7,5.2,2.5,9.3,2.5c1.8,0,3.4-0.2,4.7-0.6
    		c1.3-0.4,2.4-1,3.2-1.7c0.8-0.7,1.4-1.5,1.9-2.4c0.4-0.9,0.6-1.8,0.6-2.8c0-2-0.8-3.4-2.3-4.4c-1.5-1-3.5-1.7-5.8-2.3
    		c-2.3-0.6-4.8-1.1-7.5-1.6c-2.7-0.5-5.2-1.2-7.5-2.2c-2.3-0.9-4.2-2.3-5.8-4c-1.6-1.8-2.3-4.2-2.3-7.3c0-4.5,1.6-8,4.9-10.5
    		c3.3-2.5,7.8-3.8,13.7-3.8c3.3,0,6,0.3,8.3,1c2.2,0.7,4.1,1.6,5.5,2.7c0.6,0.5,1.2,1,1.8,1.7c0.6,0.7,1.2,1.4,1.8,2.2
    		c0.6,0.8,1,1.5,1.4,2.3c0.4,0.7,0.6,1.4,0.6,2c0,1.3-0.5,2.4-1.6,3.1c-1,0.8-2.2,1.2-3.4,1.2c-0.7,0-1.5-0.1-2.1-0.6
    		c-0.6-0.6-1-1.3-1.3-1.8c-0.5-1.1-1.1-2-1.7-2.8c-0.5-0.8-1.2-1.5-2-2c-0.8-0.5-1.8-0.9-3-1.2c-1.2-0.3-2.7-0.4-4.4-0.4
    		c-3.5,0-6,0.6-7.6,1.7c-1.6,1.1-2.4,2.5-2.4,4.2c0,1.3,0.5,2.3,1.4,3.1c0.9,0.8,2.1,1.4,3.7,2c1.5,0.5,3.3,1,5.2,1.4
    		c2,0.4,3.9,0.8,5.9,1.3c2,0.5,4,1.1,5.9,1.7c1.9,0.7,3.7,1.6,5.2,2.7c1.5,1.1,2.7,2.5,3.7,4.1c0.9,1.6,1.4,3.6,1.4,6
    		C309.4,86.4,308.8,88.9,307.6,90.9z"/>
    	<path d="M327.4,48.8h4.7c1.1,0,2,0.4,2.8,1.2c0.8,0.8,1.2,1.7,1.2,2.8c0,1.1-0.4,2.1-1.2,2.8s-1.7,1.1-2.8,1.1h-4.7v37.9
    		c0,1.3-0.4,2.3-1.3,3.2c-0.9,0.9-2,1.3-3.2,1.3c-1.3,0-2.3-0.4-3.2-1.3c-0.9-0.9-1.3-2-1.3-3.2V56.7h-4.6c-1.1,0-2-0.4-2.8-1.1
    		c-0.8-0.7-1.2-1.7-1.2-2.8c0-1.1,0.4-2,1.2-2.8c0.8-0.8,1.7-1.2,2.8-1.2h4.6V39c0-1.3,0.4-2.3,1.3-3.2s1.9-1.3,3.2-1.3
    		c1.3,0,2.3,0.4,3.2,1.3s1.3,1.9,1.3,3.2V48.8z"/>
    	<path d="M341.5,32.1c1-1,2.2-1.5,3.7-1.5c1.4,0,2.6,0.5,3.6,1.5c1,1,1.5,2.2,1.5,3.6c0,1.4-0.5,2.6-1.5,3.6c-1,1-2.2,1.5-3.6,1.5
    		c-1.4,0-2.7-0.5-3.7-1.5c-1-1-1.5-2.2-1.5-3.6C340,34.2,340.5,33,341.5,32.1z M349.6,94.6c0,1.3-0.4,2.3-1.3,3.2
    		c-0.9,0.9-1.9,1.3-3.2,1.3c-1.3,0-2.3-0.4-3.2-1.3c-0.9-0.9-1.3-2-1.3-3.2V53.3c0-1.3,0.4-2.3,1.3-3.2c0.9-0.9,2-1.3,3.2-1.3
    		c1.3,0,2.3,0.4,3.2,1.3c0.9,0.9,1.3,2,1.3,3.2V94.6z"/>
    	<path d="M369.1,97.3c-2.9-1.2-5.4-3-7.5-5.2c-2.1-2.2-3.8-4.9-5-8.1c-1.2-3.1-1.8-6.6-1.8-10.4c0-3.8,0.6-7.3,1.8-10.5
    		c1.2-3.1,2.9-5.8,5-8.1c2.1-2.2,4.6-4,7.5-5.2c2.9-1.2,6-1.9,9.4-1.9c3.4,0,6.4,0.5,9,1.5c2.5,1,4.6,2.2,6.2,3.6
    		c1.6,1.4,3.2,2.9,4,4.4c0.5,0.9,0.9,1.5,0.9,2.6c0,1.3-0.5,2.3-1.4,3.1c-0.9,0.7-2,1.1-3.1,1.1c-0.8,0-1.6-0.2-2.2-0.6
    		c-0.7-0.4-1.2-1.3-1.8-2.1c-1-1.4-0.5-0.6-1.1-1.5c-0.7-0.9-1.5-1.6-2.5-2.3c-1-0.7-2.2-1.2-3.5-1.6c-1.4-0.4-2.8-0.6-4.4-0.6
    		c-1.8,0-3.5,0.3-5.3,1c-1.8,0.7-3.3,1.7-4.7,3.1c-1.4,1.4-2.5,3.3-3.4,5.6s-1.3,5.1-1.3,8.4c0,3.3,0.4,6.1,1.3,8.4s2,4.2,3.4,5.6
    		c1.4,1.4,3,2.5,4.7,3.1c1.8,0.7,3.5,1,5.3,1c1.6,0,3.1-0.2,4.4-0.6c1.3-0.4,2.5-0.9,3.5-1.6c1-0.7,1.8-1.5,2.5-2.3
    		c0.7-0.9,1.1-1.8,1.4-2.7c0.3-1,0.8-1.7,1.5-2.1c0.7-0.4,1.4-0.6,2.2-0.6c1.1,0,2.2,0.4,3.1,1.1c0.9,0.7,1.4,1.7,1.4,3
    		c0,0.6-0.3,1.7-0.9,3.1c-0.6,1.5-1.6,2.9-3.1,4.4c-1.5,1.5-3.5,2.8-6.2,4c-2.6,1.1-6,1.7-10,1.7C375.1,99.2,372,98.5,369.1,97.3z"
    		/>
    </g>
</svg>
						</div>
					</a>
				</h1>
			</div>
			<nav id="nav">
				<ul>
					
					<li>
						
							
						
						<a href="/products" id="nav_products"   >Products</a>
						
						<ul class="dropdown">
							
								<li><a href="/products/elasticsearch" id="nav_elasticsearch" >elasticsearch</a></li>								
							
								<li><a href="/found" id="nav_hosted-elasticsearch" >elasticsearch as a service</a></li>								
							
								<li><a href="/products/logstash" id="nav_logstash" >logstash</a></li>								
							
								<li><a href="/products/kibana" id="nav_kibana" >kibana</a></li>								
							
								<li><a href="/products/beats" id="nav_beats" >beats</a></li>								
							
								<li><a href="/products/watcher" id="nav_watcher" >watcher</a></li>								
							
								<li><a href="/products/shield" id="nav_shield" >shield</a></li>								
							
								<li><a href="/products/marvel" id="nav_marvel" >marvel</a></li>								
							
								<li><a href="/products/hadoop" id="nav_hadoop" >hadoop</a></li>								
							
								<li><a href="/downloads" id="nav_downloads" >downloads</a></li>								
								
						</ul>							
					</li>
					
					<li>
						
							
						
						<a href="/subscriptions" id="nav_subscriptions"   >Subscriptions</a>
						
						<ul class="dropdown">
								
						</ul>							
					</li>
					
					<li>
						
							
						
						<a href="/learn" id="nav_learn"   >Learn</a>
						
						<ul class="dropdown">
							
								<li><a href="/guide" id="nav_guide" >docs</a></li>								
							
								<li><a href="/videos" id="nav_videos" >videos</a></li>								
							
								<li><a href="/training" id="nav_training" >training</a></li>								
							
								<li><a href="/services" id="nav_services" >services</a></li>								
							
								<li><a href="/blog" id="nav_learn_blog" >blog</a></li>								
							
								<li><a href="/elasticon" id="nav_learn_elasticon" >elastic{ON}</a></li>								
								
						</ul>							
					</li>
					
					<li>
						
							
						
						<a href="/community" id="nav_community"   >Community</a>
						
						<ul class="dropdown">
							
								<li><a href="/community/meetups" id="nav_meetups" >meetups</a></li>								
							
								<li><a href="https://discuss.elastic.co" id="nav_discuss" target="_blank">discuss</a></li>								
							
								<li><a href="/community/codeofconduct" id="nav_codeofconduct" >code of conduct</a></li>								
								
						</ul>							
					</li>
					
					<li>
						
							
						
						<a href="/use-cases" id="nav_usecases"   >Use Cases</a>
						
						<ul class="dropdown">
								
						</ul>							
					</li>
					
					<li>
						
							
						
						<a href="/blog" id="nav_blog"   >Blog</a>
						
						<ul class="dropdown">
							
								<li><a href="/blog/category/news" id="blog_news" >News</a></li>								
							
								<li><a href="/blog/category/engineering" id="blog_engineering" >Engineering</a></li>								
							
								<li><a href="/blog/category/user-stories" id="blog_user-stories" >User Stories</a></li>								
							
								<li><a href="/blog/category/releases" id="blog_releases" >Releases</a></li>								
							
								<li><a href="/blog/archive" id="blog_archive" >Archive</a></li>								
								
						</ul>							
					</li>
					
					<li>
						
							
						
						<a href="/about" id="nav_about"   >About</a>
						
						<ul class="dropdown">
							
								<li><a href="/about/leadership" id="nav_leadership" >leadership</a></li>								
							
								<li><a href="/about/board" id="nav_board" >board of directors</a></li>								
							
								<li><a href="/about/careers" id="nav_careers" >careers</a></li>								
							
								<li><a href="/about/partners" id="nav_partners" >partners</a></li>								
							
								<li><a href="/about/press" id="nav_press" >press</a></li>								
								
						</ul>							
					</li>
					
				</ul>
			</nav>			
			<!-- Searchbar Input box -->
			 <!-- <form method="get" action="/search" name="searchForm" class="header-search-form" id="searchMobileFrm">
			   <input type="text" id="search-header-autocomplete" name="q" class="form-control global-input" placeholder="elastic{search}">
			</form>
			<div class="mobile-auto-complete"></div> -->  
		</div>
		<div class="1u 6u(small) 6u(xsmall)">
			<div id="searchbar">
				<a href="#" class="button icon"></a>
			</div>
			<!-- <div class="nav-auto-complete"></div> -->
		</div>
	</div>
</section>
<div class="mobile-menu-wrapper">
	<div class="row 0%">
		<div class="8u 6u(small) 6u(xsmall)">
			<div id="elastic">
				<h1>
					<a href="/">
						<div id="elastic-logo">
						<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 400 130" preserveAspectRatio="xMinYMin meet" enable-background="new 0 0 400 130" xml:space="preserve">
    <g>
    	<g>
    		<path fill="#FFFFFF" d="M122.5,67.8c0-10.3-6.4-19.2-15.9-22.7c0.4-2.2,0.6-4.3,0.6-6.6c0-19.1-15.5-34.6-34.6-34.6
    			c-11.1,0-21.5,5.3-28,14.4c-3.2-2.5-7.1-3.8-11.2-3.8c-10.1,0-18.4,8.2-18.4,18.4c0,2.2,0.4,4.4,1.1,6.4C6.5,42.6,0,51.8,0,62
    			c0,10.3,6.4,19.3,16,22.8c-0.4,2.1-0.6,4.3-0.6,6.6c0,19,15.5,34.5,34.5,34.5c11.2,0,21.5-5.4,28-14.4c3.2,2.5,7.2,3.9,11.3,3.9
    			c10.1,0,18.4-8.2,18.4-18.4c0-2.2-0.4-4.4-1.1-6.4C115.9,87.2,122.5,78,122.5,67.8z"/>
    		<g>
    			<path fill="#F4BD19" d="M47.9,56.3l27.3,12.5l27.6-24.2c0.4-2,0.6-4,0.6-6.1c0-17-13.8-30.8-30.8-30.8c-10.2,0-19.7,5-25.4,13.4
    				l-4.6,23.8L47.9,56.3z"/>
    		</g>
    		<g>
    			<path fill="#3CBEB1" d="M19.6,85.2c-0.4,2-0.6,4.1-0.6,6.2c0,17,13.9,30.9,30.9,30.9c10.3,0,19.8-5.1,25.6-13.5L80,85l-6.1-11.6
    				L46.5,60.9L19.6,85.2z"/>
    		</g>
    		<g>
    			<path fill="#E9478C" d="M19.4,37.9l18.7,4.4L42.3,21c-2.6-2-5.7-3-9-3c-8.1,0-14.8,6.6-14.8,14.8C18.5,34.5,18.8,36.3,19.4,37.9z
    				"/>
    		</g>
    		<g>
    			<path fill="#2C458F" d="M17.8,42.4C9.4,45.1,3.6,53.2,3.6,62c0,8.6,5.3,16.3,13.3,19.3l26.3-23.8l-4.8-10.3L17.8,42.4z"/>
    		</g>
    		<g>
    			<path fill="#95C63D" d="M80.3,108.7c2.6,2,5.7,3.1,8.9,3.1c8.1,0,14.8-6.6,14.8-14.8c0-1.8-0.3-3.5-0.9-5.1l-18.7-4.4L80.3,108.7
    				z"/>
    		</g>
    		<g>
    			<path fill="#176655" d="M84.1,82.6l20.6,4.8c8.4-2.8,14.2-10.8,14.2-19.6c0-8.6-5.3-16.2-13.3-19.3l-27,23.6L84.1,82.6z"/>
    		</g>
    	</g>
    	<path d="M162.8,76.3c0,0.1,0,0.6,0.1,1.4c0.1,0.8,0.3,1.8,0.6,3c0.3,1.1,0.8,2.4,1.4,3.7c0.6,1.3,1.4,2.5,2.5,3.6
    		c1,1.1,2.3,2,3.8,2.7c1.5,0.7,3.4,1.1,5.6,1.1c1.8,0,3.3-0.1,4.6-0.4c1.3-0.3,2.4-0.7,3.4-1.3c1-0.6,1.9-1.3,2.7-2.2
    		c0.8-0.9,1.6-1.9,2.4-3.1c0.5-0.7,1-1.2,1.6-1.5c0.6-0.3,1.2-0.4,1.8-0.4c1,0,2,0.4,2.8,1.1c0.9,0.7,1.3,1.7,1.3,2.8
    		c0,0.7-0.4,1.7-1.1,3.1c-0.7,1.4-1.9,2.8-3.6,4.1c-1.6,1.4-3.7,2.6-6.3,3.6c-2.6,1-5.7,1.5-9.5,1.5c-3.8,0-7.2-0.7-10.2-2.1
    		c-3-1.4-5.5-3.2-7.5-5.6c-2-2.3-3.6-5-4.7-8.1c-1.1-3.1-1.6-6.3-1.6-9.7c0-3.5,0.5-6.8,1.6-9.9c1.1-3.1,2.7-5.8,4.7-8.1
    		c2-2.3,4.5-4.1,7.4-5.5c2.9-1.3,6.1-2,9.6-2c3.3,0,6.3,0.5,9.2,1.5c2.8,1,5.3,2.4,7.4,4.3c2.1,1.9,3.7,4.1,5,6.8
    		c1.2,2.7,1.8,5.8,1.8,9.2c0,2.1-0.5,3.7-1.6,4.8c-1,1.1-2.2,1.6-3.6,1.6H162.8z M170.9,56.4c-1.5,0.6-2.7,1.4-3.7,2.4
    		c-1,0.9-1.8,2-2.4,3.1c-0.6,1.1-1,2.2-1.3,3.2c-0.3,1-0.5,1.8-0.5,2.5c-0.1,0.7-0.1,1.1-0.1,1.2h27.9c0-1.8-0.3-3.5-0.9-5.1
    		c-0.6-1.6-1.5-3-2.6-4.3c-1.2-1.2-2.7-2.2-4.5-3c-1.8-0.7-4-1.1-6.5-1.1C174.2,55.5,172.4,55.8,170.9,56.4z"/>
    	<path d="M214.3,94.6c0,1.3-0.4,2.3-1.3,3.2c-0.9,0.9-1.9,1.3-3.2,1.3c-1.3,0-2.3-0.4-3.2-1.3c-0.9-0.9-1.3-2-1.3-3.2V35.1
    		c0-1.3,0.4-2.3,1.3-3.2c0.9-0.9,2-1.3,3.2-1.3c1.3,0,2.3,0.4,3.2,1.3c0.9,0.9,1.3,1.9,1.3,3.2V94.6z"/>
    	<path d="M229.8,63.5c-0.6,0.3-1.2,0.5-1.9,0.5c-1.2,0-2.2-0.4-3.2-1.1c-1-0.7-1.5-1.8-1.5-3.1c0-0.5,0.1-1.1,0.4-1.9
    		c0.5-1.2,1.2-2.4,2.1-3.6c0.9-1.2,2-2.2,3.5-3.1s3.3-1.7,5.4-2.2c2.2-0.5,4.8-0.8,7.9-0.8c5.9,0,10.5,1.2,14,3.5
    		c3.5,2.3,5.2,5.8,5.2,10.3v32.8c0,1.3-0.4,2.3-1.3,3.2c-0.9,0.9-1.9,1.3-3.2,1.3c-1.3,0-2.3-0.4-3.2-1.3c-0.9-0.9-1.3-2-1.3-3.2v-2
    		c-1.2,2-4.7,4.5-7.5,5.3c-2.8,0.8-5.7,1.2-8.8,1.2c-2,0-3.9-0.3-5.9-0.8c-2-0.5-3.8-1.4-5.3-2.5c-1.6-1.1-2.9-2.6-3.8-4.3
    		c-1-1.7-1.5-3.8-1.5-6.2c0-2.8,0.5-5.7,1.6-7.5c1.1-1.9,2.6-3.4,4.4-4.6c1.8-1.2,3.9-2.1,6.3-2.8c2.4-0.6,4.9-1.1,7.5-1.4
    		c3-0.3,5.4-0.7,7.2-1.2c1.7-0.4,3-0.9,3.9-1.5c0.9-0.6,1.4-1.2,1.6-2c0.2-0.7,0.3-1.6,0.3-2.5c0-1.1-0.3-2-0.9-2.8
    		c-0.6-0.8-1.4-1.5-2.4-2c-1-0.5-2.1-0.9-3.3-1.2s-2.4-0.4-3.5-0.4c-2.1,0-3.7,0.2-5,0.5c-1.3,0.3-2.3,0.8-3.1,1.4
    		c-0.8,0.6-1.5,1.3-1.9,2.1c-0.5,0.8-0.9,1.6-1.3,2.5C230.9,62.6,230.4,63.1,229.8,63.5z M250.6,74.4c-1.1,0.3-2.4,0.6-3.8,0.8
    		c-1.5,0.2-3,0.4-4.6,0.6c-1.6,0.2-3.1,0.5-4.6,0.9c-1.5,0.3-2.8,0.8-4,1.5c-1.2,0.7-2.2,1.5-2.9,2.5c-0.7,1-1.1,3-1.1,4.6
    		c0,1.3,0.3,2.3,0.8,3.1c0.5,0.8,1.2,1.5,2.1,2c0.9,0.5,1.8,0.8,2.9,1c1.1,0.2,2.2,0.3,3.3,0.3c1.7,0,3.3-0.2,5-0.6
    		c1.7-0.4,3.2-1,4.5-1.9s2.4-2,3.3-3.5c0.8-1.4,1.2-3.8,1.2-5.9v-6.1L250.6,74.4z"/>
    	<path d="M307.6,90.9c-1.1,2-2.7,3.6-4.6,4.8s-4.1,2.1-6.6,2.7c-2.5,0.5-5.2,0.8-7.9,0.8c-3.9,0-7.2-0.6-9.9-1.8
    		c-2.7-1.2-4.9-2.6-6.5-4.1c-1.7-1.6-2.9-3.1-3.7-4.7c-0.7-1.6-1.1-2.7-1.1-3.5c0-1.3,0.5-2.4,1.4-3.2c0.9-0.8,2-1.2,3.1-1.2
    		c0.7,0,1.3,0.2,2,0.6c0.6,0.4,1.1,1,1.5,1.9c1,2.5,2.5,4.5,4.7,6.2c2.2,1.7,5.2,2.5,9.3,2.5c1.8,0,3.4-0.2,4.7-0.6
    		c1.3-0.4,2.4-1,3.2-1.7c0.8-0.7,1.4-1.5,1.9-2.4c0.4-0.9,0.6-1.8,0.6-2.8c0-2-0.8-3.4-2.3-4.4c-1.5-1-3.5-1.7-5.8-2.3
    		c-2.3-0.6-4.8-1.1-7.5-1.6c-2.7-0.5-5.2-1.2-7.5-2.2c-2.3-0.9-4.2-2.3-5.8-4c-1.6-1.8-2.3-4.2-2.3-7.3c0-4.5,1.6-8,4.9-10.5
    		c3.3-2.5,7.8-3.8,13.7-3.8c3.3,0,6,0.3,8.3,1c2.2,0.7,4.1,1.6,5.5,2.7c0.6,0.5,1.2,1,1.8,1.7c0.6,0.7,1.2,1.4,1.8,2.2
    		c0.6,0.8,1,1.5,1.4,2.3c0.4,0.7,0.6,1.4,0.6,2c0,1.3-0.5,2.4-1.6,3.1c-1,0.8-2.2,1.2-3.4,1.2c-0.7,0-1.5-0.1-2.1-0.6
    		c-0.6-0.6-1-1.3-1.3-1.8c-0.5-1.1-1.1-2-1.7-2.8c-0.5-0.8-1.2-1.5-2-2c-0.8-0.5-1.8-0.9-3-1.2c-1.2-0.3-2.7-0.4-4.4-0.4
    		c-3.5,0-6,0.6-7.6,1.7c-1.6,1.1-2.4,2.5-2.4,4.2c0,1.3,0.5,2.3,1.4,3.1c0.9,0.8,2.1,1.4,3.7,2c1.5,0.5,3.3,1,5.2,1.4
    		c2,0.4,3.9,0.8,5.9,1.3c2,0.5,4,1.1,5.9,1.7c1.9,0.7,3.7,1.6,5.2,2.7c1.5,1.1,2.7,2.5,3.7,4.1c0.9,1.6,1.4,3.6,1.4,6
    		C309.4,86.4,308.8,88.9,307.6,90.9z"/>
    	<path d="M327.4,48.8h4.7c1.1,0,2,0.4,2.8,1.2c0.8,0.8,1.2,1.7,1.2,2.8c0,1.1-0.4,2.1-1.2,2.8s-1.7,1.1-2.8,1.1h-4.7v37.9
    		c0,1.3-0.4,2.3-1.3,3.2c-0.9,0.9-2,1.3-3.2,1.3c-1.3,0-2.3-0.4-3.2-1.3c-0.9-0.9-1.3-2-1.3-3.2V56.7h-4.6c-1.1,0-2-0.4-2.8-1.1
    		c-0.8-0.7-1.2-1.7-1.2-2.8c0-1.1,0.4-2,1.2-2.8c0.8-0.8,1.7-1.2,2.8-1.2h4.6V39c0-1.3,0.4-2.3,1.3-3.2s1.9-1.3,3.2-1.3
    		c1.3,0,2.3,0.4,3.2,1.3s1.3,1.9,1.3,3.2V48.8z"/>
    	<path d="M341.5,32.1c1-1,2.2-1.5,3.7-1.5c1.4,0,2.6,0.5,3.6,1.5c1,1,1.5,2.2,1.5,3.6c0,1.4-0.5,2.6-1.5,3.6c-1,1-2.2,1.5-3.6,1.5
    		c-1.4,0-2.7-0.5-3.7-1.5c-1-1-1.5-2.2-1.5-3.6C340,34.2,340.5,33,341.5,32.1z M349.6,94.6c0,1.3-0.4,2.3-1.3,3.2
    		c-0.9,0.9-1.9,1.3-3.2,1.3c-1.3,0-2.3-0.4-3.2-1.3c-0.9-0.9-1.3-2-1.3-3.2V53.3c0-1.3,0.4-2.3,1.3-3.2c0.9-0.9,2-1.3,3.2-1.3
    		c1.3,0,2.3,0.4,3.2,1.3c0.9,0.9,1.3,2,1.3,3.2V94.6z"/>
    	<path d="M369.1,97.3c-2.9-1.2-5.4-3-7.5-5.2c-2.1-2.2-3.8-4.9-5-8.1c-1.2-3.1-1.8-6.6-1.8-10.4c0-3.8,0.6-7.3,1.8-10.5
    		c1.2-3.1,2.9-5.8,5-8.1c2.1-2.2,4.6-4,7.5-5.2c2.9-1.2,6-1.9,9.4-1.9c3.4,0,6.4,0.5,9,1.5c2.5,1,4.6,2.2,6.2,3.6
    		c1.6,1.4,3.2,2.9,4,4.4c0.5,0.9,0.9,1.5,0.9,2.6c0,1.3-0.5,2.3-1.4,3.1c-0.9,0.7-2,1.1-3.1,1.1c-0.8,0-1.6-0.2-2.2-0.6
    		c-0.7-0.4-1.2-1.3-1.8-2.1c-1-1.4-0.5-0.6-1.1-1.5c-0.7-0.9-1.5-1.6-2.5-2.3c-1-0.7-2.2-1.2-3.5-1.6c-1.4-0.4-2.8-0.6-4.4-0.6
    		c-1.8,0-3.5,0.3-5.3,1c-1.8,0.7-3.3,1.7-4.7,3.1c-1.4,1.4-2.5,3.3-3.4,5.6s-1.3,5.1-1.3,8.4c0,3.3,0.4,6.1,1.3,8.4s2,4.2,3.4,5.6
    		c1.4,1.4,3,2.5,4.7,3.1c1.8,0.7,3.5,1,5.3,1c1.6,0,3.1-0.2,4.4-0.6c1.3-0.4,2.5-0.9,3.5-1.6c1-0.7,1.8-1.5,2.5-2.3
    		c0.7-0.9,1.1-1.8,1.4-2.7c0.3-1,0.8-1.7,1.5-2.1c0.7-0.4,1.4-0.6,2.2-0.6c1.1,0,2.2,0.4,3.1,1.1c0.9,0.7,1.4,1.7,1.4,3
    		c0,0.6-0.3,1.7-0.9,3.1c-0.6,1.5-1.6,2.9-3.1,4.4c-1.5,1.5-3.5,2.8-6.2,4c-2.6,1.1-6,1.7-10,1.7C375.1,99.2,372,98.5,369.1,97.3z"
    		/>
    </g>
</svg>
						</div>
					</a>
				</h1>
			</div>
		</div>
		<div class="4u 6u(small) 6u(xsmall) text-right">
			<!-- <div class="mobile-menu-wrapper"> -->
				<ul class="m-shortcuts">
					
					<li><a href="#" class="m-search" id="header-search"></a></li>
					
					<li><a href="/guide" class="m-docs" id="mobile-docs"></a></li>
					
					<li><a href="/contact" class="m-contact" id="mobile-contact"></a></li>
					
				</ul>	
				<nav class="nav-menu">
					<div class="menu-button">
						<span></span>
					</div>
					<div class="nav-menu-list-wrap">
						<div class="nav-menu-list">
							
								<h3><a href="/products" id="nav_products" >Products</a></h3>

								
								<ul>
									
									<li><a href="/products/elasticsearch" id="nav_elasticsearch" >elasticsearch</a></li>
									
									<li><a href="/found" id="nav_hosted-elasticsearch" >elasticsearch as a service</a></li>
									
									<li><a href="/products/logstash" id="nav_logstash" >logstash</a></li>
									
									<li><a href="/products/kibana" id="nav_kibana" >kibana</a></li>
									
									<li><a href="/products/beats" id="nav_beats" >beats</a></li>
									
									<li><a href="/products/watcher" id="nav_watcher" >watcher</a></li>
									
									<li><a href="/products/shield" id="nav_shield" >shield</a></li>
									
									<li><a href="/products/marvel" id="nav_marvel" >marvel</a></li>
									
									<li><a href="/products/hadoop" id="nav_hadoop" >hadoop</a></li>
									
									<li><a href="/downloads" id="nav_downloads" >downloads</a></li>
									
								</ul>
								
							
								<h3><a href="/subscriptions" id="nav_subscriptions" >Subscriptions</a></h3>

								
							
								<h3><a href="/learn" id="nav_learn" >Learn</a></h3>

								
								<ul>
									
									<li><a href="/guide" id="nav_guide" >docs</a></li>
									
									<li><a href="/videos" id="nav_videos" >videos</a></li>
									
									<li><a href="/training" id="nav_training" >training</a></li>
									
									<li><a href="/services" id="nav_services" >services</a></li>
									
									<li><a href="/blog" id="nav_learn_blog" >blog</a></li>
									
									<li><a href="/elasticon" id="nav_learn_elasticon" >elastic{ON}</a></li>
									
								</ul>
								
							
								<h3><a href="/community" id="nav_community" >Community</a></h3>

								
								<ul>
									
									<li><a href="/community/meetups" id="nav_meetups" >meetups</a></li>
									
									<li><a href="/https:/discuss.elastic.co" id="nav_discuss" target="_blank">discuss</a></li>
									
									<li><a href="/community/codeofconduct" id="nav_codeofconduct" >code of conduct</a></li>
									
								</ul>
								
							
								<h3><a href="/use-cases" id="nav_usecases" >Use Cases</a></h3>

								
							
								<h3><a href="/blog" id="nav_blog" >Blog</a></h3>

								
								<ul>
									
									<li><a href="/blog/category/news" id="blog_news" >News</a></li>
									
									<li><a href="/blog/category/engineering" id="blog_engineering" >Engineering</a></li>
									
									<li><a href="/blog/category/user-stories" id="blog_user-stories" >User Stories</a></li>
									
									<li><a href="/blog/category/releases" id="blog_releases" >Releases</a></li>
									
									<li><a href="/blog/archive" id="blog_archive" >Archive</a></li>
									
								</ul>
								
							
								<h3><a href="/about" id="nav_about" >About</a></h3>

								
								<ul>
									
									<li><a href="/about/leadership" id="nav_leadership" >leadership</a></li>
									
									<li><a href="/about/board" id="nav_board" >board of directors</a></li>
									
									<li><a href="/about/careers" id="nav_careers" >careers</a></li>
									
									<li><a href="/about/partners" id="nav_partners" >partners</a></li>
									
									<li><a href="/about/press" id="nav_press" >press</a></li>
									
								</ul>
								
							
						</div>
					</div>
				</nav>
			<!-- </div> -->
		</div>
	</div>
</div>
<!-- Mobile Menu -->


		</div>
	</div>
</div>
<div class="header-search-wrapper">	
	<div class="container">
		<div class="big-search">
			<i class="big-search-icon"></i>
			<form method="get" action="/search" autocomplete="on" name="searchForm" id="searchfrm">
				<ul class="tags-wrapper">
					<li class="search-field"><input type="text" class="form-control global-input" id="autocomplete" name="q"></li>
				</ul>
			</form>
			<a href="#" class="header-search-cancel"></a>
		</div>
		<div class="nav-auto-complete"></div>
	</div>
</div>
<style>	
	
	
		.m-shortcuts li a.m-search {
			background: url("https://static-www.elastic.co/assets/blt174b13be89ff803c/m-search-icon.png?q=100") no-repeat scroll center center rgba(0, 0, 0, 0);
			background-size: contain;}
	
		.m-shortcuts li a.m-docs {
			background: url("https://static-www.elastic.co/assets/blt5ba03f594a7d610a/m-guide-icon.png?q=100") no-repeat scroll center center rgba(0, 0, 0, 0);
			background-size: contain;}
	
		.m-shortcuts li a.m-contact {
			background: url("https://static-www.elastic.co/assets/blt38c3e853c4b1174d/m-contact-icon.png?q=100") no-repeat scroll center center rgba(0, 0, 0, 0);
			background-size: contain;}
		
</style>
		</div>
	</div>
  	<div id="content">
  		
  			
            <div id="pageheader">
    <div class="container">
        <header>
            <h1><a href="/learn" title="Learn">Learn</a> |</h1>
            <h2><a href="/guide" title="Docs">Docs</a></h2>
        </header>
    </div>
</div>
<section id="guide">

            <!-- start body -->
<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch: The Definitive Guide</a></span> » <span class="breadcrumb-link"><a href="getting-started.html">Getting Started </a></span> » <span class="breadcrumb-node">Mapping and Analysis</span></div><div class="navheader"><span class="prev"><a href="search.html">
              « 
              Searching—The Basic Tools</a>
           
        </span><span class="next">
           
          <a href="full-body-search.html">Full-Body Search
               »
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="mapping-analysis"></a>Mapping and Analysis</h2></div></div></div><p>While playing around with the data in our index, we notice something odd.
Something seems to be broken: we have 12 tweets in our indices, and only one
of them contains the date <code class="literal">2014-09-15</code>, but have a look at the <code class="literal">total</code> hits
for the following queries:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">GET /_search?q=2014              # 12 results
GET /_search?q=2014-09-15        # 12 results !
GET /_search?q=date:2014-09-15   # 1  result
GET /_search?q=date:2014         # 0  results !</pre></div><div class="sense_widget" data-snippet="snippets/052_Mapping_Analysis/25_Data_type_differences.json"></div><p>Why does querying the <a class="link" href="search.html#all-field-intro" title="The _all Field"><code class="literal">_all</code> field</a> for the full date
return all tweets, and querying the <code class="literal">date</code> field for just the year return no
results? Why do our results differ when searching within the <code class="literal">_all</code> field or
the <code class="literal">date</code> field?</p><p>Presumably, it is because the way our data has been indexed in the <code class="literal">_all</code>
field is different from how it has been indexed in the <code class="literal">date</code> field.
So let’s take a look at how Elasticsearch has interpreted our document
structure, by requesting<a id="id-1.4.8.6.3" class="indexterm"></a> the <span class="emphasis"><em>mapping</em></span> (or schema definition)
for the <code class="literal">tweet</code> type in the <code class="literal">gb</code> index:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">GET /gb/_mapping/tweet</pre></div><div class="sense_widget" data-snippet="snippets/052_Mapping_Analysis/25_Data_type_differences.json"></div><p>This gives us the following:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">{
   "gb": {
      "mappings": {
         "tweet": {
            "properties": {
               "date": {
                  "type": "date",
                  "format": "dateOptionalTime"
               },
               "name": {
                  "type": "string"
               },
               "tweet": {
                  "type": "string"
               },
               "user_id": {
                  "type": "long"
               }
            }
         }
      }
   }
}</pre></div><p>Elasticsearch has dynamically generated a mapping for us, based on what it
could guess about our field types. The response shows us that the <code class="literal">date</code> field
has been recognized as a field of type <code class="literal">date</code>. <a id="id-1.4.8.11.3" class="indexterm"></a>The <code class="literal">_all</code> field isn’t
mentioned because it is a default field, but we know that the <code class="literal">_all</code> field is
of type <code class="literal">string</code>.<a id="id-1.4.8.11.7" class="indexterm"></a></p><p>So fields of type <code class="literal">date</code> and fields of type <code class="literal">string</code> are<a id="id-1.4.8.12.3" class="indexterm"></a>
<a id="id-1.4.8.12.4" class="indexterm"></a> indexed differently,
and can thus be searched differently.  That’s not entirely surprising.
You might expect that each of the <a id="id-1.4.8.12.5" class="indexterm"></a>
<a id="id-1.4.8.12.6" class="indexterm"></a>core data types—strings, numbers, Booleans,
and dates—might be indexed slightly differently. And this is true:
there are slight differences.</p><p>But by far the biggest difference is between fields<a id="id-1.4.8.13.1" class="indexterm"></a>
<a id="id-1.4.8.13.2" class="indexterm"></a><a id="id-1.4.8.13.3" class="indexterm"></a>
<a id="id-1.4.8.13.4" class="indexterm"></a> that represent
<span class="emphasis"><em>exact values</em></span> (which can include <code class="literal">string</code> fields) and fields that
represent <span class="emphasis"><em>full text</em></span>. This distinction is really important—it’s the thing
that separates a search engine from all other databases.</p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_exact_values_versus_full_text"></a>Exact Values Versus Full Text</h2></div></div></div><p>Data in Elasticsearch can be broadly divided into two types:
exact values and full text.</p><p><span class="emphasis"><em>Exact values</em></span> are exactly what they sound like.<a id="id-1.4.8.14.3.2" class="indexterm"></a>  Examples are a date or a
user ID, but can also include exact strings such as a username or an email
address. The exact value <code class="literal">Foo</code> is not the same as the exact value <code class="literal">foo</code>.
The exact value <code class="literal">2014</code> is not the same as the exact value <code class="literal">2014-09-15</code>.</p><p><span class="emphasis"><em>Full text</em></span>, on the other hand, refers <a id="id-1.4.8.14.4.2" class="indexterm"></a>to textual data—usually written in
some human language — like the text of a tweet or the body of an email.</p><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>Full text is often referred to as <span class="emphasis"><em>unstructured data</em></span>, which is a misnomer—natural language is highly structured. The problem is that the rules of
natural languages are complex, which makes them difficult for computers to
parse correctly. For instance, consider this sentence:</p><pre class="literallayout">May is fun but June bores me.</pre><p>Does it refer to months or to people?</p></div></div><p>Exact values are easy to query. The decision is binary; a value either
matches the query, or it doesn’t. This kind of query is easy to express with
SQL:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">WHERE name    = "John Smith"
  AND user_id = 2
  AND date    &gt; "2014-09-15"</pre></div><p>Querying full-text data is much more subtle. We are not just asking, “Does
this document match the query” but “How <span class="emphasis"><em>well</em></span> does this document match the
query?” In other words, how <span class="emphasis"><em>relevant</em></span> is this document to the given query?</p><p>We seldom want to match the whole full-text field exactly.  Instead, we want
to search <span class="emphasis"><em>within</em></span> text fields. Not only that, but we expect search to
understand our <span class="emphasis"><em>intent</em></span>:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
A search for <code class="literal">UK</code> should also return documents mentioning the <code class="literal">United Kingdom</code>.
</li><li class="listitem">
A search for <code class="literal">jump</code> should also match <code class="literal">jumped</code>, <code class="literal">jumps</code>, <code class="literal">jumping</code>,
  and perhaps even <code class="literal">leap</code>.
</li><li class="listitem">
<code class="literal">johnny walker</code> should match <code class="literal">Johnnie Walker</code>, and <code class="literal">johnnie depp</code>
  should match <code class="literal">Johnny Depp</code>.
</li><li class="listitem">
<code class="literal">fox news hunting</code> should return stories about hunting on Fox News,
  while <code class="literal">fox hunting news</code> should return news stories about fox hunting.
</li></ul></div><p>To facilitate these types of queries on full-text fields,
Elasticsearch first <span class="emphasis"><em>analyzes</em></span> the text, and then uses the results to build
an <span class="emphasis"><em>inverted index</em></span>. We will discuss the inverted index and the
analysis process in the next two sections.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="inverted-index"></a>Inverted Index</h2></div></div></div><p>Elasticsearch uses a structure called<a id="id-1.4.8.15.2.1" class="indexterm"></a> an <span class="emphasis"><em>inverted index</em></span>, which is designed
to allow very fast full-text searches. An inverted index consists of a list
of all the unique words that appear in any document, and for each word, a list
of the documents in which it appears.</p><p>For example, let’s say we have two documents, each with a <code class="literal">content</code> field
containing the following:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
The quick brown fox jumped over the lazy dog
</li><li class="listitem">
Quick brown foxes leap over lazy dogs in summer
</li></ol></div><p>To create an inverted index, we first split the <code class="literal">content</code> field of each
document into separate <a id="id-1.4.8.15.5.2" class="indexterm"></a><a id="id-1.4.8.15.5.3" class="indexterm"></a><a id="id-1.4.8.15.5.4" class="indexterm"></a>words (which we call <span class="emphasis"><em>terms</em></span>, or <span class="emphasis"><em>tokens</em></span>), create a
sorted list of all the unique terms, and then list in which document each term
appears. The result looks something like this:</p><pre class="literallayout">Term      Doc_1  Doc_2
-------------------------
Quick   |       |  X
The     |   X   |
brown   |   X   |  X
dog     |   X   |
dogs    |       |  X
fox     |   X   |
foxes   |       |  X
in      |       |  X
jumped  |   X   |
lazy    |   X   |  X
leap    |       |  X
over    |   X   |  X
quick   |   X   |
summer  |       |  X
the     |   X   |
------------------------</pre><p>Now, if we want to search for <code class="literal">quick brown</code>, we just need to find the
documents in which each term appears:</p><pre class="literallayout">Term      Doc_1  Doc_2
-------------------------
brown   |   X   |  X
quick   |   X   |
------------------------
Total   |   2   |  1</pre><p>Both documents match, but the first document has more matches than the second.
If we apply a naive <span class="emphasis"><em>similarity algorithm</em></span> that<a id="id-1.4.8.15.9.2" class="indexterm"></a> just counts the number of
matching terms, then we can say that the first document is a better match—is <span class="emphasis"><em>more relevant</em></span> to our query—than the second document.</p><p>But there are a few problems with our current inverted index:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<code class="literal">Quick</code> and <code class="literal">quick</code> appear as separate terms, while the user probably
   thinks of them as the same word.
</li><li class="listitem">
<code class="literal">fox</code> and <code class="literal">foxes</code> are pretty similar, as are <code class="literal">dog</code> and <code class="literal">dogs</code>;
   They share the same root word.
</li><li class="listitem">
<code class="literal">jumped</code> and <code class="literal">leap</code>, while not from the same root word, are similar
   in meaning. They are synonyms.
</li></ul></div><p>With the preceding index, a search for <code class="literal">+Quick +fox</code> wouldn’t match any
documents. (Remember, a preceding <code class="literal">+</code> means that the word must be present.)
Both the term <code class="literal">Quick</code> and the term <code class="literal">fox</code> have to be in the same document
in order to satisfy the query, but the first doc contains <code class="literal">quick fox</code> and
the second doc contains <code class="literal">Quick foxes</code>.</p><p>Our user could reasonably expect both documents to match the query. We can do
better.</p><p>If we normalize the terms into a standard <a id="id-1.4.8.15.14.1" class="indexterm"></a>format, then we can find documents
that contain terms that are not exactly the same as the user requested, but
are similar enough to still be relevant. For instance:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<code class="literal">Quick</code> can be lowercased to become <code class="literal">quick</code>.
</li><li class="listitem">
<code class="literal">foxes</code> can be <span class="emphasis"><em>stemmed</em></span>--reduced to its root form—to
   become <code class="literal">fox</code>. Similarly, <code class="literal">dogs</code> could be stemmed to <code class="literal">dog</code>.
</li><li class="listitem">
<code class="literal">jumped</code> and <code class="literal">leap</code> are synonyms and can be indexed as just the
   single term <code class="literal">jump</code>.
</li></ul></div><p>Now the index looks like this:</p><pre class="literallayout">Term      Doc_1  Doc_2
-------------------------
brown   |   X   |  X
dog     |   X   |  X
fox     |   X   |  X
in      |       |  X
jump    |   X   |  X
lazy    |   X   |  X
over    |   X   |  X
quick   |   X   |  X
summer  |       |  X
the     |   X   |  X
------------------------</pre><p>But we’re not there yet. Our search for <code class="literal">+Quick +fox</code> would <span class="emphasis"><em>still</em></span> fail,
because we no longer have the exact term <code class="literal">Quick</code> in our index. However, if
we apply the same normalization rules that we used on the <code class="literal">content</code> field to
our query string, it would become a query for <code class="literal">+quick +fox</code>, which would
match both documents!</p><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>This is very important. You can find only terms that exist in your
index, so <span class="emphasis"><em>both the indexed text and the query string must be normalized
into the same form</em></span>.</p></div></div><p>This process of tokenization and normalization is called <span class="emphasis"><em>analysis</em></span>, which we
discuss in the next section.<a id="id-1.4.8.15.20.2" class="indexterm"></a></p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="analysis-intro"></a>Analysis and Analyzers</h2></div></div></div><p><span class="emphasis"><em>Analysis</em></span> is a <a id="id-1.4.8.16.2.2" class="indexterm"></a>
<a id="id-1.4.8.16.2.3" class="indexterm"></a>process that consists of the following:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
First, tokenizing a block of text into
   individual <span class="emphasis"><em>terms</em></span> suitable for use in an inverted index,
</li><li class="listitem">
Then normalizing these terms into a standard form to improve their
   “searchability,” or <span class="emphasis"><em>recall</em></span>
</li></ul></div><p>This job is <a id="id-1.4.8.16.4.1" class="indexterm"></a>performed by analyzers. An <span class="emphasis"><em>analyzer</em></span> is really just a wrapper
that combines three functions into a<a id="id-1.4.8.16.4.3" class="indexterm"></a> single package:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
Character filters
</span></dt><dd>
    First, the string is passed through any <span class="emphasis"><em>character filters</em></span> in turn. Their
    job is to tidy up the string before tokenization. A character filter could
    be used to strip out HTML, or to convert <code class="literal">&amp;</code> characters to the word
    <code class="literal">and</code>.
</dd><dt><span class="term">
Tokenizer
</span></dt><dd>
   Next, the string is tokenized into individual terms by a <span class="emphasis"><em>tokenizer</em></span>. A
   simple tokenizer might split the text into terms whenever it encounters
   whitespace or punctuation.
</dd><dt><span class="term">
Token filters
</span></dt><dd>
   Last, each term is passed through any <span class="emphasis"><em>token filters</em></span> in turn, which can
   change terms (for example, lowercasing <code class="literal">Quick</code>), remove terms (for example, stopwords such as
   <code class="literal">a</code>, <code class="literal">and</code>, <code class="literal">the</code>) or add terms (for example, synonyms like <code class="literal">jump</code> and
   <code class="literal">leap</code>).
</dd></dl></div><p>Elasticsearch provides many character filters, <a id="id-1.4.8.16.6.1" class="indexterm"></a><a id="id-1.4.8.16.6.2" class="indexterm"></a>tokenizers, and token filters
out of the box. These can be combined to create custom analyzers suitable
for different purposes. We discuss these in detail in <a class="xref" href="index-management.html#custom-analyzers" title="Custom Analyzers">Custom Analyzers</a>.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_built_in_analyzers"></a>Built-in Analyzers</h3></div></div></div><p>However, Elasticsearch also ships with prepackaged analyzers that
you can use directly.<a id="id-1.4.8.16.7.2.1" class="indexterm"></a>
<a id="id-1.4.8.16.7.2.2" class="indexterm"></a> We list the most important ones next and, to demonstrate
the difference in behavior, we show what terms each would produce
from this string:</p><pre class="literallayout">"Set the shape to semi-transparent by calling set_trans(5)"</pre><div class="variablelist"><dl class="variablelist"><dt><span class="term">
Standard analyzer
</span></dt><dd><p class="simpara">
The standard analyzer <a id="id-1.4.8.16.7.4.1.2.1.1" class="indexterm"></a>is the default analyzer that Elasticsearch uses. It is
the best general choice for analyzing text that may be in any language. It
splits the text on <span class="emphasis"><em>word boundaries</em></span>, as<a id="id-1.4.8.16.7.4.1.2.1.3" class="indexterm"></a> defined by the
<a class="ulink" href="http://www.unicode.org/reports/tr29/" target="_top">Unicode Consortium</a>, and removes most
punctuation. Finally, it lowercases all terms. It would produce
</p><pre class="literallayout">set, the, shape, to, semi, transparent, by, calling, set_trans, 5</pre></dd><dt><span class="term">
Simple analyzer
</span></dt><dd><p class="simpara">
The simple analyzer splits <a id="id-1.4.8.16.7.4.2.2.1.1" class="indexterm"></a>the text on anything that isn’t a letter,
and lowercases the terms. It would produce
</p><pre class="literallayout">set, the, shape, to, semi, transparent, by, calling, set, trans</pre></dd><dt><span class="term">
Whitespace analyzer
</span></dt><dd><p class="simpara">
The whitespace analyzer splits <a id="id-1.4.8.16.7.4.3.2.1.1" class="indexterm"></a>the text on whitespace. It doesn’t
lowercase. It would produce
</p><pre class="literallayout">Set, the, shape, to, semi-transparent, by, calling, set_trans(5)</pre></dd><dt><span class="term">
Language analyzers
</span></dt><dd><p class="simpara">
Language-specific analyzers <a id="id-1.4.8.16.7.4.4.2.1.1" class="indexterm"></a>are available for <a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-lang-analyzer.html" target="_top">many languages</a>. They are able to
take the peculiarities of the specified language into account. For instance,
the <code class="literal">english</code> analyzer comes with a set of English <a id="id-1.4.8.16.7.4.4.2.1.4" class="indexterm"></a>stopwords (common words
like <code class="literal">and</code> or <code class="literal">the</code> that don’t have much impact on relevance), which it
removes. This analyzer also is able to <span class="emphasis"><em>stem</em></span> English <a id="id-1.4.8.16.7.4.4.2.1.8" class="indexterm"></a>words because it understands the
rules of English grammar.
</p><p class="simpara">The <code class="literal">english</code> analyzer would produce the following:</p><pre class="literallayout">set, shape, semi, transpar, call, set_tran, 5</pre><p class="simpara">Note how <code class="literal">transparent</code>, <code class="literal">calling</code>, and <code class="literal">set_trans</code> have been stemmed to
their root form.</p></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_when_analyzers_are_used"></a>When Analyzers Are Used</h3></div></div></div><p>When we <span class="emphasis"><em>index</em></span> a document, its full-text fields are analyzed into terms that
are used to create the inverted index.<a id="id-1.4.8.16.8.2.2" class="indexterm"></a>
<a id="id-1.4.8.16.8.2.3" class="indexterm"></a>  However, when we <span class="emphasis"><em>search</em></span> on a full-text field,  we need to pass the query string through the <span class="emphasis"><em>same analysis
process</em></span>, to ensure that we are searching for terms in the same form as those
that exist in the index.</p><p>Full-text queries, which we discuss later, understand how each field is
defined, and so they can do<a id="id-1.4.8.16.8.3.1" class="indexterm"></a>
<a id="id-1.4.8.16.8.3.2" class="indexterm"></a> the right thing:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
When you query a <span class="emphasis"><em>full-text</em></span> field, the query will apply the same analyzer
   to the query string to produce the correct list of terms to search for.
</li><li class="listitem">
When you query an <span class="emphasis"><em>exact-value</em></span> field, the query will not analyze the
   query string, <a id="id-1.4.8.16.8.4.2.1.2" class="indexterm"></a>
<a id="id-1.4.8.16.8.4.2.1.3" class="indexterm"></a>but instead search for the exact value that you have
   specified.
</li></ul></div><p>Now you can understand why the queries that we demonstrated at the
<a class="link" href="mapping-analysis.html" title="Mapping and Analysis">start of this chapter</a> return what they do:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
The <code class="literal">date</code> field contains an exact value: the single term <code class="literal">2014-09-15</code>.
</li><li class="listitem">
The <code class="literal">_all</code> field is a full-text field, so the analysis process has
  converted the date into the three terms: <code class="literal">2014</code>, <code class="literal">09</code>, and <code class="literal">15</code>.
</li></ul></div><p>When we query the <code class="literal">_all</code> field for <code class="literal">2014</code>, it matches all 12 tweets, because
all of them contain the term <code class="literal">2014</code>:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-sh">GET /_search?q=2014              # 12 results</pre></div><div class="sense_widget" data-snippet="snippets/052_Mapping_Analysis/25_Data_type_differences.json"></div><p>When we query the <code class="literal">_all</code> field for <code class="literal">2014-09-15</code>, it first analyzes the query
string to produce a query that matches <span class="emphasis"><em>any</em></span> of the terms <code class="literal">2014</code>, <code class="literal">09</code>, or
<code class="literal">15</code>. This also matches all 12 tweets, because all of them contain the term
<code class="literal">2014</code>:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-sh">GET /_search?q=2014-09-15        # 12 results !</pre></div><div class="sense_widget" data-snippet="snippets/052_Mapping_Analysis/25_Data_type_differences.json"></div><p>When we query the <code class="literal">date</code> field for <code class="literal">2014-09-15</code>, it looks for that <span class="emphasis"><em>exact</em></span>
date, and finds one tweet only:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-sh">GET /_search?q=date:2014-09-15   # 1  result</pre></div><div class="sense_widget" data-snippet="snippets/052_Mapping_Analysis/25_Data_type_differences.json"></div><p>When we query the <code class="literal">date</code> field for <code class="literal">2014</code>, it finds no documents
because none contain that exact date:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-sh">GET /_search?q=date:2014         # 0  results !</pre></div><div class="sense_widget" data-snippet="snippets/052_Mapping_Analysis/25_Data_type_differences.json"></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="analyze-api"></a>Testing Analyzers</h3></div></div></div><p>Especially when you are new <a id="id-1.4.8.16.9.2.1" class="indexterm"></a>
<a id="id-1.4.8.16.9.2.2" class="indexterm"></a>to Elasticsearch, it is sometimes difficult to
understand what is actually being tokenized and stored into your index.  To
better understand what is going on, you can use the <code class="literal">analyze</code> API to see how
text is analyzed. Specify which analyzer to use in the query-string
parameters,  and the text to analyze in the body:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">GET /_analyze?analyzer=standard
Text to analyze</pre></div><div class="sense_widget" data-snippet="snippets/052_Mapping_Analysis/40_Analyze.json"></div><p>Each element in the result represents a single term:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">{
   "tokens": [
      {
         "token":        "text",
         "start_offset": 0,
         "end_offset":   4,
         "type":         "&lt;ALPHANUM&gt;",
         "position":     1
      },
      {
         "token":        "to",
         "start_offset": 5,
         "end_offset":   7,
         "type":         "&lt;ALPHANUM&gt;",
         "position":     2
      },
      {
         "token":        "analyze",
         "start_offset": 8,
         "end_offset":   15,
         "type":         "&lt;ALPHANUM&gt;",
         "position":     3
      }
   ]
}</pre></div><p>The <code class="literal">token</code> is the actual term that will be stored in the index. The
<code class="literal">position</code> indicates the order in which the terms appeared in the original
text. The <code class="literal">start_offset</code> and <code class="literal">end_offset</code> indicate the character positions
that the original word occupied in the original string.</p><div class="tip admon"><div class="icon"><img alt="Tip" src="images/icons/tip.png" /></div><div class="admon_content"><p>The <code class="literal">type</code> values like <code class="literal">&lt;ALPHANUM&gt;</code> vary <a id="id-1.4.8.16.9.8.1.3" class="indexterm"></a>
<a id="id-1.4.8.16.9.8.1.4" class="indexterm"></a>per analyzer and can be ignored.
The only place that they are used in Elasticsearch is in the
<a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-keep-types-tokenfilter.html" target="_top"><code class="literal">keep_types</code> token filter</a>.</p></div></div><p>The <code class="literal">analyze</code> API is a useful tool for understanding what is happening
inside Elasticsearch indices, and we will talk more about it as we progress.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_specifying_analyzers"></a>Specifying Analyzers</h3></div></div></div><p>When Elasticsearch detects a new string field<a id="id-1.4.8.16.10.2.1" class="indexterm"></a>
<a id="id-1.4.8.16.10.2.2" class="indexterm"></a> in your documents, it
automatically configures it as a full-text <code class="literal">string</code> field and analyzes it with
the <code class="literal">standard</code> analyzer.<a id="id-1.4.8.16.10.2.5" class="indexterm"></a></p><p>You don’t always want this. Perhaps you want to apply a different analyzer
that suits the language your data is in. And sometimes you want a
string field to be just a string field—to index the exact value that
you pass in, without any analysis, such as a string user ID or an
internal status field or tag.</p><p>To achieve this, we have to configure these fields manually
by specifying the mapping.</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="mapping-intro"></a>Mapping</h2></div></div></div><p>In order to be able to treat date fields as dates, numeric fields as numbers,
and string fields as full-text or exact-value strings, Elasticsearch needs to
know what type of data each field contains. <a id="id-1.4.8.17.2.1" class="indexterm"></a> This information is contained in
the mapping.</p><p>As explained in <a class="xref" href="data-in-data-out.html" title="데이터 입출력"><em>데이터 입출력</em></a>, each document in an index <a id="id-1.4.8.17.3.2" class="indexterm"></a>
<a id="id-1.4.8.17.3.3" class="indexterm"></a>has a <span class="emphasis"><em>type</em></span>.
Every type has its own <span class="emphasis"><em>mapping</em></span>, or <span class="emphasis"><em>schema definition</em></span>.<a id="id-1.4.8.17.3.7" class="indexterm"></a> A mapping
defines the fields within a type, the datatype for each field,
and how the field should be handled by Elasticsearch. A mapping is also used
to configure metadata associated with the type.</p><p>We discuss mappings in detail in <a class="xref" href="index-management.html#mapping" title="Types and Mappings">Types and Mappings</a>. In this section, we’re going
to look at just enough to get you started.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="core-fields"></a>Core Simple Field Types</h3></div></div></div><p>Elasticsearch supports the <a id="id-1.4.8.17.5.2.1" class="indexterm"></a>
<a id="id-1.4.8.17.5.2.2" class="indexterm"></a><a id="id-1.4.8.17.5.2.3" class="indexterm"></a>
<a id="id-1.4.8.17.5.2.4" class="indexterm"></a>following simple field types:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
String: <code class="literal">string</code>
</li><li class="listitem">
Whole number: <code class="literal">byte</code>, <code class="literal">short</code>, <code class="literal">integer</code>, <code class="literal">long</code>
</li><li class="listitem">
Floating-point: <code class="literal">float</code>, <code class="literal">double</code>
</li><li class="listitem">
Boolean: <code class="literal">boolean</code>
</li><li class="listitem">
Date: <code class="literal">date</code>
</li></ul></div><p>When you index a document that contains a new field—one previously not
seen—Elasticsearch <a id="id-1.4.8.17.5.4.1" class="indexterm"></a>
<a id="id-1.4.8.17.5.4.2" class="indexterm"></a>
<a id="id-1.4.8.17.5.4.3" class="indexterm"></a><a id="id-1.4.8.17.5.4.4" class="indexterm"></a>
<a id="id-1.4.8.17.5.4.5" class="indexterm"></a>
<a id="id-1.4.8.17.5.4.6" class="indexterm"></a><a id="id-1.4.8.17.5.4.7" class="indexterm"></a><a id="id-1.4.8.17.5.4.8" class="indexterm"></a><a id="id-1.4.8.17.5.4.9" class="indexterm"></a><a id="id-1.4.8.17.5.4.10" class="indexterm"></a><a id="id-1.4.8.17.5.4.11" class="indexterm"></a><a id="id-1.4.8.17.5.4.12" class="indexterm"></a>
<a id="id-1.4.8.17.5.4.13" class="indexterm"></a>will use <a class="link" href="index-management.html#dynamic-mapping" title="Dynamic Mapping"><span class="emphasis"><em>dynamic mapping</em></span></a> to try
to guess the field type from the basic datatypes available in JSON,
using the following rules:</p><div class="horizontal"><table cellpadding="4px" border="0"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td valign="top">
<p>
<span class="strong"><strong>JSON type</strong></span>                       
</p>
</td><td valign="top">
<p>
<span class="strong"><strong>Field type</strong></span>
</p>
</td></tr><tr><td valign="top">
<p>
Boolean: <code class="literal">true</code> or <code class="literal">false</code>         
</p>
</td><td valign="top">
<p>
<code class="literal">boolean</code>
</p>
</td></tr><tr><td valign="top">
<p>
Whole number: <code class="literal">123</code>                
</p>
</td><td valign="top">
<p>
<code class="literal">long</code>
</p>
</td></tr><tr><td valign="top">
<p>
Floating point: <code class="literal">123.45</code>           
</p>
</td><td valign="top">
<p>
<code class="literal">double</code>
</p>
</td></tr><tr><td valign="top">
<p>
String, valid date: <code class="literal">2014-09-15</code> 
</p>
</td><td valign="top">
<p>
<code class="literal">date</code>
</p>
</td></tr><tr><td valign="top">
<p>
String: <code class="literal">foo bar</code>                
</p>
</td><td valign="top">
<p>
<code class="literal">string</code>
</p>
</td></tr></tbody></table></div><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>This means that if you index a number in quotes (<code class="literal">"123"</code>), it will be
mapped as type <code class="literal">string</code>, not type <code class="literal">long</code>. However, if the field is
already mapped as type <code class="literal">long</code>, then Elasticsearch will try to convert
the string into a long, and throw an exception if it can’t.</p></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_viewing_the_mapping"></a>Viewing the Mapping</h3></div></div></div><p>We can view the mapping that Elasticsearch has<a id="id-1.4.8.17.6.2.1" class="indexterm"></a>
<a id="id-1.4.8.17.6.2.2" class="indexterm"></a> for one or more types in one or
more indices by using the <code class="literal">/_mapping</code> endpoint. At the <a class="link" href="mapping-analysis.html" title="Mapping and Analysis">start of this chapter</a>, we already retrieved the mapping for type <code class="literal">tweet</code> in index
<code class="literal">gb</code>:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">GET /gb/_mapping/tweet</pre></div><p>This shows us the mapping for the <a id="id-1.4.8.17.6.4.1" class="indexterm"></a>fields (called <span class="emphasis"><em>properties</em></span>) that
Elasticsearch generated dynamically from the documents that we indexed:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">{
   "gb": {
      "mappings": {
         "tweet": {
            "properties": {
               "date": {
                  "type": "date",
                  "format": "dateOptionalTime"
               },
               "name": {
                  "type": "string"
               },
               "tweet": {
                  "type": "string"
               },
               "user_id": {
                  "type": "long"
               }
            }
         }
      }
   }
}</pre></div><div class="tip admon"><div class="icon"><img alt="Tip" src="images/icons/tip.png" /></div><div class="admon_content"><p>Incorrect mappings, such as <a id="id-1.4.8.17.6.6.1.1" class="indexterm"></a>
<a id="id-1.4.8.17.6.6.1.2" class="indexterm"></a>having an <code class="literal">age</code> field mapped as type <code class="literal">string</code>
instead of <code class="literal">integer</code>, can produce confusing results to your queries.</p><p>Instead of assuming that your mapping is correct, check it!</p></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="custom-field-mappings"></a>Customizing Field Mappings</h3></div></div></div><p>While the basic field datatypes are <a id="id-1.4.8.17.7.2.1" class="indexterm"></a>
<a id="id-1.4.8.17.7.2.2" class="indexterm"></a><a id="id-1.4.8.17.7.2.3" class="indexterm"></a>
<a id="id-1.4.8.17.7.2.4" class="indexterm"></a>sufficient for many cases, you will often
need to customize the mapping <a id="id-1.4.8.17.7.2.5" class="indexterm"></a>
<a id="id-1.4.8.17.7.2.6" class="indexterm"></a>for individual fields, especially string fields.
Custom mappings allow you to do the following:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Distinguish between full-text string fields and exact value string fields
</li><li class="listitem">
Use language-specific analyzers
</li><li class="listitem">
Optimize a field for partial matching
</li><li class="listitem">
Specify custom date formats
</li><li class="listitem">
And much more
</li></ul></div><p>The most important attribute of a field is the <code class="literal">type</code>. For fields
other than <code class="literal">string</code> fields, you will seldom need to map anything other
than <code class="literal">type</code>:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">{
    "number_of_clicks": {
        "type": "integer"
    }
}</pre></div><p>Fields of type <code class="literal">string</code> are, by default, considered to contain full text.
That is, their value will be passed through<a id="id-1.4.8.17.7.6.2" class="indexterm"></a>
<a id="id-1.4.8.17.7.6.3" class="indexterm"></a> an analyzer before being indexed,
and a full-text query on the field will pass the query string through an
analyzer before searching.</p><p>The two most important mapping<a id="id-1.4.8.17.7.7.1" class="indexterm"></a>
<a id="id-1.4.8.17.7.7.2" class="indexterm"></a> attributes for <code class="literal">string</code> fields are
<code class="literal">index</code> and <code class="literal">analyzer</code>.</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_index_2"></a>index</h4></div></div></div><p>The <code class="literal">index</code> attribute controls<a id="id-1.4.8.17.7.8.2.2" class="indexterm"></a> how the string will be indexed. It
can contain one of three values:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">analyzed</code>
</span></dt><dd>
   First analyze the string and then index it.  In other words, index this field as full text.
</dd><dt><span class="term">
<code class="literal">not_analyzed</code>
</span></dt><dd>
   Index this field, so it is searchable, but index the value exactly as specified. Do not analyze it.
</dd><dt><span class="term">
<code class="literal">no</code>
</span></dt><dd>
   Don’t index this field at all. This field will not be searchable.
</dd></dl></div><p>The default value of <code class="literal">index</code> for a <code class="literal">string</code> field is <code class="literal">analyzed</code>.  If we
want to map the field as an exact value, we need to set it to
<code class="literal">not_analyzed</code>:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">{
    "tag": {
        "type":     "string",
        "index":    "not_analyzed"
    }
}</pre></div><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>The other simple types (such as <code class="literal">long</code>, <code class="literal">double</code>, <code class="literal">date</code> etc) also accept the
<code class="literal">index</code> parameter, but the only relevant values are <code class="literal">no</code> and <code class="literal">not_analyzed</code>,
as their values are never analyzed.</p></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_analyzer"></a>analyzer</h4></div></div></div><p>For <code class="literal">analyzed</code> string fields, use <a id="id-1.4.8.17.7.9.2.2" class="indexterm"></a>the <code class="literal">analyzer</code> attribute to
specify which analyzer to apply both at search time and at index time. By
default, Elasticsearch uses the <code class="literal">standard</code> analyzer,<a id="id-1.4.8.17.7.9.2.5" class="indexterm"></a>
<a id="id-1.4.8.17.7.9.2.6" class="indexterm"></a> but you can change this
by specifying one of the built-in analyzers, such<a id="id-1.4.8.17.7.9.2.7" class="indexterm"></a> as
<code class="literal">whitespace</code>, <code class="literal">simple</code>, or <code class="literal">english</code>:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">{
    "tweet": {
        "type":     "string",
        "analyzer": "english"
    }
}</pre></div><p>In <a class="xref" href="index-management.html#custom-analyzers" title="Custom Analyzers">Custom Analyzers</a>, we show you how to define and use custom analyzers
as well.</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="updating-a-mapping"></a>Updating a Mapping</h3></div></div></div><p>You can specify the mapping for a type when you first <a id="id-1.4.8.17.8.2.1" class="indexterm"></a>
<a id="id-1.4.8.17.8.2.2" class="indexterm"></a>
<a id="id-1.4.8.17.8.2.3" class="indexterm"></a><a id="id-1.4.8.17.8.2.4" class="indexterm"></a>
<a id="id-1.4.8.17.8.2.5" class="indexterm"></a>create an index.
Alternatively, you can add the mapping for a new type (or update the mapping
for an existing type) later, using the <code class="literal">/_mapping</code> endpoint.</p><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>Although you can <span class="emphasis"><em>add</em></span> to an existing mapping, you can’t <span class="emphasis"><em>change</em></span> existing
field mappings.  If a mapping already exists for a field, data from that
field has probably been indexed.  If you were to change the field mapping,
the indexed data would be wrong and would not be properly searchable.</p></div></div><p>We can update a mapping to add a new field, but we can’t change an existing
field from <code class="literal">analyzed</code> to <code class="literal">not_analyzed</code>.</p><p>To demonstrate both ways of specifying mappings, let’s first delete the <code class="literal">gb</code>
index:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-sh">DELETE /gb</pre></div><div class="sense_widget" data-snippet="snippets/052_Mapping_Analysis/45_Mapping.json"></div><p>Then create a new index, specifying that the <code class="literal">tweet</code> field should use
the <code class="literal">english</code> analyzer:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">PUT /gb <a id="CO17-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
{
  "mappings": {
    "tweet" : {
      "properties" : {
        "tweet" : {
          "type" :    "string",
          "analyzer": "english"
        },
        "date" : {
          "type" :   "date"
        },
        "name" : {
          "type" :   "string"
        },
        "user_id" : {
          "type" :   "long"
        }
      }
    }
  }
}</pre></div><div class="sense_widget" data-snippet="snippets/052_Mapping_Analysis/45_Mapping.json"></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO17-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
This creates the index with the <code class="literal">mappings</code> specified in the body.
</p></td></tr></table></div><p>Later on, we decide to add a new <code class="literal">not_analyzed</code> text field called <code class="literal">tag</code> to the
<code class="literal">tweet</code> mapping, using the <code class="literal">_mapping</code> endpoint:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">PUT /gb/_mapping/tweet
{
  "properties" : {
    "tag" : {
      "type" :    "string",
      "index":    "not_analyzed"
    }
  }
}</pre></div><div class="sense_widget" data-snippet="snippets/052_Mapping_Analysis/45_Mapping.json"></div><p>Note that we didn’t need to list all of the existing fields again, as we can’t
change them anyway.  Our new field has been merged into the existing mapping.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_testing_the_mapping"></a>Testing the Mapping</h3></div></div></div><p>You can use the <code class="literal">analyze</code> API to<a id="id-1.4.8.17.9.2.2" class="indexterm"></a>
<a id="id-1.4.8.17.9.2.3" class="indexterm"></a> test the mapping for string fields by
name. Compare the output of these two requests:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">GET /gb/_analyze?field=tweet
Black-cats <a id="CO18-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>

GET /gb/_analyze?field=tag
Black-cats <a id="CO18-2"></a><span><img src="images/icons/callouts/2.png" alt="" /></span></pre></div><div class="sense_widget" data-snippet="snippets/052_Mapping_Analysis/45_Mapping.json"></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO18-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> <a href="#CO18-2"><span><img src="images/icons/callouts/2.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The text we want to analyze is passed in the body.
</p></td></tr></table></div><p>The <code class="literal">tweet</code> field produces the two terms <code class="literal">black</code> and <code class="literal">cat</code>, while the
<code class="literal">tag</code> field produces the single term <code class="literal">Black-cats</code>. In other words, our
mapping is working correctly.</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="complex-core-fields"></a>Complex Core Field Types</h2></div></div></div><p>Besides the simple scalar datatypes that we have mentioned,<a id="id-1.4.8.18.2.1" class="indexterm"></a>
<a id="id-1.4.8.18.2.2" class="indexterm"></a><a id="id-1.4.8.18.2.3" class="indexterm"></a>
<a id="id-1.4.8.18.2.4" class="indexterm"></a>
<a id="id-1.4.8.18.2.5" class="indexterm"></a> JSON also
has <code class="literal">null</code> values, arrays, and objects, all of which are supported by
Elasticsearch.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_multivalue_fields"></a>Multivalue Fields</h3></div></div></div><p>It is quite possible that we want our <code class="literal">tag</code> field <a id="id-1.4.8.18.3.2.2" class="indexterm"></a>
<a id="id-1.4.8.18.3.2.3" class="indexterm"></a>to contain more
than one tag. Instead of a single string, we could index an array of tags:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">{ "tag": [ "search", "nosql" ]}</pre></div><p>There is no special mapping required for arrays.<a id="id-1.4.8.18.3.4.1" class="indexterm"></a> Any field can contain zero,
one, or more values, in the same way as a full-text field is analyzed to
produce multiple terms.</p><p>By implication, this means that <span class="emphasis"><em>all the values of an array must be
of the same datatype</em></span>.  You can’t mix dates with strings. If you create
a new field by indexing an array, Elasticsearch will use the
datatype of the first value in the array to determine the <code class="literal">type</code> of the
new field.</p><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>When you get a document back from Elasticsearch, any arrays will be in the
same order as when you indexed the document.  The <code class="literal">_source</code> field that you get
back contains exactly the same JSON document that you indexed.</p><p>However, arrays are <span class="emphasis"><em>indexed</em></span>—made searchable—as multivalue fields,
which are unordered. <a id="id-1.4.8.18.3.6.2.2" class="indexterm"></a>
<a id="id-1.4.8.18.3.6.2.3" class="indexterm"></a><a id="id-1.4.8.18.3.6.2.4" class="indexterm"></a>
<a id="id-1.4.8.18.3.6.2.5" class="indexterm"></a> At search time, you can’t refer to “the first element”
or “the last element.”  Rather, think of an array as a <span class="emphasis"><em>bag of values</em></span>.
<a id="id-1.4.8.18.3.6.2.7" class="indexterm"></a>
<a id="id-1.4.8.18.3.6.2.8" class="indexterm"></a></p></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_empty_fields"></a>Empty Fields</h3></div></div></div><p>Arrays can, of course, be empty. <a id="id-1.4.8.18.4.2.1" class="indexterm"></a>
<a id="id-1.4.8.18.4.2.2" class="indexterm"></a>This is the equivalent of having zero
values. In fact, there is no way of storing a <code class="literal">null</code> value in Lucene, so
a field with a <code class="literal">null</code> value is also considered to be an empty
field.<a id="id-1.4.8.18.4.2.5" class="indexterm"></a>
<a id="id-1.4.8.18.4.2.6" class="indexterm"></a></p><p>These three fields would all be considered to be empty, and would not be
indexed:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">"null_value":               null,
"empty_array":              [],
"array_with_null_value":    [ null ]</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="inner-objects"></a>Multilevel Objects</h3></div></div></div><p>The last native JSON datatype that we need to <a id="id-1.4.8.18.5.2.1" class="indexterm"></a>discuss is the <span class="emphasis"><em>object</em></span> — known in other languages as a hash, hashmap, dictionary or
associative array.</p><p><span class="emphasis"><em>Inner objects</em></span> are often used<a id="id-1.4.8.18.5.3.2" class="indexterm"></a>
<a id="id-1.4.8.18.5.3.3" class="indexterm"></a><a id="id-1.4.8.18.5.3.4" class="indexterm"></a> to embed one entity or object inside
another. For instance, instead of having fields called <code class="literal">user_name</code>
and <code class="literal">user_id</code> inside our <code class="literal">tweet</code> document, we could write it as follows:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">{
    "tweet":            "Elasticsearch is very flexible",
    "user": {
        "id":           "@johnsmith",
        "gender":       "male",
        "age":          26,
        "name": {
            "full":     "John Smith",
            "first":    "John",
            "last":     "Smith"
        }
    }
}</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_mapping_for_inner_objects"></a>Mapping for Inner Objects</h3></div></div></div><p>Elasticsearch will detect new object fields<a id="id-1.4.8.18.6.2.1" class="indexterm"></a>
<a id="id-1.4.8.18.6.2.2" class="indexterm"></a><a id="id-1.4.8.18.6.2.3" class="indexterm"></a>
<a id="id-1.4.8.18.6.2.4" class="indexterm"></a> dynamically and map them as
type <code class="literal">object</code>, with each inner field listed under <code class="literal">properties</code>:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">{
  "gb": {
    "tweet": { <a id="CO19-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
      "properties": {
        "tweet":            { "type": "string" },
        "user": { <a id="CO19-2"></a><span><img src="images/icons/callouts/2.png" alt="" /></span>
          "type":             "object",
          "properties": {
            "id":           { "type": "string" },
            "gender":       { "type": "string" },
            "age":          { "type": "long"   },
            "name":   { <a id="CO19-3"></a><span><img src="images/icons/callouts/3.png" alt="" /></span>
              "type":         "object",
              "properties": {
                "full":     { "type": "string" },
                "first":    { "type": "string" },
                "last":     { "type": "string" }
              }
            }
          }
        }
      }
    }
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO19-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
Root object
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO19-2"><span><img src="images/icons/callouts/2.png" alt="" /></span></a> <a href="#CO19-3"><span><img src="images/icons/callouts/3.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
Inner objects
</p></td></tr></table></div><p>The mapping for the <code class="literal">user</code> and <code class="literal">name</code> fields has a similar structure
to the mapping for the <code class="literal">tweet</code> type itself.  In fact, the <code class="literal">type</code> mapping
is just a special type of <code class="literal">object</code> mapping, which we refer to as the
<span class="emphasis"><em>root object</em></span>.  <a id="id-1.4.8.18.6.5.7" class="indexterm"></a>It is just the same as any other object, except that it has
some special top-level fields for document metadata, such as <code class="literal">_source</code>,
and the <code class="literal">_all</code> field.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_how_inner_objects_are_indexed"></a>How Inner Objects are Indexed</h3></div></div></div><p>Lucene doesn’t understand inner objects.<a id="id-1.4.8.18.7.2.1" class="indexterm"></a>
<a id="id-1.4.8.18.7.2.2" class="indexterm"></a><a id="id-1.4.8.18.7.2.3" class="indexterm"></a>
<a id="id-1.4.8.18.7.2.4" class="indexterm"></a> A Lucene document consists of a flat
list of key-value pairs.  In order for Elasticsearch to index inner objects
usefully, it converts our document into something like this:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">{
    "tweet":            [elasticsearch, flexible, very],
    "user.id":          [@johnsmith],
    "user.gender":      [male],
    "user.age":         [26],
    "user.name.full":   [john, smith],
    "user.name.first":  [john],
    "user.name.last":   [smith]
}</pre></div><p><span class="emphasis"><em>Inner fields</em></span> can be referred to by<a id="id-1.4.8.18.7.4.2" class="indexterm"></a> name (for example, <code class="literal">first</code>). To distinguish
between two fields that have the same name, we can use the full <span class="emphasis"><em>path</em></span> (for example, <code class="literal">user.name.first</code>) or even the <code class="literal">type</code> name plus
the path (<code class="literal">tweet.user.name.first</code>).</p><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>In the preceding simple flattened document, there is no field called <code class="literal">user</code>
and no field called <code class="literal">user.name</code>.  Lucene indexes only scalar or simple values,
not complex data structures.</p></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="object-arrays"></a>Arrays of Inner Objects</h3></div></div></div><p>Finally, consider how an array containing<a id="id-1.4.8.18.8.2.1" class="indexterm"></a>
<a id="id-1.4.8.18.8.2.2" class="indexterm"></a><a id="id-1.4.8.18.8.2.3" class="indexterm"></a>
<a id="id-1.4.8.18.8.2.4" class="indexterm"></a> inner objects would be indexed.
Let’s say we have a <code class="literal">followers</code> array that looks like this:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">{
    "followers": [
        { "age": 35, "name": "Mary White"},
        { "age": 26, "name": "Alex Jones"},
        { "age": 19, "name": "Lisa Smith"}
    ]
}</pre></div><p>This document will be flattened as we described previously, but the result will
look like this:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">{
    "followers.age":    [19, 26, 35],
    "followers.name":   [alex, jones, lisa, smith, mary, white]
}</pre></div><p>The correlation between <code class="literal">{age: 35}</code> and <code class="literal">{name: Mary White}</code> has been lost as
each multivalue field is just a bag of values, not an ordered array.  This is
sufficient for us to ask, "Is there a follower who is 26 years old?"</p><p>But we can’t get an accurate answer to this: "Is there a follower who is 26 years old <span class="emphasis"><em>and who is called Alex Jones</em></span>?"</p><p>Correlated inner objects, which are able to answer queries like these,
are called <span class="emphasis"><em>nested</em></span> objects, and we cover them later, in
<a class="xref" href="nested-objects.html" title="Nested Objects"><em>Nested Objects</em></a>.</p></div></div></div><div class="navfooter"><span class="prev"><a href="search.html">
              « 
              Searching—The Basic Tools</a>
           
        </span><span class="next">
           
          <a href="full-body-search.html">Full-Body Search
               »
            </a></span></div>
<!-- end body -->

            </section>

            <div id="rtpcontainer"
        >
	<h3>Top Videos</h3>
	<ul class="lists">
		<li><a href="https://www.elastic.co/webinars/get-started-with-elasticsearch/?baymax=default&elektra=docs&storm=top-video">Getting Started</a></li>
		<li><a href="http://www.elastic.co/webinars/elasticsearch-performance-optimization-tale-two-tickets/?elektra=docs">Scaling</a></li>
		<li><a href="http://www.elastic.co/webinars/shield-securing-your-data-in-elasticsearch/?elektra=docs">Security</a></li>
	</ul>
</div>


	  	




<script src="//app-lon02.marketo.com/js/forms2/js/forms2.min.js"></script>
	<!-- subscribe-newsletter -->
	<div id="subscribe-newsletter">
		<div class="container">
			<div class="row">
				<div class="12u">
					<div class="subscribe-wrapper" id="rtp-newsletter">
						<header>
							<h3>Subscribe to our newsletter</h3>
						</header>
						<div class="subscribe-form">
							<form id="mktoForm_1398" class="container"></form>
							<div class="form_thanks hide">
								
									<p>Thanks for subscribing! We'll keep you updated with new releases.</p>
								
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

  	<!-- Footer -->
	<div id="footer-wrapper">
		<section id="footer" class="container">
			<div class="row">
				<div class="12u">
					<!-- Copyright -->
					<div id="copyright">
	<p>
		© 2016. All Rights Reserved - Elasticsearch
	</p>
	<ul class="links">
		<li>Elasticsearch is a trademark of Elasticsearch BV, registered in the U.S. and in other countries</li>
		<li><a href="/legal/trademarks" id="footer_trademarks">Trademarks</a></li>
		<li><a href="/legal/terms-of-use" id="footer_terms">Terms</a></li>
		<li><a href="/legal/privacy-policy" id="footer_privacy">Privacy</a></li>
	</ul>
	<p>
		Apache, Apache Lucene, Apache Hadoop, Hadoop, HDFS and the yellow elephant logo are trademarks of the <a href="http://www.apache.org/" target="_blank">Apache Software Foundation</a> in the United States and/or other&nbsp;countries.
	</p>
</div><!--<div class="row">
{replace4}
</div>-->
				</div>
			</div>					
		</section>
	</div>
			
	<!-- Social Media -->
	<div id="socialmedia-wrapper">
		<section id="socialmedia" class="container">
			<!-- social icons -->
			<div id="social">
				<ul class="links">
					
						<li class="facebook grayscale"><a href="http://www.facebook.com/elastic.co" target="_blank" id="footer_facebook"></a></li>
					
						<li class="twitter grayscale"><a href="https://www.twitter.com/elastic" target="_blank" id="footer_twitter"></a></li>
					
						<li class="linkedin grayscale"><a href="https://www.linkedin.com/company/elastic-co" target="_blank" id="footer_linkedin"></a></li>
					
						<li class="xing grayscale"><a href="https://www.xing.com/companies/elastic.co" target="_blank" id="footer_xing"></a></li>
					
						<li class="youtube grayscale"><a href="https://www.youtube.com/user/elasticsearch" target="_blank" id="footer_youtube"></a></li>
					
				</ul>
			</div>
		</section>
	</div>


<style type="text/css">
	
		.facebook{background:url("https://static-www.elastic.co/assets/bltda40eebd7c7cae9a/facebook.svg?q=100") no-repeat;}		
	
		.twitter{background:url("https://static-www.elastic.co/assets/bltfd3b1511512f4632/twitter.svg?q=100") no-repeat;}		
	
		.linkedin{background:url("https://static-www.elastic.co/assets/blt6b4f6f8d6b96f814/linkedin.svg?q=100") no-repeat;}		
	
		.xing{background:url("https://static-www.elastic.co/assets/blta76b2ae2b2f10a98/xing.svg?q=100") no-repeat;}		
	
		.youtube{background:url("https://static-www.elastic.co/assets/blt5761648c9581fb53/youtube.svg?q=100") no-repeat;}		
	
</style>

<script>
MktoForms2.loadForm("//app-lon02.marketo.com", "813-MAM-392", 1398,function(form){
	form.onSuccess(function(form){
		$('#mktoForm_1398').css('display','none');
		$('#subscribe-newsletter header').hide();
		$('#mktoForm_1398').siblings('.form_thanks').removeClass('hide')
		dataLayer.push({'event': 'mktoFormSubmit'});
	    return false;
  	});
});
</script>	

  	</div>
  	<!-- <div class="preloader">
    	<div class="status"></div>
	</div> -->
  	<style></style>
   	<script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";	
</script>
<script src="https://static-www.elastic.co/static/js/jquery.autocomplete.js?q=100"></script>
<script src="https://static-www.elastic.co/static/js/script.js?q=100"></script>


   	
   	
   	
   	<script type="application/ld+json">
	
		
	
	{
	  	"@context": "http://schema.org",
	  	"@type": "Organization",
	  	"name" : "Elastic",
	  	"url": "https://www.elastic.co/",
	  	"logo": "https://www.elastic.co/static/img/elastic-logo-200.png",
		"sameAs" : [ "https://www.facebook.com/elastic.co",
			"https://twitter.com/elastic",
			"https://plus.google.com/105178019064686397293",
			"https://www.youtube.com/user/elasticsearch",
			"https://www.linkedin.com/company/elasticsearch"
		],
	  	"potentialAction": {
	    	"@type": "SearchAction",
	    	"target": "https://www.elastic.co/search?q={query_string}",
	    	"query-input": "required name=query_string"
	  	}
	}
</script>	

            <script type="text/javascript" src="docs.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script type='text/javascript' src='https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js'></script>

            </body>
        

